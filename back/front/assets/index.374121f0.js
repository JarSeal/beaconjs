var bi=Object.defineProperty,yi=Object.defineProperties;var Si=Object.getOwnPropertyDescriptors;var ht=Object.getOwnPropertySymbols;var ki=Object.prototype.hasOwnProperty,xi=Object.prototype.propertyIsEnumerable;var Oe=(r,t,e)=>t in r?bi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,ae=(r,t)=>{for(var e in t||(t={}))ki.call(t,e)&&Oe(r,e,t[e]);if(ht)for(var e of ht(t))xi.call(t,e)&&Oe(r,e,t[e]);return r},xe=(r,t)=>yi(r,Si(t));var c=(r,t,e)=>(Oe(r,typeof t!="symbol"?t+"":t,e),e);const Ci=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}};Ci();var et={exports:{}},qt=function(t,e){return function(){for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];return t.apply(e,s)}},Ti=qt,re=Object.prototype.toString;function tt(r){return re.call(r)==="[object Array]"}function Ge(r){return typeof r=="undefined"}function Ii(r){return r!==null&&!Ge(r)&&r.constructor!==null&&!Ge(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Di(r){return re.call(r)==="[object ArrayBuffer]"}function Ri(r){return typeof FormData!="undefined"&&r instanceof FormData}function Li(r){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&r.buffer instanceof ArrayBuffer,t}function Ei(r){return typeof r=="string"}function Fi(r){return typeof r=="number"}function Nt(r){return r!==null&&typeof r=="object"}function De(r){if(re.call(r)!=="[object Object]")return!1;var t=Object.getPrototypeOf(r);return t===null||t===Object.prototype}function Mi(r){return re.call(r)==="[object Date]"}function Ai(r){return re.call(r)==="[object File]"}function Pi(r){return re.call(r)==="[object Blob]"}function Vt(r){return re.call(r)==="[object Function]"}function $i(r){return Nt(r)&&Vt(r.pipe)}function Bi(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function ji(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Oi(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function it(r,t){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),tt(r))for(var e=0,i=r.length;e<i;e++)t.call(null,r[e],e,r);else for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.call(null,r[s],s,r)}function We(){var r={};function t(s,a){De(r[a])&&De(s)?r[a]=We(r[a],s):De(s)?r[a]=We({},s):tt(s)?r[a]=s.slice():r[a]=s}for(var e=0,i=arguments.length;e<i;e++)it(arguments[e],t);return r}function Ui(r,t,e){return it(t,function(s,a){e&&typeof s=="function"?r[a]=Ti(s,e):r[a]=s}),r}function qi(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var $={isArray:tt,isArrayBuffer:Di,isBuffer:Ii,isFormData:Ri,isArrayBufferView:Li,isString:Ei,isNumber:Fi,isObject:Nt,isPlainObject:De,isUndefined:Ge,isDate:Mi,isFile:Ai,isBlob:Pi,isFunction:Vt,isStream:$i,isURLSearchParams:Bi,isStandardBrowserEnv:Oi,forEach:it,merge:We,extend:Ui,trim:ji,stripBOM:qi},ne=$;function ct(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ht=function(t,e,i){if(!e)return t;var s;if(i)s=i(e);else if(ne.isURLSearchParams(e))s=e.toString();else{var a=[];ne.forEach(e,function(l,u){l===null||typeof l=="undefined"||(ne.isArray(l)?u=u+"[]":l=[l],ne.forEach(l,function(f){ne.isDate(f)?f=f.toISOString():ne.isObject(f)&&(f=JSON.stringify(f)),a.push(ct(u)+"="+ct(f))}))}),s=a.join("&")}if(s){var n=t.indexOf("#");n!==-1&&(t=t.slice(0,n)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},Ni=$;function Me(){this.handlers=[]}Me.prototype.use=function(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Me.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Me.prototype.forEach=function(t){Ni.forEach(this.handlers,function(i){i!==null&&t(i)})};var Vi=Me,Hi=$,zi=function(t,e){Hi.forEach(t,function(s,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(t[e]=s,delete t[a])})},zt=function(t,e,i,s,a){return t.config=e,i&&(t.code=i),t.request=s,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},Gi=zt,Gt=function(t,e,i,s,a){var n=new Error(t);return Gi(n,e,i,s,a)},Wi=Gt,Ki=function(t,e,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):e(Wi("Request failed with status code "+i.status,i.config,null,i.request,i))},Ce=$,Ji=Ce.isStandardBrowserEnv()?function(){return{write:function(e,i,s,a,n,o){var l=[];l.push(e+"="+encodeURIComponent(i)),Ce.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),Ce.isString(a)&&l.push("path="+a),Ce.isString(n)&&l.push("domain="+n),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Yi=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},Xi=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},Zi=Yi,Qi=Xi,es=function(t,e){return t&&!Zi(e)?Qi(t,e):e},Ue=$,ts=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],is=function(t){var e={},i,s,a;return t&&Ue.forEach(t.split(`
`),function(o){if(a=o.indexOf(":"),i=Ue.trim(o.substr(0,a)).toLowerCase(),s=Ue.trim(o.substr(a+1)),i){if(e[i]&&ts.indexOf(i)>=0)return;i==="set-cookie"?e[i]=(e[i]?e[i]:[]).concat([s]):e[i]=e[i]?e[i]+", "+s:s}}),e},ft=$,ss=ft.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),i;function s(a){var n=a;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=s(window.location.href),function(n){var o=ft.isString(n)?s(n):n;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function st(r){this.message=r}st.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};st.prototype.__CANCEL__=!0;var Ae=st,Te=$,rs=Ki,as=Ji,ns=Ht,os=es,ls=is,ds=ss,qe=Gt,us=$e,hs=Ae,mt=function(t){return new Promise(function(i,s){var a=t.data,n=t.headers,o=t.responseType,l;function u(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}Te.isFormData(a)&&delete n["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.Authorization="Basic "+btoa(f+":"+m)}var _=os(t.baseURL,t.url);d.open(t.method.toUpperCase(),ns(_,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function y(){if(!!d){var w="getAllResponseHeaders"in d?ls(d.getAllResponseHeaders()):null,b=!o||o==="text"||o==="json"?d.responseText:d.response,T={data:b,status:d.status,statusText:d.statusText,headers:w,config:t,request:d};rs(function(X){i(X),u()},function(X){s(X),u()},T),d=null}}if("onloadend"in d?d.onloadend=y:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(y)},d.onabort=function(){!d||(s(qe("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){s(qe("Network Error",t,null,d)),d=null},d.ontimeout=function(){var b=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",T=t.transitional||us.transitional;t.timeoutErrorMessage&&(b=t.timeoutErrorMessage),s(qe(b,t,T.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",d)),d=null},Te.isStandardBrowserEnv()){var k=(t.withCredentials||ds(_))&&t.xsrfCookieName?as.read(t.xsrfCookieName):void 0;k&&(n[t.xsrfHeaderName]=k)}"setRequestHeader"in d&&Te.forEach(n,function(b,T){typeof a=="undefined"&&T.toLowerCase()==="content-type"?delete n[T]:d.setRequestHeader(T,b)}),Te.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(l=function(w){!d||(s(!w||w&&w.type?new hs("canceled"):w),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l))),a||(a=null),d.send(a)})},I=$,pt=zi,cs=zt,fs={"Content-Type":"application/x-www-form-urlencoded"};function gt(r,t){!I.isUndefined(r)&&I.isUndefined(r["Content-Type"])&&(r["Content-Type"]=t)}function ms(){var r;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(r=mt),r}function ps(r,t,e){if(I.isString(r))try{return(t||JSON.parse)(r),I.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(r)}var Pe={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:ms(),transformRequest:[function(t,e){return pt(e,"Accept"),pt(e,"Content-Type"),I.isFormData(t)||I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)?t:I.isArrayBufferView(t)?t.buffer:I.isURLSearchParams(t)?(gt(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):I.isObject(t)||e&&e["Content-Type"]==="application/json"?(gt(e,"application/json"),ps(t)):t}],transformResponse:[function(t){var e=this.transitional||Pe.transitional,i=e&&e.silentJSONParsing,s=e&&e.forcedJSONParsing,a=!i&&this.responseType==="json";if(a||s&&I.isString(t)&&t.length)try{return JSON.parse(t)}catch(n){if(a)throw n.name==="SyntaxError"?cs(n,this,"E_JSON_PARSE"):n}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],function(t){Pe.headers[t]={}});I.forEach(["post","put","patch"],function(t){Pe.headers[t]=I.merge(fs)});var $e=Pe,gs=$,vs=$e,_s=function(t,e,i){var s=this||vs;return gs.forEach(i,function(n){t=n.call(s,t,e)}),t},Wt=function(t){return!!(t&&t.__CANCEL__)},vt=$,Ne=_s,ws=Wt,bs=$e,ys=Ae;function Ve(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new ys("canceled")}var Ss=function(t){Ve(t),t.headers=t.headers||{},t.data=Ne.call(t,t.data,t.headers,t.transformRequest),t.headers=vt.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),vt.forEach(["delete","get","head","post","put","patch","common"],function(s){delete t.headers[s]});var e=t.adapter||bs.adapter;return e(t).then(function(s){return Ve(t),s.data=Ne.call(t,s.data,s.headers,t.transformResponse),s},function(s){return ws(s)||(Ve(t),s&&s.response&&(s.response.data=Ne.call(t,s.response.data,s.response.headers,t.transformResponse))),Promise.reject(s)})},M=$,Kt=function(t,e){e=e||{};var i={};function s(d,f){return M.isPlainObject(d)&&M.isPlainObject(f)?M.merge(d,f):M.isPlainObject(f)?M.merge({},f):M.isArray(f)?f.slice():f}function a(d){if(M.isUndefined(e[d])){if(!M.isUndefined(t[d]))return s(void 0,t[d])}else return s(t[d],e[d])}function n(d){if(!M.isUndefined(e[d]))return s(void 0,e[d])}function o(d){if(M.isUndefined(e[d])){if(!M.isUndefined(t[d]))return s(void 0,t[d])}else return s(void 0,e[d])}function l(d){if(d in e)return s(t[d],e[d]);if(d in t)return s(void 0,t[d])}var u={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return M.forEach(Object.keys(t).concat(Object.keys(e)),function(f){var m=u[f]||a,_=m(f);M.isUndefined(_)&&m!==l||(i[f]=_)}),i},Jt={version:"0.24.0"},ks=Jt.version,rt={};["object","boolean","number","function","string","symbol"].forEach(function(r,t){rt[r]=function(i){return typeof i===r||"a"+(t<1?"n ":" ")+r}});var _t={};rt.transitional=function(t,e,i){function s(a,n){return"[Axios v"+ks+"] Transitional option '"+a+"'"+n+(i?". "+i:"")}return function(a,n,o){if(t===!1)throw new Error(s(n," has been removed"+(e?" in "+e:"")));return e&&!_t[n]&&(_t[n]=!0,console.warn(s(n," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,n,o):!0}};function xs(r,t,e){if(typeof r!="object")throw new TypeError("options must be an object");for(var i=Object.keys(r),s=i.length;s-- >0;){var a=i[s],n=t[a];if(n){var o=r[a],l=o===void 0||n(o,a,r);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(e!==!0)throw Error("Unknown option "+a)}}var Cs={assertOptions:xs,validators:rt},Yt=$,Ts=Ht,wt=Vi,bt=Ss,Be=Kt,Xt=Cs,oe=Xt.validators;function ye(r){this.defaults=r,this.interceptors={request:new wt,response:new wt}}ye.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Be(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;e!==void 0&&Xt.assertOptions(e,{silentJSONParsing:oe.transitional(oe.boolean),forcedJSONParsing:oe.transitional(oe.boolean),clarifyTimeoutError:oe.transitional(oe.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(s=s&&m.synchronous,i.unshift(m.fulfilled,m.rejected))});var a=[];this.interceptors.response.forEach(function(m){a.push(m.fulfilled,m.rejected)});var n;if(!s){var o=[bt,void 0];for(Array.prototype.unshift.apply(o,i),o=o.concat(a),n=Promise.resolve(t);o.length;)n=n.then(o.shift(),o.shift());return n}for(var l=t;i.length;){var u=i.shift(),d=i.shift();try{l=u(l)}catch(f){d(f);break}}try{n=bt(l)}catch(f){return Promise.reject(f)}for(;a.length;)n=n.then(a.shift(),a.shift());return n};ye.prototype.getUri=function(t){return t=Be(this.defaults,t),Ts(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Yt.forEach(["delete","get","head","options"],function(t){ye.prototype[t]=function(e,i){return this.request(Be(i||{},{method:t,url:e,data:(i||{}).data}))}});Yt.forEach(["post","put","patch"],function(t){ye.prototype[t]=function(e,i,s){return this.request(Be(s||{},{method:t,url:e,data:i}))}});var Is=ye,Ds=Ae;function fe(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(s){t=s});var e=this;this.promise.then(function(i){if(!!e._listeners){var s,a=e._listeners.length;for(s=0;s<a;s++)e._listeners[s](i);e._listeners=null}}),this.promise.then=function(i){var s,a=new Promise(function(n){e.subscribe(n),s=n}).then(i);return a.cancel=function(){e.unsubscribe(s)},a},r(function(s){e.reason||(e.reason=new Ds(s),t(e.reason))})}fe.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};fe.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};fe.prototype.unsubscribe=function(t){if(!!this._listeners){var e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}};fe.source=function(){var t,e=new fe(function(s){t=s});return{token:e,cancel:t}};var Rs=fe,Ls=function(t){return function(i){return t.apply(null,i)}},Es=function(t){return typeof t=="object"&&t.isAxiosError===!0},yt=$,Fs=qt,Re=Is,Ms=Kt,As=$e;function Zt(r){var t=new Re(r),e=Fs(Re.prototype.request,t);return yt.extend(e,Re.prototype,t),yt.extend(e,t),e.create=function(s){return Zt(Ms(r,s))},e}var G=Zt(As);G.Axios=Re;G.Cancel=Ae;G.CancelToken=Rs;G.isCancel=Wt;G.VERSION=Jt.version;G.all=function(t){return Promise.all(t)};G.spread=Ls;G.isAxiosError=Es;et.exports=G;et.exports.default=G;var P=et.exports;class at{constructor(t){this.keyPrefix=t||"",this.localStorageAvailable=!1,this._lsTest()&&(this.localStorageAvailable=!0)}getItem(t,e){return this.localStorageAvailable&&this.checkIfItemExists(t)?localStorage.getItem(this.keyPrefix+t):e||null}checkIfItemExists(t){return this.localStorageAvailable?Object.prototype.hasOwnProperty.call(localStorage,this.keyPrefix+t):!1}setItem(t,e){return this.localStorageAvailable?(localStorage.setItem(this.keyPrefix+t,e),!0):!1}removeItem(t){return this.localStorageAvailable?(this.checkIfItemExists(t)&&localStorage.removeItem(this.keyPrefix+t),!0):!1}convertValue(t,e){return typeof t=="boolean"?e==="true":typeof t=="number"?Number(e):e}_lsTest(){const t=this.keyPrefix+"testLSAvailability";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}}class Qt{constructor(t){this.keyPrefix=t||"",this.sessionStorageAvailable=!1,this._lsTest()&&(this.sessionStorageAvailable=!0)}getItem(t,e){return this.sessionStorageAvailable&&this.checkIfItemExists(t)?sessionStorage.getItem(this.keyPrefix+t):e||null}checkIfItemExists(t){return this.sessionStorageAvailable?Object.prototype.hasOwnProperty.call(sessionStorage,this.keyPrefix+t):!1}setItem(t,e){return this.sessionStorageAvailable?(sessionStorage.setItem(this.keyPrefix+t,e),!0):!1}removeItem(t){return this.sessionStorageAvailable?(this.checkIfItemExists(t)&&sessionStorage.removeItem(this.keyPrefix+t),!0):!1}convertValue(t,e){return typeof t=="boolean"?e==="true":typeof t=="number"?Number(e):e}_lsTest(){const t=this.keyPrefix+"testSSAvailability";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch{return!1}}}class H{constructor(t,e){this.prefix=t||"",this.showLogs=!0,this.showErrors=!0,this.showWarnings=!0,e&&this.turnOff()}log(...t){!this.showLogs||console.log(this.prefix,...t)}error(...t){!this.showErrors||console.error(this.prefix,...t)}warn(...t){!this.showWarnings||console.warn(this.prefix,...t)}turnOff(){this.showLogs=!1,this.showErrors=!1,this.showWarnings=!1}turnOn(){this.showLogs=!0,this.showErrors=!0,this.showWarnings=!0}}let St=!1;const V=new H("LIGHTER.js ROUTER *****");class Ps{constructor(t,e,i,s){c(this,"initRouter",async(t,e)=>{this.setRoute();let i=!1;if(this.curRoute.length<this.basePath.length&&(this.curRoute=this.basePath+"/",i=!0),!t){this.notFound();return}for(let a=0;a<t.length;a++){if(!t[a].route)throw V.error(`Route '${t[a].id}' is missing the route attribute.`),new Error("Call stack");if(t[a].route=this.basePath+t[a].route,t[a].redirect){if(t[a].redirect=this.basePath+t[a].redirect,t[a].redirect===t[a].route)throw V.error(`Route's redirect cannot be the same as the route '${t[a].route}'.`),new Error("Call stack");this._compareRoutes(t[a].route,this.curRoute)&&(this.curRoute=t[a].redirect,i=!0)}if(this._compareRoutes(t[a].route,this.curRoute,!0)&&t[a].beforeDraw){const n=await t[a].beforeDraw({route:t[a],curRouteData:this.curRouteData,curRoute:this.curRoute,basePath:this.basePath,commonData:this.commonData,prevRouteData:null,prevRoute:null});n&&(this.curRoute=this.basePath+n,i=!0)}}let s=!1;for(let a=0;a<t.length;a++){if(t[a].redirect){this.routes.push(t[a]);continue}if(!t[a].id)throw V.error("Route is missing the id attribute."),new Error("Call stack");if(this.langFn&&(t[a].titleId?t[a].title=this.langFn(t[a].titleId):V.warn(`Router has a langFn defined, but route '${t[a].id}' is missing the titleId.`)),t[a].title||(V.warn(`Route '${t[a].id}' is missing the title. Setting id as title.`),t[a].title=t[a].id),t[a].parentId=e,this.routes.push(t[a]),this._compareRoutes(t[a].route,this.curRoute)&&!this.curRoute.includes(":")&&(t[a].parentId=e,this._createNewView(t[a]),s=!0,this.curRouteData=t[a],document.title=this._createPageTitle(t[a].title)),!s){const n=this._getRouteParams(this.routes[a].route,this.curRoute);n&&(t[a].parentId=e,this._createNewView(t[a]),s=!0,this.curRouteData=t[a],this.curRouteData.params=n,document.title=this._createPageTitle(t[a].title))}}if(s||this.notFound(),window.onpopstate=this.routeChangeListener,i){const a=this._createRouteState();window.history.pushState(a,"",this.curRoute),this.curHistoryState=a}St=!0});c(this,"routeChangeListener",t=>{this.setRoute(),this.changeRoute(this.curRoute,{forceUpdate:!0,ignoreBasePath:!0,doNotSetState:!0}),this.curHistoryState=t.state||{}});c(this,"replaceRoute",(t,e)=>{let i=this.basePath;e&&(i=""),t=i+t;const s=this._createRouteState();window.history.replaceState(s,"",t)});c(this,"setNextHistoryState",t=>{this.nextHistoryState=Object.assign(this.nextHistoryState,t)});c(this,"setCurHistoryState",t=>{this.curHistoryState=Object.assign(this.curHistoryState,t),window.history.replaceState(this.curHistoryState,"")});c(this,"getCurHistoryState",()=>this.curHistoryState);c(this,"changeRoute",async(t,e)=>{e||(e={});const i=e.forceUpdate,s=e.ignoreBasePath,a=e.doNotSetState,n=e.replaceState;let o=this.basePath;s&&(o=""),t=o+t;let l;for(let d=0;d<this.routes.length;d++)if(this._compareRoutes(this.routes[d].route,t,!0)&&this.routes[d].beforeDraw){l=await this.routes[d].beforeDraw({route:this.routes[d],curRouteData:this.curRouteData,curRoute:this.curRoute,basePath:this.basePath,commonData:this.commonData,prevRouteData:this.prevRouteData,prevRoute:this.prevRouteData}),l&&(t=o+l);break}for(let d=0;d<this.routes.length;d++)if(this.routes[d].redirect&&this._compareRoutes(this.routes[d].route,t)){t=this.routes[d].redirect;break}if(this._compareRoutes(t,this.curRoute)&&!i)return;if(i&&(this.curRouteData.component.discard(!0),this.curRouteData.component=null),!a&&!n){const d=this._createRouteState();window.history.pushState(d,"",t)}else n&&this.replaceRoute(t,!0);this.prevRoute=this.curRoute,this.setRoute();let u=!1;for(let d=0;d<this.routes.length;d++){if(this._compareRoutes(this.routes[d].route,t)&&!t.includes(":")){u=!0,this.prevRouteData=Object.assign({},this.curRouteData),this.curRouteData=this.routes[d],document.title=this._createPageTitle(this.routes[d].title),this._createNewView(this.routes[d]);break}const f=this._getRouteParams(this.routes[d].route,t);if(f){u=!0,this.prevRouteData=Object.assign({},this.curRouteData),this.curRouteData=this.routes[d],this.curRouteData.params=f,document.title=this._createPageTitle(this.routes[d].title),this._createNewView(this.routes[d]);break}}u||this.notFound(),this.rcCallback(this.curRoute)});if(St)throw V.error("Router has already been initiated. Only one router per app is allowed."),new Error("Call stack");if(!t||!t.routes||!t.routes.length)throw V.error(`Missing routesData parameter, routesData.routes, or routesData.routes is empty.
Required params: new Route(routesData, parentId, rcCallback);`),new Error("Call stack");if(!e)throw V.error(`Missing parentId parameter.
Required params: new Route(routesData, parentId, rcCallback);`),new Error("Call stack");if(!i)throw V.error(`Missing rcCallback (route change callback) parameter / function.
Required params: new Route(routesData, parentId, rcCallback);`),new Error("Call stack");ei=this,this.routes=[],this.nextHistoryState={},this.curHistoryState={},this.basePath=t.basePath||"",this.titlePrefix=t.titlePrefix||"",this.titleSuffix=t.titleSuffix||"",this.langFn=t.langFn,this.curRoute=this.basePath+"/",this.rcCallback=i,this.redirectRoute=null,this.curRouteData={route:this.basePath+"/",source:null,params:{},component:null},this.prevRoute=null,this.prevRouteData=null,s||(s={}),this.commonData=s,this.initRouter(t.routes,e)}_createPageTitle(t){return this.titlePrefix+t+this.titleSuffix}_createRouteState(){const t=Object.assign({},this.nextHistoryState);return this.nextHistoryState={},this.curHistoryState={},t}_compareRoutes(t,e,i){if(t=t.split("?")[0],e=e.split("?")[0],i&&(t.includes(":")||e.includes(":"))){const s=t.split("/"),a=e.split("/");let n=s.length;a.length>s.length&&(n=a.length);for(let o=0;o<n;o++)s[o]&&s[o].includes(":")?s[o]=a[o]:a[o]&&a[o].includes(":")&&(a[o]=s[o]);t=s.join("/"),e=a.join("/")}return t===e||t+"/"===e||t===e+"/"}getRoute(t){return t?this.curRoute.replace(this.basePath,""):this.curRoute}getRouteData(){return xe(ae({},this.curRouteData),{prevRouteData:this.prevRouteData})}getRouteParams(){return this.curRouteData.params}isCurrent(t){return this.basePath+t===this.curRoute||this.basePath+t===this.curRoute+"/"||this.basePath+t+"/"===this.curRoute}setRoute(){let t=location.pathname;t?(t.length>1&&t.substring(t.length-1,t.length)==="/"&&(t=t.substring(0,t.length-1)),this.curRoute=t):this.curRoute=this.basePath+"/"}addRoute(t){t.route=this.basePath+t.route,this.routes.push(t),this._compareRoutes(t.route,this.curRoute)&&(this.curRouteData=t)}notFound(){let t;for(let e=0;e<this.routes.length;e++)this.routes[e].is404&&(t=this.routes[e]);if(!t)throw V.error("Could not find 404 template."),new Error("Call stack");this.prevRouteData=Object.assign({},this.curRouteData),this.curRouteData=t,document.title=this._createPageTitle(t.title),this._createNewView(t)}draw(){this.prevRouteData&&this.prevRouteData.component&&(this.prevRouteData.component.discard(!0),this.prevRouteData.component=null),this.curRouteData.component.draw()}_createNewView(t){t.component=new t.source(xe(ae({},this.commonData),{id:t.id,parentId:t.parentId,title:t.title,template:t.template,extraRouteData:t.extraRouteData}))}_getRouteParams(t,e){if(!t.includes(":"))return!1;const i=t.split("/");e=e.split("?")[0];const s=e.split("/");let a=i.length;s.length>i.length&&(a=s.length);let n={};for(let o=0;o<a;o++)if(i[o]&&i[o].includes(":")){if(!s[o])return!1;const l=i[o].replace(":","");n[l]=s[o]}else if(!i[o]===void 0||!s[o]===void 0||i[o]!==s[o])return!1;return n}}let ei=null;const _e={},te=new H("LIGHTER.js COMPO *****");class v{constructor(t){c(this,"drawHTML",t=>{const e=this.id+"-simpleton-"+this.simpletonIndex,i=Object.assign({},{id:e},t);let s=this.children[e];s||(s=this.addChild(i)),s.draw(),this.simpletonIndex++});c(this,"drawChildren",t=>{const e=Object.keys(this.children);for(let i=0;i<e.length;i++)this.children[e[i]].draw(),t&&this.children[e[i]].drawChildren()});c(this,"addChildDraw",(t,e)=>this.addChild(t).draw(e));c(this,"_addToCSSClass",t=>(this.data.class=this.data.class?`${this.data.class} ${t}`:t,this.data.class));c(this,"_importHtml",(t,e)=>{let i=document.createElement("div");i.innerHTML=t,i=i.firstChild;let s=[],a={};for(let l=0;l<e.length;l++)s=[...s,...Object.keys(e[l])],a=ae(ae({},a),e[l]);const n=l=>{for(let u=0;u<s.length;u++)l.contains(s[u])&&(l.remove(s[u]),l.add(a[s[u]]))},o=l=>{Array.from(l.children).map(u=>{n(u.classList),u.children.length&&o(u)})};return n(i.classList),o(i),i.outerHTML});if(!t||!t.id)throw te.error("Component id missing.",t),new Error("Call stack");if(_e[t.id])if(t.autoDiscard===void 0&&(t.autoDiscard=!0),t.autoDiscard)_e[t.id].discard(!0);else throw te.error("ID is already in use.",t),new Error("Call stack");_e[t.id]=this,this.id=t.id,this.data=t,this.parent,this.parentId=t.parentId?t.parentId:null,this.template,this.elem,this.drawing=!1,this.discarding=!1,this.listeners={},this.children={},this.simpletonIndex=0,this.Router=ei,this.logger=te,this.firstDraw=!0,this.isComponent=!0}draw(t,e){if(this.drawing||this.discarding)return;if(this.drawing=!0,!this.parentId)throw this.drawing=!1,te.error("Parent id missing. New Component creation should have a parentId or the the creation should be wrapped in this.addChild() method.",this.data),new Error("Call stack");let i=this.data;if(t&&(i=Object.assign(this.data,t)),!this.firstDraw&&i.noRedraws){this.drawing=!1;return}if(this.elem&&this.discard(),this.parent=document.getElementById(i.attach||this.parentId),this.template||(this.template=i.template||this._createDefaultTemplate(this.id,i)),this.template=this._templateId(this.template,i).trim(),i.replace)this.parent.innerHTML=this.template;else{const s=document.createElement("template");s.innerHTML=this.template,this.parent&&(i.prepend?this.parent.prepend(s.content.firstChild):this.parent.append(s.content.firstChild))}this.elem=document.getElementById(this.id),this._setElemData(this.elem,i),this.firstDraw&&(this.init(i),this.firstDraw=!1),this.paint(i),this.addListeners(i),this.simpletonIndex=0,this.drawing=!1,e&&e(this)}reDrawSelf(t){this.simpletonIndex=0,this.draw(t)}rePaint(){this.simpletonIndex=0,this.paint(this.data)}init(){}paint(){}discard(t,e){if(this.discarding)return;this.discarding=!0;let i=Object.keys(this.listeners);for(let s=0;s<i.length;s++)this.removeListener(i[s]);i=Object.keys(this.children);for(let s=0;s<i.length;s++)this.children[i[s]].discard(t),t&&delete this.children[i[s]];this.elem&&(this.elem.remove(),this.elem=null),t&&delete _e[this.id],this.erase(),this.discarding=!1,e&&e()}erase(){}addChild(t){return t.isComponent||(t=new v(t)),this.children[t.id]=t,t.parentId=this.id,t}discardChild(t,e){if(!this.children[t])return;let i=!0;e&&(i=!1),this.children[t].discard(i),delete this.children[t],delete _e[t]}addListener(t){let{id:e,target:i,type:s,fn:a}=t;if(!s||!a)throw te.error("Could not add listener, type, and/or fn missing."),new Error("Call stack");if(e||(e=this.id,t.id=e),!i){if(i===null)throw te.error("Could not add listener, target elem was given but is null."),new Error("Call stack");i=this.elem,t.target=i}this.listeners[e]&&this.removeListener(e),i&&(i.addEventListener(s,a),this.listeners[e]=t)}addListeners(){}registerListeners(){const t=this.defineListeners();for(let e=0;e<t.length;e++)this.addListener(t[e])}removeListener(t){if(!t)throw te.error("Could not remove listener, id missing."),new Error("Call stack");const{target:e,type:i,fn:s}=this.listeners[t];e.removeEventListener(i,s),delete this.listeners[t]}_templateId(t,e){if(!t.includes(`id="${e.id}"`)&&!t.includes(`id='${e.id}'`)&&!t.includes(`id=${e.id}`)){t=t.trim();const i=t.split(">");i[0]=i[0].trim(),i[0]+=` id="${e.id}"`,t=i.join(">")}return t}_setElemData(t,e){if(!!t){if(e.class&&(typeof e.class=="string"||e.class instanceof String?t.classList.add(e.class):t.classList.add(...e.class)),e.attributes){const i=Object.keys(e.attributes);for(let s=0;s<i.length;s++)t.setAttribute(i[s],e.attributes[i[s]])}if(e.style){const i=Object.keys(e.style);for(let s=0;s<i.length;s++)t.style[i[s]]=e.style[i[s]]}e.text&&(t.innerText=e.text),e.html&&(t.innerHTML=e.html),e.appendHtml&&(t.innerHTML+=e.appendHtml)}}_createDefaultTemplate(t,e){const i=e&&e.tag?e.tag:!1;return i?`<${i} id="${t}"></${i}>`:`<div id="${t}"></div>`}}const W={};class Ke{constructor(t){this.initState=t,this.state=t||{},this.listeners=[],this.listenerCallbacks=[]}set(t,e,i,s){if(!t)return;const a=t.split(".");let n;if(a.length===1){if(s){W[t]=e;return}n=this.state[a[a.length-1]],this.state[t]=e,this._checkListeners(n,e,t);return}let o=s?W[a[0]]:this.state[a[0]];o===void 0&&(s?W[a[0]]=o={}:this.state[a[0]]=o={});for(let l=1;l<a.length-1;l++)o[a[l]]===void 0&&(o[a[l]]={}),o=o[a[l]];s?o[a[a.length-1]]=e:(n=o[a[a.length-1]],o[a[a.length-1]]=e,this._checkListeners(n,e,t)),i&&!s&&this.addListener(t,i)}get(t,e){if(!t)return;const i=t.split(".");if(i.length===1)return e?W[t]:this.state[t];let s=e?W[i[0]]:this.state[i[0]];for(let a=1;a<i.length;a++){if(s===void 0||s[i[a]]===void 0)return;s=s[i[a]]}return s}remove(t,e){if(!t)return;e||this.removeListener(t);const i=t.split(".");if(i.length===1){if(e){if(W[t]===void 0)return;delete W[t];return}if(this.state[t]===void 0)return;delete this.state[t];return}let s=e?W[i[0]]:this.state[i[0]];for(let a=1;a<i.length-1;a++){if(s===void 0||s[i[a]]===void 0)return;s=s[i[a]]}s!==void 0&&delete s[i[i.length-1]]}getObject(){return this.state}addListener(t,e){this.listeners.push(t),this.listenerCallbacks.push(e)}removeListener(t){const e=this.listeners.indexOf(t);e>-1&&(this.listeners.splice(e,1),this.listenerCallbacks.splice(e,1))}_checkListeners(t,e,i){if(t===e)return;const s=this.listeners.indexOf(i);s>-1&&this.listenerCallbacks[s](e,t)}getKeys(t){if(!t)return Object.keys(this.state);const e=t.split(".");let i=this.state[e[0]];for(let s=1;s<e.length-1;s++){if(i===void 0||i[e[s]]===void 0)return;i=i[e[s]]}return i===void 0?[]:Object.keys(i)}getG(t){return this.get(t,!0)}getGObject(){return W}setG(t,e){this.set(t,e,null,!0)}removeG(t){this.remove(t,!0)}}var $s='<div id="bbar"></div>';class se extends v{constructor(e){super(e);c(this,"addListeners",()=>{this.addListener({id:this.id+"-listener",type:"click",fn:this.click})});c(this,"paint",e=>{this.Router.isCurrent(e.link)?(setTimeout(()=>{this.elem&&this.elem.classList.add("current")},50),this.isCurrent=!0):(setTimeout(()=>{this.elem&&this.elem.classList.remove("current")},50),this.isCurrent=!1)});c(this,"click",e=>{e.preventDefault(),!(this.isCurrent&&!this.data.bypassCurrentCheck)&&this.Router.changeRoute(this.data.link,{forceUpdate:!0})});this.isCurrent=!1;let i="button";e.tag&&(i=e.tag),this.template=`<${i}></${i}>`}}const Bs={username:{en:"Username",fi:"K\xE4ytt\xE4j\xE4nimi"},password:{en:"Password",fi:"Salasana"},password_again:{en:"Password again",fi:"Salasana uudestaan"},passwords_dont_match:{en:"Password's don't match",fi:"Salasanat eiv\xE4t t\xE4sm\xE4\xE4"},email:{en:"E-mail",fi:"S\xE4hk\xF6posti"},email_not_valid:{en:"E-mail is not valid",fi:"S\xE4hk\xF6posti ei ole oikea"},username_taken:{en:"Username is already taken",fi:"K\xE4ytt\xE4j\xE4nimi on jo k\xE4yt\xF6ss\xE4"},email_taken:{en:"Email is already taken",fi:"S\xE4hk\xF6posti on jo k\xE4yt\xF6ss\xE4"},name:{en:"Name",fi:"Nimi"},user_level:{en:"User level",fi:"K\xE4ytt\xE4j\xE4taso"},created:{en:"Created",fi:"Luotu"},edited:{en:"Edited",fi:"Muokattu"},date:{en:"Date",fi:"P\xE4iv\xE4ys"},description:{en:"Description",fi:"Kuvaus"},required:{en:"Required",fi:"Vaadittu kentt\xE4"},select:{en:"Select",fi:"Valitse"},submit:{en:"Submit",fi:"L\xE4het\xE4"},save:{en:"Save",fi:"Tallenna"},minimum_x_characters:{en:"Minimum $[0] characters",fi:"V\xE4hint\xE4\xE4n $[0] merkki\xE4"},username_invalid_characters:{en:"Only letters and numbers allowed (no spaces)",fi:"Vain kirjaimet ja numerot sallittu (ei v\xE4lily\xF6ntej\xE4)"},field_has_invalid_characters:{en:"Field has invalid characters",fi:"Kent\xE4ss\xE4 on ei-sallittuja merkkej\xE4"},login_remember_me:{en:"Remember me",fi:"Muista minut"},login:{en:"Login",fi:"Kirjaudu"},login_error_empty:{en:"Please provide username and password.",fi:"Sy\xF6t\xE4 k\xE4ytt\xE4j\xE4nimi ja salasana."},login_error_wrong:{en:"Wrong username and/or password.",fi:"V\xE4\xE4r\xE4 k\xE4ytt\xE4j\xE4nimi ja/tai salasana."},form_has_errors:{en:"Form has errors.",fi:"Kentiss\xE4 on virheit\xE4."},form_sent:{en:"Form sent.",fi:"Lomake l\xE4hetetty."},create_new_user_button:{en:"Create User",fi:"Luo k\xE4ytt\xE4j\xE4"},route_title_landing:{en:"Home",fi:"Koti"},route_title_login:{en:"Login",fi:"Kirjaudu"},route_title_404:{en:"404",fi:"404"},route_title_401:{en:"401",fi:"401"},route_title_new_user:{en:"New User",fi:"Uusi k\xE4ytt\xE4j\xE4"},route_title_settings:{en:"Settings",fi:"Asetukset"},route_title_user:{en:"User",fi:"K\xE4ytt\xE4j\xE4"},route_test_form_data:{en:"All form data examples",fi:"Kaikki lomake-datan esimerkit"},route_universe:{en:"Universe",fi:"Universumi"},new_user:{en:"New user",fi:"Uusi k\xE4ytt\xE4j\xE4"},register_new_user:{en:"Register a new user",fi:"Rekister\xF6i uusi k\xE4ytt\xE4j\xE4"},new_user_registered:{en:"New user registered.",fi:"Uusi k\xE4ytt\xE4j\xE4 rekister\xF6ity."},form_submit_error:{en:"Form could not been sent due to an error. Please reload the app or contact support.",fi:"Lomakkeen l\xE4hetys ep\xE4onnistui virheen takia. Lataa applikaatio uudelleen tai ota yhteytt\xE4 tukeen."},could_not_get_form_data:{en:"Form data could not be retrieved due to an error. Please reload the app or contact support.",fi:"Lomaketta ei voitu noutaa virheen takia. Lataa applikaatio uudelleen tai ota yhteytt\xE4 tukeen."},could_not_get_data:{en:"Error: could not get data. Try again (reload the app) or contact support.",fi:"Virhe, tietoa ei voitu hakea. Kokeile uudelleen (lataa applikaatio uudelleen) tai ota yhteytt\xE4 tukeen."},close_dialog:{en:"Close dialog",fi:"Sulje ikkuna"},create_new_universe:{en:"Create New Universe",fi:"Luo uusi Universumi"},new_universe_id:{en:"Universe ID",fi:"Universumi-ID"},universe_id_taken:{en:"Universe ID is taken",fi:"Universumi-ID on k\xE4yt\xF6ss\xE4"},unauthorised:{en:"Unauthorised",fi:"Ei oikeuksia"},forbidden:{en:"Forbidden",fi:"Kielletty"},cooldown_login_message:{en:"Too many login attempts. Your account is locked for $[0] minutes.",fi:"Liian monta kirjautumisyrityst\xE4. Tili on lukittu $[0] minuutin ajaksi."},back_to_start:{en:"Back to start..",fi:"Takaisin alkuun.."},error:{en:"Error",fi:"Virhe"},user_not_found:{en:"User was not found.",fi:"K\xE4ytt\xE4j\xE4\xE4 ei l\xF6ytynyt"},public_form:{en:"Public form",fi:"Julkinen lomake"},user_level_9:{en:"9: Super Admin",fi:"9: Super admin"},user_level_8:{en:"8: Administrator",fi:"8: Administraattori"},user_level_2:{en:"2: Basic Beacon User",fi:"2: Beacon-k\xE4ytt\xE4j\xE4"},user_level_1:{en:"1: Basic User",fi:"1: Perusk\xE4ytt\xE4j\xE4"},user_level_0:{en:"0: Not-Logged-In User",fi:"0: Kirjautumaton k\xE4ytt\xE4j\xE4"},"404_default_message":{en:"Sorry, could not locate the address that was asked.",fi:"Pahoittelut, hakemaasi osoitetta ei l\xF6ytynyt"},"404_universe":{en:"Uups, the Universe with the id '$[0]' could not be found.",fi:"Uups, Universumia id:ll\xE4 '$[0]' ei l\xF6ytynyt."},month_jan_long:{en:"January",fi:"Tammikuu"},month_feb_long:{en:"February",fi:"Helmikuu"},month_mar_long:{en:"March",fi:"Maaliskuu"},month_apr_long:{en:"April",fi:"Huhtikuu"},month_may_long:{en:"May",fi:"Toukokuu"},month_jun_long:{en:"June",fi:"Kes\xE4kuu"},month_jul_long:{en:"July",fi:"Hein\xE4kuu"},month_aug_long:{en:"August",fi:"Elokuu"},month_sep_long:{en:"September",fi:"Syyskuu"},month_oct_long:{en:"October",fi:"Lokakuu"},month_nov_long:{en:"November",fi:"Marraskuu"},month_dec_long:{en:"December",fi:"Joulukuu"},month_jan_short:{en:"Jan",fi:"Tammi"},month_feb_short:{en:"Feb",fi:"Helmi"},month_mar_short:{en:"Mar",fi:"Maalis"},month_apr_short:{en:"Apr",fi:"Huhti"},month_may_short:{en:"May",fi:"Touko"},month_jun_short:{en:"Jun",fi:"Kes\xE4"},month_jul_short:{en:"Jul",fi:"Hein\xE4"},month_aug_short:{en:"Aug",fi:"Elo"},month_sep_short:{en:"Sep",fi:"Syys"},month_oct_short:{en:"Oct",fi:"Loka"},month_nov_short:{en:"Nov",fi:"Marras"},month_dec_short:{en:"Dec",fi:"Joulu"},weekday_mon_long:{en:"Monday",fi:"Maanantai"},weekday_tue_long:{en:"Tuesday",fi:"Tiistai"},weekday_wed_long:{en:"Wednesday",fi:"Keskiviikko"},weekday_thu_long:{en:"Thursday",fi:"Torstai"},weekday_fri_long:{en:"Friday",fi:"Perjantai"},weekday_sat_long:{en:"Saturday",fi:"Lauantai"},weekday_sun_long:{en:"Sunday",fi:"Sunnuntai"},weekday_mon_short:{en:"Mon",fi:"Ma"},weekday_tue_short:{en:"Tue",fi:"Ti"},weekday_wed_short:{en:"Wed",fi:"Ke"},weekday_thu_short:{en:"Thu",fi:"To"},weekday_fri_short:{en:"Fri",fi:"Pe"},weekday_sat_short:{en:"Sat",fi:"La"},weekday_sun_short:{en:"Sun",fi:"Su"},order_number_suffix_st:{en:"st",fi:"."},order_number_suffix_nd:{en:"nd",fi:"."},order_number_suffix_rd:{en:"rd",fi:"."},order_number_suffix_th:{en:"th",fi:"."},sort_by:{en:"Sort by",fi:"Lajittele"},table_no_rows_empty_state_text:{en:"No data to show",fi:"Ei tietoa"},total:{en:"Total",fi:"Yhteens\xE4"},showing:{en:"Showing",fi:"N\xE4ytet\xE4\xE4n"},selected:{en:"Selected",fi:"Valittu"},filter:{en:"Filter",fi:"Suodata"},press_enter_to_filter:{en:"Press Enter",fi:"Paina Enter"},filtering_all_columns:{en:"All columns",fi:"Kaikki sarakkeet"},filtering_some_columns:{en:"Some columns",fi:"Jotkut sarakkeet"},match_case:{en:"Match case",fi:"Kirjainkoon tarkistus"},columns_to_filter:{en:"Columns to filter",fi:"Filtter\xF6it\xE4v\xE4t sarakkeet"},minimum_x:{en:"Minimum $[0]",fi:"Minimi $[0]"},maximum_x:{en:"Maximum $[0]",fi:"Maximi $[0]"},delete_user:{en:"Delete user",fi:"Poista k\xE4ytt\xE4j\xE4"},edit_user:{en:"Edit user",fi:"Muokkaa k\xE4ytt\xE4j\xE4\xE4"},delete_user:{en:"Delete user",fi:"Poista k\xE4ytt\xE4j\xE4"},delete_users:{en:"Delete users",fi:"Poista k\xE4ytt\xE4ji\xE4"},delete_single_user_confirmation:{en:"Are you sure you want to delete user '$[0]'? This cannot be undone.",fi:"Oletko varma, ett\xE4 haluat poistaa k\xE4ytt\xE4j\xE4n '$[0]'? T\xE4t\xE4 toimintoa ei voi perua."},delete_many_users_confirmation:{en:"Are you sure you want to delete these users? This cannot be undone. Users:",fi:"Oleto varma, ett\xE4 haluat poistaa n\xE4m\xE4 k\xE4ytt\xE4j\xE4t? T\xE4t\xE4 toimintoa ei voi perua. K\xE4ytt\xE4j\xE4t:"},cancel:{en:"Cancel",fi:"Peruuta"},confirm:{en:"Confirm",fi:"Vahvista"},edit:{en:"Edit",fi:"Muokkaa"},delete:{en:"Delete",fi:"Poista"},del:{en:"Del",fi:"Del"},user_not_found_error:{en:"- User '$[0]' was not found",fi:"- K\xE4ytt\xE4j\xE4\xE4 '$[0]' ei l\xF6ytynyt"},not_allowed_to_delete_user_error:{en:"- You are not allowed to delete user: $[0]",fi:"- Sinulla ei ole lupaa poistaa k\xE4ytt\xE4j\xE4\xE4: $[0]"},changes_will_be_lost_prompt:{en:"You will lose all the changes you made in the dialog. Do you want to continue?",fi:"Menet\xE4t kaikki muokkaukset, jotka teit t\xE4h\xE4n dialogiin. Haluatko jatkaa?"},user:{en:"User",fi:"K\xE4ytt\xE4j\xE4"},last_edited:{en:"Last edited",fi:"Viimeksi muokattu"},on:{en:"On",fi:"P\xE4\xE4ll\xE4"},off:{en:"Off",fi:"Ei p\xE4\xE4ll\xE4"},edit_setting:{en:"Edit setting",fi:"Muokkaa asetusta"},max_login_attempts:{en:"Max login attempts",fi:"Max kirjautumisyrityksi\xE4"},max_login_attempts_desc:{en:"Maximum number of login attempts before the account is locked for a length of the cooldown period.",fi:"Maksimi m\xE4\xE4r\xE4 kirjautumisyrityksi\xE4 ennen kuin tili lukitaan j\xE4\xE4hdyttelyjakson ajaksi."},login_cooldown_time:{en:"Login cooldown time",fi:"Kirjautumisen j\xE4\xE4hdyttelyjakson aika"},login_cooldown_time_desc:{en:"The time (in minutes) to for the user to cooldown after too many unsuccessful login attempts.",fi:"J\xE4\xE4hdyttelyjakso (minuuteissa), jonka k\xE4ytt\xE4j\xE4 joutuu odottamaan liian monen ep\xE4onnistuneen kirjatutumisyrityksen j\xE4lkeen."},session:{en:"Session",fi:"Sessio"},session_age:{en:"Session age",fi:"Session ik\xE4"},session_age_desc:{en:"User session age in minutes. This means that when the user has been idle for this amount, the user is then logged out.",fi:"K\xE4ytt\xE4j\xE4n session ik\xE4 minuutteina. T\xE4m\xE4 tarkoittaa sit\xE4, ett\xE4 jos k\xE4ytt\xE4j\xE4 on ollut tekem\xE4tt\xE4 mit\xE4\xE4n n\xE4in kauan, h\xE4net kirjataan ulos."},remember_me_session_age:{en:'"Remember me" session age',fi:'"Muista minut" session ik\xE4'},remember_me_session_age_desc:{en:'User session age in minutes, when the "Remember me" chechbox has been ticked. This means that when the user has been idle for this amount, he is then logged out. Should be longer than the regular session age.',fi:'K\xE4ytt\xE4j\xE4n session ik\xE4 minuutteina, kun "Muista minut" kohta on valittu kirjautumisessa. T\xE4m\xE4 tarkoittaa sit\xE4, ett\xE4 jos k\xE4ytt\xE4j\xE4 on ollut tekem\xE4tt\xE4 mit\xE4\xE4n n\xE4in kauan, h\xE4net kirjataan ulos. T\xE4m\xE4n tulisi olla pidempi kuin normaalin session ik\xE4.'},registration:{en:"Registration",fi:"Rekister\xF6inti"},public_user_registration:{en:"Public user registration",fi:"Julkinen k\xE4ytt\xE4j\xE4n rekister\xF6inti"},public_user_registration_desc:{en:"Whether or not public users have access to register themselves as new users.",fi:"Pystyv\xE4tk\xF6 julkiset k\xE4ytt\xE4j\xE4t rekister\xF6im\xE4\xE4n itselleen tilin."},user_level_required_to_register:{en:"User level required to register a new user",fi:"K\xE4ytt\xE4j\xE4rekister\xF6intiin vaadittu k\xE4ytt\xE4j\xE4taso"},user_level_required_to_register_desc:{en:"The logged in user's level needed to register new users. Should be at least the same as the level for viewing/editing users.",fi:"Sis\xE4\xE4nkirjautuneiden k\xE4ytt\xE4jien vaadittu taso uusien k\xE4ytt\xE4jien luomiseen. Tulisi olla sama v\xE4hint\xE4\xE4n sama kuin k\xE4ytt\xE4jien katseluun/muokkaamiseen vaadittu taso."},logs:{en:"Logs",fi:"Logit"},max_login_logs:{en:"Max login logs",fi:"Max kirjautumis-log\xEDa"},max_login_logs_desc:{en:"The amount to store of the latest login logs per user.",fi:"Kuinka monta viimeisint\xE4 kirjautumis-logia s\xE4ilytet\xE4\xE4n."},max_edited_logs:{en:"Max edited logs",fi:"Max editointi-logia"},max_edited_logs_desc:{en:"The amount to store of the latest edited logs per document.",fi:"Kuinka monta viimeisint\xE4 editointi-logia s\xE4ilytet\xE4\xE4n."},table_sorting_memory:{en:"Table sorting and filter remembering",fi:"Taulukon j\xE4rjestely ja filtter\xF6inti muistaminen"},table_sorting_memory_desc:{en:"Whether or not the table sorting and filtering values should be remembered for a single table, and how long they should be remembered.",fi:"Tulisiko yksitt\xE4isen taulukon muistaa j\xE4rjestely- ja filtter\xF6inti-arvot ja kuinka pitk\xE4\xE4n."},none:{en:"None",fi:"Ei tallenneta"},save_for_this_session:{en:"Save for this session",fi:"Tallenna t\xE4lle sessiolle"},save_for_this_browser:{en:"Save for this browser",fi:"Tallenna t\xE4lle selaimelle"},my_settings:{en:"My settings",fi:"Omat asetukset"},my_profile:{en:"My profile",fi:"Oma profiili"},tables:{en:"Tables",fi:"Taulukot"},users:{en:"Users",fi:"K\xE4ytt\xE4j\xE4t"},admin_settings:{en:"Admin settings",fi:"Admin-asetukset"},edited_by:{en:"Edited by",fi:"Muokkaaja"},last_logins:{en:"Last logins",fi:"Viimeiset kirjautumiset"},profile_exposure:{en:"Profile data exposure",fi:"Profiilin tietojen julkisuus"},view_right_0:{en:"Public can see this",fi:"Julkinen tieto"},view_right_1:{en:"Authenticated can see this",fi:"Kirjautuneet n\xE4kev\xE4t tiedon"},view_right_2:{en:"Hidden",fi:"Piilotettu tieto"},edit_expose_profile_form_desc:{en:"Set the profile fields' exposure levels. Be careful what you set public.",fi:"Aseta profiilin kenttien julkisuus-taso. Ole varovainen, mit\xE4 asetat julkiseksi."},user_profiles:{en:"User profiles",fi:"K\xE4ytt\xE4j\xE4profiilit"},users_can_set_exposure_levels:{en:"Users can set exposure levels",fi:"K\xE4ytt\xE4j\xE4t voivat asettaa kenttiens\xE4 julkisuustason"},users_can_set_exposure_levels_desc:{en:"Whether users can themselves set the desired field exposure levels for their fields (fields are defined in the exposure form, admins can change).",fi:"Pystyv\xE4tk\xF6 k\xE4ytt\xE4j\xE4t itse vaihtamaan kenttiens\xE4 julkisuustason (kent\xE4t m\xE4\xE4ritell\xE4\xE4n julkisuus-lomakkeessa, adminit voivat s\xE4\xE4t\xE4\xE4)."},use_users_exposure_levels:{en:"Use users' own exposure levels",fi:"K\xE4yt\xE4 k\xE4ytt\xE4jien omia julkisuustasoja"},use_users_exposure_levels_desc:{en:"If users cannot set their own exposure levels, the users' own exposure levels can still be used if this setting is on. Admins can set these. This setting does not have any affect if users can set their own exposure levels.",fi:"Jos k\xE4ytt\xE4j\xE4t eiv\xE4t saa asettaa omia julkisuustasojaan, k\xE4ytt\xE4jien omia julkisuustasoja voidaan kuitenkin k\xE4ytt\xE4\xE4, jos t\xE4m\xE4 asetus on p\xE4\xE4ll\xE4. Adminit voivat asettaa n\xE4it\xE4. T\xE4ll\xE4 asetuksella ei ole mit\xE4\xE4n vaikutusta, jos k\xE4ytt\xE4j\xE4t voivat asettaa omat julkisuustasonsa."},exposure:{en:"Exposure",fi:"Julkisuus"},delete_profile_warning_text:{en:"Are you absolutely sure you want to delete your account? This cannot be undone!",fi:"Oletko aivan varma, ett\xE4 haluat poistaa tilisi? T\xE4t\xE4 toimintoa ei voi perua!"},wrong_password:{en:"Wrong password",fi:"V\xE4\xE4r\xE4 salasana"},this_user_cannot_be_deleted:{en:"This user cannot be deleted",fi:"T\xE4t\xE4 k\xE4ytt\xE4j\xE4\xE4 ei voi poistaa"},change_password:{en:"Change password",fi:"Vaihda salasana"},current_password:{en:"Current password",fi:"Nykyinen salasana"},current_password_again:{en:"Current password again",fi:"Nykyinen salasana uudestaan"},new_password:{en:"New password",fi:"Uusi salasana"},new_password_again:{en:"New password again",fi:"Uusi salasana uudestaan"},request:{en:"Request",fi:"Pyyd\xE4"},request_new_password_link:{en:'Request a "reset password" link',fi:'Pyyd\xE4 "vaihda salasana" linkki\xE4'},forgot_password:{en:"Forgot password",fi:"Unohdin salasanan"},request_new_password_link_processed_msg:{en:`Your request has been sent. Check your E-mail. If the E-mail matches one of our accounts, you will receive the link to update your password. 

 If you do not receive a link, it could also be because you have just requested one and you have to wait awhile before asking for a new one.`,fi:`Pyynt\xF6si on l\xE4hetetty. Tarkista s\xE4hk\xF6postisi. Jos t\xE4m\xE4 s\xE4hk\xF6posti l\xF6ytyy j\xE4rjestelm\xE4st\xE4mme, saat viestin, josta p\xE4\xE4set p\xE4ivitt\xE4m\xE4\xE4n salasanasi. 

 Jos et saa linkki\xE4, se voi my\xF6s johtua siit\xE4, ett\xE4 olet juuri pyyt\xE4nyt sit\xE4 ja joudut odottaamaan hetken ennenkuin voit tilata uuden linkin.`},new_pass_link_lifetime:{en:'"Reset password" link lifetime',fi:'"Vaihda salasana" -linkin elinaika'},forgot_password_feature:{en:'"Forgot password" feature',fi:'"Unohdin salasanan" -ominaisuus'},forgot_password_feature_desc:{en:'Whether the "Forgot password" feature can be used or not.',fi:'Pystyv\xE4tk\xF6 k\xE4ytt\xE4j\xE4t k\xE4ytt\xE4m\xE4\xE4n "Unohdin salasanan" -ominaisuutta vai eiv\xE4t?'},new_pass_link_lifetime_desc:{en:'The lifetime / expiration time of a "reset password" link in minutes.',fi:'"Vaihda salasana" -linkin elinaika minuuteissa.'},invalid_or_expired_token:{en:"The link token provided is either invalid or expired.",fi:"Linkki on joko vanhentunut tai v\xE4\xE4r\xE4."},password_has_been_changed:{en:"Password has been changed.",fi:"Salasana on vaihdettu."},email_sending:{en:"E-mail sending",fi:"S\xE4hk\xF6postin l\xE4hetys"},email_sending_desc:{en:"Whether the system can send E-mails for new users, password renewals, etc. The system will still act as if the E-mail had been sent, so no warning / error will be displayed when this is turned off.",fi:"L\xE4hett\xE4\xE4k\xF6 j\xE4rjestelm\xE4 ollenkaan s\xE4hk\xF6posteja uusille k\xE4ytt\xE4jille, salasanan uusimiseen jne. J\xE4rjestelm\xE4 k\xE4ytt\xE4ytyy kuin se l\xE4hett\xE4isi s\xE4hk\xF6postia, joten mit\xE4\xE4n varoitusta / virheviesti\xE4 ei n\xE4ytet\xE4 jos t\xE4m\xE4 asetus on pois p\xE4\xE4lt\xE4."},email_host:{en:"E-mail host",fi:"S\xE4hk\xF6postin host"},email_host_desc:{en:"The E-mail service's host address. For example: 'smtp-mail.domain.com'. If no host is provided (save as empty), Beacon will try to use the EMAIL_HOST environment variable.",fi:"S\xE4hk\xF6postipalvelun host-osoite. Esimerkiksi: 'smtp-mail.domain.com'. Jos host-osoitetta ei m\xE4\xE4ritell\xE4 (tallenna tyhj\xE4n\xE4), Beacon yritt\xE4\xE4 k\xE4ytt\xE4\xE4 EMAIL_HOST -nimist\xE4 ymp\xE4rist\xF6-muuttujaa."},email_username:{en:"E-mail username",fi:"S\xE4hk\xF6postin k\xE4ytt\xE4j\xE4nimi"},email_username_desc:{en:"The E-mail service's username. If no username is provided (save as empty), Beacon will try to use the EMAIL_USER environment variable.",fi:"S\xE4hk\xF6postipalvelun k\xE4ytt\xE4j\xE4nimi. Jos k\xE4ytt\xE4j\xE4nime\xE4 ei m\xE4\xE4ritell\xE4 (tallenna tyhj\xE4n\xE4), Beacon yritt\xE4\xE4 k\xE4ytt\xE4\xE4 EMAIL_USER -nimist\xE4 ymp\xE4rist\xF6-muuttujaa."},email_password:{en:"E-mail password",fi:"S\xE4hk\xF6postin salasana"},email_password_desc:{en:"The E-mail service's password. If no password is provided (save as empty), Beacon will try to use the EMAIL_PASS environment variable.",fi:"S\xE4hk\xF6postipalvelun salasana. Jos salasanaa ei m\xE4\xE4ritell\xE4 (tallenna tyhj\xE4n\xE4), Beacon yritt\xE4\xE4 k\xE4ytt\xE4\xE4 EMAIL_PASS -nimist\xE4 ymp\xE4rist\xF6-muuttujaa."},use_email_verification:{en:"Use E-mail verification",fi:"K\xE4yt\xE4 s\xE4hk\xF6posti-vahvistusta"},use_email_verification_desc:{en:"Whether the users should verify their new E-mail addresses or not. If turned on, a verification E-mail is sent to the user when the account is registered and when the E-mail is changed. Also, users can request a new verification E-mail (if unverified) from verification notifications (profile view and after login).",fi:"T\xE4ytyyk\xF6 k\xE4ytt\xE4jien vahvistaa s\xE4hk\xF6postiosoitteensa? Jos asetus on p\xE4\xE4ll\xE4, k\xE4ytt\xE4j\xE4lle l\xE4hetet\xE4\xE4n vahvistus-s\xE4hk\xF6postiviesti kun tili luodaan ja kun s\xE4hk\xF6postiosoite vaihdetaan. K\xE4ytt\xE4j\xE4t voivat my\xF6s tilata uuden vahvistus-s\xE4hk\xF6postin (jos vahvistamaton) vahvistus-notifikaatioista (profiili-n\xE4kym\xE4 ja kirjautumisen j\xE4lkeen)."},verified:{en:"Verified",fi:"Vahvistettu"},unverified:{en:"Unverified",fi:"Vahvistamaton"},new_verification_link:{en:"New verification link",fi:"Uusi vahvistusviesti"},send_new_email_verification_link:{en:"Send a new E-mail verification link",fi:"L\xE4het\xE4 uusi s\xE4hk\xF6postin vahvistuslinkki"},send:{en:"Send",fi:"L\xE4het\xE4"},verify_account:{en:"Verify account",fi:"Vahvista tili"},current_email_in_use_until_new_verified:{en:"Current E-mail in use until the new one has been verified",fi:"Nykyinen s\xE4hk\xF6posti, joka on k\xE4yt\xF6ss\xE4 kunnes uusi on vahvistettu"},token_not_valid_or_outdated:{en:"The token is not valid or it is outdated.",fi:"Linkki ei ole validi tai se on vanhentunut."},thank_you_username:{en:"Thank you, $[0]",fi:"Kiitos, $[0]"},email_and_account_verified:{en:"Your E-mail and account has been verified.",fi:"S\xE4hk\xF6postiosoitteesi ja tilisi on nyt vahvistettu."},new_verification_form_description:{en:"By clicking Send, you will be E-mailed a new verification link for your E-mail and account.",fi:"Painamalla L\xE4het\xE4, saat uuden s\xE4hk\xF6postin ja tilin vahvistus-linkin s\xE4hk\xF6postiisi."},verification_needed:{en:"Verification needed",fi:"Tilin vahvistus vaaditaan"},verification_needed_body:{en:"Your account needs to be verified before it can be used. Check your E-mail. You have received a verification E-mail. You can also request a new verification E-mail or change your E-mail address.",fi:"Vahvista tilisi ennen kuin voit k\xE4ytt\xE4\xE4 sit\xE4. Tarkista s\xE4hk\xF6postisi. Olet saanut vahvistus-s\xE4hk\xF6postiviestin. Voit my\xF6s pyyt\xE4\xE4 uuden vahvistusviestin tai vaihtaa s\xE4hk\xF6postiosoitteesi."},two_factor_authentication:{en:"2-factor authentication (2FA)",fi:"Kaksivaiheinen tunnistautuminen (2FA)"},two_factor_authentication_desc:{en:"Enable 2-factor authentication either as always or as an option for user's to choose it. 2FA requires E-mail sending and E-mail verification to be set on.",fi:"Aseta kaksivaiheinen tunnistautuminen p\xE4\xE4lle koko ajaksi kaikille tai aseta se k\xE4ytt\xE4jien m\xE4\xE4ritelt\xE4v\xE4ksi. 2FA vaatii s\xE4hk\xF6postien l\xE4hetyksen ja s\xE4hk\xF6postivahvistuksen p\xE4\xE4llelaittamisen."},disabled:{en:"Disabled",fi:"Pois k\xE4yt\xF6st\xE4"},enabled_always:{en:"Enabled always",fi:"Aina p\xE4\xE4ll\xE4"},users_can_choose:{en:"Users can choose",fi:"K\xE4ytt\xE4j\xE4t voivat valita"},two_factor_code_lifetime:{en:"2FA code lifetime",fi:"2FA-koodin elinik\xE4"},two_factor_code_lifetime_desc:{en:"This setting determines how long a 2-factor authentication code is valid for (in minutes).",fi:"T\xE4m\xE4 asetus m\xE4\xE4ritt\xE4\xE4 kuinka kauan yksi kaksivaiheisen autentikaation koodi on voimassa (elinik\xE4 minuuteissa)."},security:{en:"Security",fi:"Tietoturva"},user_two_factor_authentication_desc:{en:"Enable 2-factor authentication for your user account. It enhances the security of your account. Your E-mail needs to be verified for 2FA to work.",fi:"Aseta kaksivaiheinen tunnistautuminen p\xE4\xE4lle tilillesi. Se parantaa tilisi tietoturvaa. S\xE4hk\xF6postiosoitteesi tulee olla vahvistettu, jotta 2FA toimii."},route_title_twofa_login:{en:"Provide two-factor-authentication code",fi:"Anna kaksivaiheisen tunnistautumisen koodi"},code:{en:"Code",fi:"Koodi"},login_twofa_description:{en:"Check your E-mail. The 2FA code has been E-mailed to you.",fi:"Tarkista s\xE4hk\xF6postisi. 2FA-koodi on l\xE4hetetty sinulle."},login_twofa_error_empty:{en:"Please provide the 2FA code.",fi:"Sy\xF6t\xE4 2FA-koodi."},login_twofa_error_wrong:{en:"The 2FA code is either incorrect or expired.",fi:"Annettu 2FA-koodi on joko v\xE4\xE4r\xE4 tai poistunut k\xE4yt\xF6st\xE4."},profile_saved:{en:"Profile saved",fi:"Profiili tallennettu"},profile_password_changed:{en:"Profile password changed",fi:"Profiili salasana vaihdettu"},profile_exposure_changed:{en:"Profile exposure changed",fi:"Profiilin julkisuus muutettu"},profile_deleted:{en:"Profile has been deleted",fi:"Profiili on poistettu"},setting_updated:{en:"Setting updated",fi:"Asetus p\xE4ivitetty"},you_are_now_logged_out:{en:"You are now logged out",fi:"Olet nyt kirjautunut ulos"},you_are_now_logged_in:{en:"You are now logged in",fi:"Olet nyt kirjautunut sis\xE4\xE4n"},user_updated:{en:"User updated",fi:"K\xE4ytt\xE4j\xE4 p\xE4ivitetty"},user_deleted:{en:"User deleted",fi:"K\xE4ytt\xE4j\xE4 poistettu"},users_deleted:{en:"Users deleted",fi:"K\xE4ytt\xE4j\xE4t poistettu"},select_one_or_more_users:{en:"Select one or more users",fi:"Valitse yksi tai useampi k\xE4ytt\xE4j\xE4"},email_sent:{en:"E-mail sent",fi:"S\xE4hk\xF6posti l\xE4hetetty"}},F={username:{minLength:5},name:{minLength:0,required:!1},email:{required:!0},password:{minLength:6,saltRounds:10}},js={langs:["en"],titlePrefix:"",titleSuffix:" | Beacon",bbarSize:64},Os=[{path:"/",formId:"route-landing",useRightsLevel:2,editorRightsLevel:8},{path:"/login",formId:"route-login",useRightsLevel:0,editorRightsLevel:8},{path:"/login/two",formId:"route-twofa-login",useRightsLevel:0,editorRightsLevel:8},{path:"/uni/:universeId",formId:"route-universe",useRightsLevel:2,editorRightsLevel:8},{path:"/newuser",formId:"route-new-user",useRightsLevel:0,editorRightsLevel:8},{path:"/u/newpassrequest",formId:"route-new-pass-request",useRightsLevel:0,editorRightsLevel:8},{path:"/u/newpass",formId:"route-new-pass",useRightsLevel:0,editorRightsLevel:8},{path:"/u/verify/:token",formId:"route-verify",useRightsLevel:0,editorRightsLevel:8},{path:"/u/verificationneeded",formId:"route-verifyneeded",useRightsLevel:2,editorRightsLevel:8},{path:"/user/:user",formId:"route-one-user",useRightsLevel:0,editorRightsLevel:8},{path:"/settings",formId:"route-settings",useRightsLevel:2,editorRightsLevel:8},{path:"/settings/my-profile",formId:"route-settings-my-profile",useRightsLevel:2,editorRightsLevel:8},{path:"/settings/my-settings",formId:"route-settings-my-settings",useRightsLevel:2,editorRightsLevel:8},{path:"/settings/users",formId:"route-settings-users",useRightsLevel:8,editorRightsLevel:9},{path:"/settings/admin-settings",formId:"route-settings-admin-settings",useRightsLevel:8,editorRightsLevel:9},{path:"/settings/users",formId:"route-settings-users",useRightsLevel:8,editorRightsLevel:9},{path:"/404",formId:"route-four-o-four",useRightsLevel:0,editorRightsLevel:8,locked:!0},{path:"/401",formId:"route-four-o-one",useRightsLevel:0,editorRightsLevel:8,locked:!0}],Us=[{userLevel:9,labelId:"user_level_9"},{userLevel:8,labelId:"user_level_8"},{userLevel:2,labelId:"user_level_2"},{userLevel:1,labelId:"user_level_1"},{userLevel:0,labelId:"user_level_0"}];var qs={USER:F,UI:js,ROUTE_ACCESS:Os,USER_LEVELS:Us};const Ns=r=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r),Vs=r=>/^[a-zA-Z0-9-_]+$/.test(r),Hs=(r,t)=>t?r.replace(g,"/"):r.replace(/\//g,"**"),zs=(r,t)=>{let e="",i="";typeof t=="boolean"||t===void 0?i=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!$&%\u20AC":i=t;const s=i.length;for(let a=0;a<r;a++)e+=i.charAt(Math.floor(Math.random()*s));return e},Gs=()=>new Error().stack.split(`
`)[2].replace("at "),Ws={validateEmail:Ns,validateSimpleId:Vs,urlParamRoute:Hs,createRandomString:zs,thisLine:Gs},Ks={formId:"beacon-main-login",path:"/login",method:"POST",type:"form",useRightsLevel:0,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],editorOptions:{loginAccessLevel:{labelId:"login_access_level",type:"select-user-level",value:2}},form:{onErrorsMsgId:"login_error_empty",formErrors:{error401Id:"login_error_wrong",error403NoShow:!0},showBottomMsg:!1,submitButton:{id:"submit-button",labelId:"login"},submitFields:["username","password","remember-me"],fieldsets:[{id:"main-fieldset-beacon-login",fields:[{type:"textinput",id:"username",labelId:"username",required:!0,maxLength:32,hideMsg:!0},{type:"textinput",id:"password",labelId:"password",required:!0,maxLength:64,password:!0,hideMsg:!0},{type:"checkbox",id:"remember-me",labelId:"login_remember_me"},{type:"divider"}]}]}},Js={formId:"beacon-twofa-login",path:"/login/two",method:"POST",type:"form",useRightsLevel:0,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],editorOptions:{loginAccessLevel:{labelId:"login_access_level",type:"select-user-level",value:2}},form:{formDescId:"login_twofa_description",onErrorsMsgId:"login_twofa_error_empty",formErrors:{error401Id:"login_twofa_error_wrong",error403NoShow:!0},showBottomMsg:!1,submitButton:{id:"submit-button",labelId:"login"},submitFields:["twofacode"],fieldsets:[{id:"main-fieldset-beacon-login-twofa",fields:[{type:"textinput",id:"twofacode",labelId:"code",required:!0,maxLength:6,hideMsg:!0},{type:"divider"}]}]}},Ys={formId:"new-user-form",path:"/users",method:"POST",type:"form",useRightsLevel:0,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],editorOptions:{newUserLevel:{labelId:"new_user_level",type:"select-user-level",value:2}},form:{formTitleId:"register_new_user",onErrorsMsgId:"form_has_errors",afterSubmitMsgId:"new_user_registered",afterSubmitShowOnlyMsg:!0,submitButton:{id:"submit-new-user-button-id",labelId:"create_new_user_button"},submitFields:["username","name","email","password"],fieldsets:[{id:"new-user-main-fs",fields:[{type:"divider"},{type:"textinput",id:"username",labelId:"username",required:!0,minLength:F.username.minLength,maxLength:24,regex:"^[a-zA-Z0-9\xE5\xF6\xE4\xF1\xFC\xE9\xE8\xEA\xE2\xEE\xF4\xFB\u010D\xDF\xE0\xEC\xF2\xF9\xF3\xE7\u0119\u012F\u0173\u0137\u013C\u0146\u0123\xEB\xEF\xF5\u017E\u0161\xE6\xF8\u0117\u0113\u016B\u0101\u012B\xC5\xD6\xC4\xD1\xDC\xC9\xC8\xCA\xC2\xCE\xD4\xDB\u010C\u1E9E\xC0\xCC\xD2\xD9\xD3\xC7\u0118\u012E\u0172\u0136\u013B\u0145\u0122\xCB\xCF\xD5\u017D\u0160\xC6\xD8\u0116\u0112\u016A\u0100\u012A]+$",regexErrorMsgId:"username_invalid_characters"},{type:"textinput",id:"name",labelId:"name",required:F.name.required,minLength:F.name.minLength,maxLength:40,regex:"[a-zA-Z\xE5\xF6\xE4\xF1\xFC\xE9\xE8\xEA\xE2\xEE\xF4\xFB\u010D\xDF\xE0\xEC\xF2\xF9\xF3\xE7\u0119\u012F\u0173\u0137\u013C\u0146\u0123\xEB\xEF\xF5\u017E\u0161\xE6\xF8\u0117\u0113\u016B\u0101\u012B\xC5\xD6\xC4\xD1\xDC\xC9\xC8\xCA\xC2\xCE\xD4\xDB\u010C\u1E9E\xC0\xCC\xD2\xD9\xD3\xC7\u0118\u012E\u0172\u0136\u013B\u0145\u0122\xCB\xCF\xD5\u017D\u0160\xC6\xD8\u0116\u0112\u016A\u0100\u012A]+$",regexErrorMsgId:"field_has_invalid_characters"},{type:"divider"},{type:"textinput",id:"email",labelId:"email",required:F.email.required,maxLength:50,email:!0},{type:"divider"},{type:"textinput",id:"password",labelId:"password",required:!0,minLength:F.password.minLength,maxLength:50,password:!0,validationFn:"validatePass1"},{type:"textinput",id:"password-again",labelId:"password_again",required:!0,minLength:0,maxLength:50,password:!0,validationFn:"validatePass2"},{type:"divider"}]}]}},Xs={formId:"new-universe-form",path:"/universes",method:"POST",type:"form",useRightsLevel:2,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{onErrorsMsgId:"form_has_errors",afterSubmitShowOnlyMsg:!0,submitButton:{id:"submit-new-universe-button",labelId:"create_new_universe"},submitFields:["universeTitle","universeId","universeDescription"],fieldsets:[{id:"main-fieldset-new-uni",fields:[{type:"divider"},{type:"textinput",id:"universeTitle",labelId:"name",required:!0,minLength:1,maxLength:40,regex:"[a-zA-Z\xE5\xF6\xE4\xF1\xFC\xE9\xE8\xEA\xE2\xEE\xF4\xFB\u010D\xDF\xE0\xEC\xF2\xF9\xF3\xE7\u0119\u012F\u0173\u0137\u013C\u0146\u0123\xEB\xEF\xF5\u017E\u0161\xE6\xF8\u0117\u0113\u016B\u0101\u012B\xC5\xD6\xC4\xD1\xDC\xC9\xC8\xCA\xC2\xCE\xD4\xDB\u010C\u1E9E\xC0\xCC\xD2\xD9\xD3\xC7\u0118\u012E\u0172\u0136\u013B\u0145\u0122\xCB\xCF\xD5\u017D\u0160\xC6\xD8\u0116\u0112\u016A\u0100\u012A]+$",regexErrorMsgId:"field_has_invalid_characters"},{type:"divider"},{type:"textinput",id:"universeId",labelId:"new_universe_id",required:!0,minLength:1,maxLength:40,regex:"^[a-zA-Z0-9-_]+$",regexErrorMsgId:"field_has_invalid_characters"},{type:"divider"},{type:"textarea",id:"universeDescription",labelId:"description",maxLength:500},{type:"divider"}]}]}},Zs={formId:"read-users",path:"/users",method:"GET",type:"readapi",useRightsLevel:8,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[]},Qs={formId:"delete-users",path:"/users/delete",method:"POST",type:"form",useRightsLevel:8,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{class:"confirmation-form",afterSubmitShowOnlyMsg:!0,submitButton:{id:"delete-users-button",labelId:"delete",class:"confirm-button--delete"},submitFields:["users"]}},er={formId:"edit-user-form",path:"/users",method:"PUT",type:"form",useRightsLevel:8,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{onErrorsMsgId:"form_has_errors",afterSubmitMsg:"",afterSubmitShowOnlyMsg:!0,submitButton:{id:"submit-edit-user-button-id",labelId:"save",class:"save-button"},submitFields:["userId","name","email","userLevel"],fieldsets:[{id:"edit-user-main-fs",fields:[{type:"divider"},{type:"textinput",id:"username",labelId:"username",disabled:!0},{type:"textinput",id:"name",labelId:"name",required:F.name.required,minLength:F.name.minLength,maxLength:40,regex:"[a-zA-Z\xE5\xF6\xE4\xF1\xFC\xE9\xE8\xEA\xE2\xEE\xF4\xFB\u010D\xDF\xE0\xEC\xF2\xF9\xF3\xE7\u0119\u012F\u0173\u0137\u013C\u0146\u0123\xEB\xEF\xF5\u017E\u0161\xE6\xF8\u0117\u0113\u016B\u0101\u012B\xC5\xD6\xC4\xD1\xDC\xC9\xC8\xCA\xC2\xCE\xD4\xDB\u010C\u1E9E\xC0\xCC\xD2\xD9\xD3\xC7\u0118\u012E\u0172\u0136\u013B\u0145\u0122\xCB\xCF\xD5\u017D\u0160\xC6\xD8\u0116\u0112\u016A\u0100\u012A]+$",regexErrorMsgId:"field_has_invalid_characters"},{type:"divider"},{type:"textinput",id:"email",labelId:"email",required:F.email.required,maxLength:50,email:!0},{type:"divider"},{type:"dropdown",id:"userLevel",labelId:"user_level",required:!0,getOptionsFn:"userLevels",minValue:1,maxValue:8},{type:"divider"}]}]}},tr={formId:"read-one-user",path:"/users/:userid",method:"GET",type:"readapi",useRightsLevel:0,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[]},ir={formId:"admin-settings-form",path:"/settings/admin",method:"PUT",type:"form",useRightsLevel:8,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:9,editorRightsUsers:[],editorRightsGroups:[],form:{onErrorsMsgId:"form_has_errors",afterSubmitMsg:"",afterSubmitShowOnlyMsg:!0,singleEdit:!0,submitButton:{id:"submit-admin-settings-button-id",labelId:"save",class:"save-button"},submitFields:["max-login-attempts","login-cooldown-time","session-age","public-user-registration","user-registration-level","user-level-required-to-register","max-login-logs","max-edited-logs","users-can-set-exposure-levels","use-users-exposure-levels","forgot-password-feature","new-pass-link-lifetime","email-sending","email-host","email-username","email-password","use-email-verification","use-two-factor-authentication","two-factor-code-lifetime"],fieldsets:[{id:"admin-settings-login-fs",fieldsetTitleId:"login",fields:[{type:"textinput",id:"max-login-attempts",labelId:"max_login_attempts",descriptionId:"max_login_attempts_desc",defaultValue:5,required:!0,regex:"[0-9]+$",settingType:"integer",settingReadRight:0},{type:"textinput",id:"login-cooldown-time",labelId:"login_cooldown_time",descriptionId:"login_cooldown_time_desc",defaultValue:15,required:!0,settingType:"integer",regex:"[0-9]+$"}]},{id:"admin-settings-session-fs",fieldsetTitleId:"session",fields:[{type:"textinput",id:"session-age",labelId:"session_age",descriptionId:"session_age_desc",defaultValue:60,required:!0,settingType:"integer",regex:"[0-9]+$"},{type:"textinput",id:"remember-me-session-age",labelId:"remember_me_session_age",descriptionId:"remember_me_session_age_desc",defaultValue:10080,required:!0,settingType:"integer",regex:"[0-9]+$"}]},{id:"admin-settings-registration-fs",fieldsetTitleId:"registration",fields:[{type:"checkbox",id:"public-user-registration",labelId:"public_user_registration",descriptionId:"public_user_registration_desc",defaultValue:!0,settingType:"boolean"},{type:"dropdown",id:"user-level-required-to-register",labelId:"user_level_required_to_register",descriptionId:"user_level_required_to_register_desc",defaultValue:8,settingType:"integer",getOptionsFn:"userLevelsWithNine",minValue:1,maxValue:9}]},{id:"admin-settings-logs-fs",fieldsetTitleId:"logs",fields:[{type:"textinput",id:"max-login-logs",labelId:"max_login_logs",descriptionId:"max_login_logs_desc",defaultValue:10,required:!0,settingType:"integer",regex:"[0-9]+$"},{type:"textinput",id:"max-edited-logs",labelId:"max_edited_logs",descriptionId:"max_edited_logs_desc",defaultValue:10,required:!0,settingType:"integer",regex:"[0-9]+$"}]},{id:"admin-settings-user-profiles-fs",fieldsetTitleId:"user_profiles",fields:[{type:"checkbox",id:"users-can-set-exposure-levels",labelId:"users_can_set_exposure_levels",descriptionId:"users_can_set_exposure_levels_desc",defaultValue:!0,settingType:"boolean"},{type:"checkbox",id:"use-users-exposure-levels",labelId:"use_users_exposure_levels",descriptionId:"use_users_exposure_levels_desc",defaultValue:!0,settingType:"boolean"},{type:"checkbox",id:"forgot-password-feature",labelId:"forgot_password_feature",descriptionId:"forgot_password_feature_desc",defaultValue:!0,settingType:"boolean"},{type:"textinput",id:"new-pass-link-lifetime",labelId:"new_pass_link_lifetime",descriptionId:"new_pass_link_lifetime_desc",defaultValue:20,required:!0,settingType:"integer",regex:"[0-9]+$"},{type:"checkbox",id:"use-email-verification",labelId:"use_email_verification",descriptionId:"use_email_verification_desc",defaultValue:!0,settingType:"boolean"},{type:"dropdown",id:"use-two-factor-authentication",labelId:"two_factor_authentication",descriptionId:"two_factor_authentication_desc",defaultValue:"disabled",settingType:"string",options:[{value:"disabled",labelId:"disabled"},{value:"enabled_always",labelId:"enabled_always"},{value:"users_can_choose",labelId:"users_can_choose"}]},{type:"textinput",id:"two-factor-code-lifetime",labelId:"two_factor_code_lifetime",descriptionId:"two_factor_code_lifetime_desc",defaultValue:10,required:!0,settingType:"integer",regex:"[0-9]+$"}]},{id:"admin-settings-email-fs",fieldsetTitleId:"email",fields:[{type:"checkbox",id:"email-sending",labelId:"email_sending",descriptionId:"email_sending_desc",defaultValue:!0,settingType:"boolean"},{type:"textinput",id:"email-host",labelId:"email_host",descriptionId:"email_host_desc",settingType:"string",defaultValue:""},{type:"textinput",id:"email-username",labelId:"email_username",descriptionId:"email_username_desc",settingType:"string",defaultValue:""},{type:"textinput",id:"email-password",password:!0,labelId:"email_password",descriptionId:"email_password_desc",settingType:"password",defaultValue:""}]}]}},sr={formId:"user-settings-form",path:"/settings",method:"PUT",type:"form",useRightsLevel:2,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{onErrorsMsgId:"form_has_errors",afterSubmitMsg:"",afterSubmitShowOnlyMsg:!0,singleEdit:!0,submitButton:{id:"submit-user-settings-button-id",labelId:"save",class:"save-button"},submitFields:["table-sorting-setting","enable-user-2fa-setting"],fieldsets:[{id:"user-settings-tables-fs",fieldsetTitleId:"tables",fields:[{type:"dropdown",id:"table-sorting-setting",labelId:"table_sorting_memory",descriptionId:"table_sorting_memory_desc",settingType:"string",defaultValue:"none",options:[{value:"none",labelId:"none"},{value:"session",labelId:"save_for_this_session"},{value:"browser",labelId:"save_for_this_browser"}]}]},{id:"user-settings-security-fs",fieldsetTitleId:"security",fields:[{type:"checkbox",id:"enable-user-2fa-setting",labelId:"two_factor_authentication",enabledId:"use-two-factor-authentication",descriptionId:"user_two_factor_authentication_desc",defaultValue:!1,settingType:"boolean"}]}]}},rr={formId:"read-profile",path:"/users/own/profile",method:"GET",type:"readapi",useRightsLevel:1,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[]},ar={formId:"edit-profile-form",path:"/users/own/profile",method:"PUT",type:"form",useRightsLevel:1,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{onErrorsMsgId:"form_has_errors",formErrors:{error401Id:"wrong_password"},showBottomMsg:!1,submitButton:{id:"submit-edit-profile-button-id",labelId:"save",class:"save-button"},submitFields:["name","email","curPassword"],fieldsets:[{id:"edit-user-main-fs",fields:[{type:"divider"},{type:"textinput",id:"username",labelId:"username",disabled:!0},{type:"textinput",id:"name",labelId:"name",required:F.name.required,minLength:F.name.minLength,maxLength:40,regex:"[a-zA-Z\xE5\xF6\xE4\xF1\xFC\xE9\xE8\xEA\xE2\xEE\xF4\xFB\u010D\xDF\xE0\xEC\xF2\xF9\xF3\xE7\u0119\u012F\u0173\u0137\u013C\u0146\u0123\xEB\xEF\xF5\u017E\u0161\xE6\xF8\u0117\u0113\u016B\u0101\u012B\xC5\xD6\xC4\xD1\xDC\xC9\xC8\xCA\xC2\xCE\xD4\xDB\u010C\u1E9E\xC0\xCC\xD2\xD9\xD3\xC7\u0118\u012E\u0172\u0136\u013B\u0145\u0122\xCB\xCF\xD5\u017D\u0160\xC6\xD8\u0116\u0112\u016A\u0100\u012A]+$",regexErrorMsgId:"field_has_invalid_characters"},{type:"divider"},{type:"textinput",id:"email",labelId:"email",required:F.email.required,maxLength:50,email:!0},{type:"divider"},{type:"textinput",id:"curPassword",labelId:"current_password",required:!0,maxLength:50,password:!0},{type:"divider"}]}]}},Ie=[{value:0,labelId:"view_right_0"},{value:1,labelId:"view_right_1"},{value:2,labelId:"view_right_2"}],nr={formId:"edit-expose-profile-form",path:"/users/user/exposure",method:"PUT",type:"form",useRightsLevel:1,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],editorOptions:{labelId_showToUsers:"show_to_users",showToUsers:{username:{labelId:"username",type:"checkbox",value:!0},name:{labelId:"name",type:"checkbox",value:!0},email:{labelId:"email",type:"checkbox",value:!0},created_date:{labelId:"created",type:"checkbox",value:!0}}},form:{formDescId:"edit_expose_profile_form_desc",onErrorsMsgId:"form_has_errors",formErrors:{error401Id:"wrong_password"},showBottomMsg:!1,submitButton:{id:"submit-edit-profile-button-id",labelId:"save",class:"save-button"},submitFields:["username","name","email","created_date","curPassword"],fieldsets:[{id:"edit-user-main-fs",fields:[{type:"divider"},{type:"dropdown",id:"username",labelId:"username",disabled:!0,defaultValue:0,options:Ie},{type:"dropdown",id:"name",labelId:"name",defaultValue:1,options:Ie},{type:"divider"},{type:"dropdown",id:"email",labelId:"email",disabled:!0,defaultValue:2,options:Ie},{type:"divider"},{type:"dropdown",id:"created_date",labelId:"created",defaultValue:2,options:Ie},{type:"divider"},{type:"textinput",id:"curPassword",labelId:"current_password",required:!0,maxLength:50,password:!0},{type:"divider"}]}]}},or={formId:"delete-profile-form",path:"/users/own/delete",method:"POST",type:"form",useRightsLevel:1,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{formDescId:"delete_profile_warning_text",onErrorsMsgId:"form_has_errors",formErrors:{error401Id:"wrong_password",error403Id:"this_user_cannot_be_deleted"},showBottomMsg:!1,submitButton:{id:"submit-delete-profile-button-id",labelId:"delete",class:"confirm-button--delete"},submitFields:["password"],fieldsets:[{id:"delete-profile-main-fs",fields:[{type:"divider"},{type:"textinput",id:"password",labelId:"current_password",required:!0,maxLength:50,password:!0,validationFn:"validatePass1"},{type:"textinput",id:"password-again",labelId:"current_password_again",required:!0,maxLength:50,password:!0,validationFn:"validatePass2"},{type:"divider"}]}]}},lr={formId:"change-password-form",path:"/users/own/changepass",method:"POST",type:"form",useRightsLevel:1,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{onErrorsMsgId:"form_has_errors",formErrors:{error401Id:"wrong_password"},showBottomMsg:!1,submitButton:{id:"submit-change-pass-button-id",labelId:"save",class:"save-button"},submitFields:["password","curPassword"],fieldsets:[{id:"change-password-main-fs",fields:[{type:"divider"},{type:"textinput",id:"password",labelId:"new_password",required:!0,minLength:F.password.minLength,maxLength:50,password:!0,validationFn:"validatePass1"},{type:"textinput",id:"password-again",labelId:"new_password_again",required:!0,minLength:0,maxLength:50,password:!0,validationFn:"validatePass2"},{type:"divider"},{type:"textinput",id:"curPassword",labelId:"current_password",required:!0,maxLength:50,password:!0},{type:"divider"}]}]}},dr={formId:"new-pass-request-form",path:"/users/newpassrequest",method:"POST",type:"form",useRightsLevel:0,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],editorOptions:{},form:{formTitleId:"request_new_password_link",afterSubmitMsgId:"request_new_password_link_processed_msg",afterSubmitShowOnlyMsg:!0,showTopMsg:!0,showBottomMsg:!1,submitButton:{id:"request-new-pass-button-id",labelId:"request"},submitFields:["email"],fieldsets:[{id:"new-user-main-fs",fields:[{type:"divider"},{type:"textinput",id:"email",labelId:"email",required:!0,maxLength:50,email:!0},{type:"divider"}]}]}},ur={formId:"reset-password-w-token-form",path:"/users/newpass",method:"POST",type:"form",useRightsLevel:0,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{onErrorsMsgId:"form_has_errors",showBottomMsg:!1,afterSubmitMsgId:"password_has_been_changed",afterSubmitShowOnlyMsg:!0,submitButton:{id:"submit-new-pass-w-token-button-id",labelId:"save",class:"save-button"},submitFields:["password"],fieldsets:[{id:"new-password-w-token-main-fs",fields:[{type:"divider"},{type:"textinput",id:"password",labelId:"new_password",required:!0,minLength:F.password.minLength,maxLength:50,password:!0,validationFn:"validatePass1"},{type:"textinput",id:"password-again",labelId:"new_password_again",required:!0,minLength:0,maxLength:50,password:!0,validationFn:"validatePass2"}]}]}},hr={formId:"new-email-verification",path:"/users/newemailverification",method:"POST",type:"form",useRightsLevel:1,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[],form:{formDescId:"new_verification_form_description",class:"confirmation-form",afterSubmitShowOnlyMsg:!0,submitButton:{id:"new-email-verification-button",labelId:"send"},submitFields:[]}},cr={formId:"verify-w-token",path:"/users/verify/:token",method:"GET",type:"readapi",useRightsLevel:0,useRightsUsers:[],useRightsGroups:[],editorRightsLevel:8,editorRightsUsers:[],editorRightsGroups:[]},fr=[Ks,Js,Ys,Xs,Zs,Qs,er,tr,ir,sr,rr,ar,nr,or,lr,dr,ur,hr,cr],nt=(r,t)=>`<a href="${t}" target="_blank" style="padding: 8px 32px 7px; border: 1px solid #555;border-radius: 8px;font-family: Helvetica, Arial, sans-serif;font-size: 14px; color: #ffffff;text-decoration: none;font-weight:bold;display: inline-block;background: #333;">
    ${r}
</a>`,mr={emailId:"new-user-email",fromName:"Beacon JS",defaultEmail:{subject:"New Account Registered",text:`
Welcome
-------

Your new account has been registered.
- Username: $[username]

You can either [login]($[mainBeaconUrl]) or if you don't have a password,  
you can [create a new password]($[newPassRequestUrl]) for you.

${nt("Login","$[mainBeaconUrl]")}

Do not reply to this email, thank you.

/Beacon JS`},langs:{fi:{subject:"Uusi tili rekister\xF6ity",text:`
Tervetuloa
----------

Uusi tilinne on rekister\xF6ity.
- K\xE4ytt\xE4j\xE4nimi: $[username]

Voit joko [kirjautua sis\xE4\xE4n]($[mainBeaconUrl]) tai jos sinulla ei ole salasanaa,  
voit luoda [uuden salasanan]($[newPassRequestUrl]) itsellesi.

<a href="$[mainBeaconUrl]" target="_blank" style="padding: 8px 32px 7px; border: 1px solid #555;border-radius: 8px;font-family: Helvetica, Arial, sans-serif;font-size: 14px; color: #ffffff;text-decoration: none;font-weight:bold;display: inline-block;background: #333;">
    Kirjaudu
</a>

\xC4lk\xE4\xE4 vastatko t\xE4h\xE4n s\xE4hk\xF6postiin, kiitos.

/Beacon JS`}}},pr={emailId:"new-pass-link-email",fromName:"Beacon JS",defaultEmail:{subject:"Reset Password Link",text:`
Your Link is Ready, $[username]
---------------------------

You requested a link to reset your password. Here you go:

${nt("Reset my password","$[newPassWTokenUrl]")}

Link: $[newPassWTokenUrl]

If you did not request this, you can ignore this (only you have this message). This link will expire in $[linkLife] minutes.

Do not reply to this email, thank you.

/Beacon JS`},langs:{}},gr={emailId:"delete-own-account-email",fromName:"Beacon JS",defaultEmail:{subject:"Account deleted",text:`
Goodbye
-------

Your account has been deleted and your data will be removed.
- Username: $[username]

You have deleted your own account. Thank you for being user with us!

Do not reply to this email, thank you.

/Beacon JS`},langs:{fi:{subject:"Tili poistettu",text:`
N\xE4kemiin
--------

Tilisi on poistettu ja datasi poistetaan.
- K\xE4ytt\xE4j\xE4nimi: $[username]

Olet poistanut oman tilisi. Kiitos kun olet ollut yksi k\xE4ytt\xE4jist\xE4mme!

\xC4lk\xE4\xE4 vastatko t\xE4h\xE4n s\xE4hk\xF6postiin, kiitos.

/Beacon JS`}}},vr={emailId:"password-changed-email",fromName:"Beacon JS",defaultEmail:{subject:"Password changed",text:`
Your password was changed, $[username]
--------------------------------------

This is a notification that your password was changed.

Do not reply to this email, thank you.

/Beacon JS`},langs:{}},_r={emailId:"verify-account-email",fromName:"Beacon JS",defaultEmail:{subject:"Verify account email",text:`
Almost there, $[username], please verify your E-mail
----------------------------------------------------

Please verify your account's E-mail by clicking this link:

${nt("Verify","$[verifyEmailTokenUrl]")}

Link: $[verifyEmailTokenUrl]

If you do not own this account, you can ignore this message.

Do not reply to this email, thank you.

/Beacon JS`},langs:{}},wr={emailId:"two-factor-auth-email",fromName:"Beacon JS",defaultEmail:{subject:"Login Code [$[twoFactorCode]]",text:`
Welcome back!
---------------------------

Here is your 2FA Login Code:

<div style="padding: 8px 32px 7px; border: 1px solid #555;border-radius: 8px;font-family: Helvetica, Arial, sans-serif;font-size: 18px; color: #333;text-decoration: none;font-weight:bold;display: inline-block;">

$[twoFactorCode]

</div>

The Login Code ($[twoFactorCode]) is valid for $[twoFactorLife] minutes.

If you are not trying to log in, you can ignore this (only you have this message).

Do not reply to this email, thank you.

/Beacon JS`},langs:{}},br={newUserEmail:mr,newPassLinkEmail:pr,deleteOwnAccountEmail:gr,passwordChangedEmail:vr,verifyAccountEmail:_r,twoFactorAuthEmail:wr};var Se={CONFIG:qs,parsers:Ws,formData:fr,emailData:br};const yr=Se.CONFIG.UI,Sr={lsKeyPrefix:"bjs_",ssKeyPrefix:"bjs_"},Le=Object.assign({},Sr,yr);let ti,Fe,kr="en";const kt=new H("Beacon lang *****"),xr=()=>(ti=Bs,ii(),!0),ii=()=>{let r;return r=new at(Le.lsKeyPrefix).getItem("lang"),r||(r=new Qt(Le.ssKeyPrefix).getItem("lang")),r||(r=Fe),r||(r=Le.langs[0]),r||(r=kr),Fe=r,r},h=(r,t)=>{let e=ti[r];if(!e)return kt.warn(`Text asset missing. id: ${r}, replacers: ${JSON.stringify(t)}`),`[${r}]`;if(e=e[Fe],!e)return kt.warn(`Text asset missing for lang: ${Fe}. id: ${r}, replacers: ${JSON.stringify(t)}`),`[${r}]`;if(t)for(let i=0;i<t.length;i++)e=e.replace("$["+i+"]",t[i]);return e};class Je extends v{constructor(e){super(e);c(this,"paint",e=>{this.showSpinner(e.show)});c(this,"showSpinner",e=>{if(e&&this.prevShow||!e&&!this.prevShow)return;this.prevShow=e;const i=this.elem;!i||(e?(i.style.display="inline-block",clearTimeout(this.spinnerAnimTimer),this.spinnerAnimTimer=setTimeout(()=>{i.classList.add("show-spinner")},10)):(i.style.display="inline-block",i.classList.add("show-spinner"),setTimeout(()=>{i.classList.remove("show-spinner"),clearTimeout(this.spinnerAnimTimer),this.spinnerAnimTimer=setTimeout(()=>{i.style.display="none"},this.fadeTime)},this.fadeTime/4)))});this.template='<div class="spinner-icon"></div>',this.spinnerAnimTimer,this.prevShow=e.show,this.fadeTime=(e.fadeTime||400)+10,e.style={transitionDuration:this.fadeTime+"ms"}}}const Cr="_viewTitle_1e6vl_1";var Tr={viewTitle:Cr};class D extends v{constructor(e){super(e);c(this,"paint",e=>{this.spinner.draw({show:e.spinner})});c(this,"showSpinner",e=>{this.spinner.showSpinner(e)});c(this,"updateHeading",e=>{this.data.heading=e;const i=this.elem.querySelector("#"+this.id+"-heading");i&&(i.innerText=e)});let i="h2";e.tag&&(i=e.tag),this.template=`<div class="view-title ${Tr.viewTitle}">
      <${i} id="${this.id+"-heading"}">${e.heading}</${i}>
    </div>`,this.spinner=this.addChild(new Je({id:this.id+"-spinner",attach:this.id+"-heading"})),this.spinnerFadeTime=this.spinner.fadeTime}}class si extends v{constructor(e){super(e);c(this,"paint",()=>{let e;this.data.bodyText?e=this.data.bodyText:this.Router.curRouteData.params?(this.params=this.Router.curRouteData.params,this.params.type==="universe"?e=h("404_universe",[this.decodeUri(this.params.data)]):e=h("404_default_message")):(this.params={},e=h("404_default_message")),this.viewTitle.draw(),this.message.draw({text:e}),this.button.draw()});this.appState=e.appState,this.params={},this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title||404,prepend:!0})),this.message=this.addChild({id:"404-message",tag:"p"}),this.button=this.addChild(new se({id:"back-to-root",link:"/",text:h("back_to_start")}))}decodeUri(e){try{return decodeURI(e)}catch(i){return this.logger.error("Malformed URI.",i),"-"}}}class ot extends v{constructor(e){super(e);c(this,"paint",()=>{this.viewTitle.draw(),this.button.draw()});this.appState=e.appState,this.template=`<div><p>${h("unauthorised")}</p></div>`,this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title||401,prepend:!0})),this.button=this.addChild(new se({id:"back-to-root",link:"/",text:h("back_to_start")}))}}class L extends v{constructor(e){super(e);c(this,"init",()=>{this.addListener({id:this.id+"-listener",type:"click",fn:this.click})});e.template?this.template=e.template:this.template='<button type="button"></button>',this.click=e.click}}const le={validatePass1:r=>{const{val:t,components:e,id:i,fieldErrors:s,fieldsetId:a}=r,n=e["password-again"].value,o=e.password.data.field.minLength;t.length>=o&&n.length>=1&&t!==e["password-again"].value?(s.set("password-again",{errorMsgId:"passwords_dont_match",fieldsetId:a,id:i}),s.set("password",{errorMsg:" "})):(o===void 0||t.length>=o)&&t===e["password-again"].value&&(s.set("password-again",!1),s.set("password",!1)),e["password-again"].displayFieldError()},validatePass2:r=>{const{val:t,components:e,id:i,fieldErrors:s,fieldsetId:a}=r,n=e.password.value,o=e.password.data.field.minLength;t.length>=1&&t!==e.password.value?(s.set("password-again",{errorMsgId:"passwords_dont_match",fieldsetId:a,id:i}),s.get("password")||s.set("password",{errorMsg:" "})):t.length>=1&&t===e.password.value&&(o===void 0||n.length>=o)&&(s.set("password-again",!1),s.set("password",!1)),e.password.displayFieldError()}},xt=Se.CONFIG,ri={userLevels:r=>{if(!r||r.readerLevel===void 0||isNaN(r.readerLevel))return[];let{readerLevel:t}=r;const e=xt.USER_LEVELS,i=[];for(let s=0;s<e.length;s++){const a=e[s];a.userLevel===0||a.userLevel>=t||i.push({value:a.userLevel,labelId:a.labelId})}return i},userLevelsWithNine:r=>{if(!r||r.readerLevel===void 0||isNaN(r.readerLevel))return[];let{readerLevel:t}=r;const e=xt.USER_LEVELS,i=[];for(let s=0;s<e.length;s++){const a=e[s];a.userLevel===0||a.userLevel>t||i.push({value:a.userLevel,labelId:a.labelId})}return i}};class ai extends v{constructor(e){super(e);c(this,"setValue",(e,i)=>{const s=document.getElementById(this.inputId);e===!1||e==="false"?(this.value=!1,s.checked=!1,this.elem.classList.remove("form-elem--checked")):(this.value=!0,s.checked=!0,this.elem.classList.add("form-elem--checked")),this.data.value=this.data.checked=this.value,!i&&this.data.changeFn&&this.data.changeFn({target:s})});e.name||(e.name=e.id),e.label||(e.label=e.id),this.inputId=this.id+"-input",this.template=`
            <div class="form-elem form-elem--checkbox">
                <label for="${this.inputId}">
                    <span class="form-elem__label">${e.label}</span>
                    <input
                        id="${this.inputId}"
                        class="form-elem__checkbox"
                        type="checkbox"
                        name="${e.name}"
                        ${e.value===!0||e.value==="true"||e.checked===!0||e.checked==="true"?"checked":""}
                        ${e.disabled?"disabled":""}
                    />
                </label>
            </div>
        `,this.value=e.value===!0||e.value==="true"||e.checked===!0||e.checked==="true"||!1,this.errorComp=this.addChild({id:this.id+"-error-msg",class:"form-elem__error-msg"}),e.error&&(e.class="form-elem--error")}addListeners(e){this.addListener({id:this.inputId+"-click",target:document.getElementById(this.inputId),type:"click",fn:i=>{this.value=i.target.checked,this.data.value=this.data.checked=this.value,this.value===!1||this.value==="false"?this.elem.classList.remove("form-elem--checked"):this.elem.classList.add("form-elem--checked"),e.changeFn&&e.changeFn(i)}})}paint(e){const i=document.getElementById(this.inputId);(e.checked===!0||e.checked===!1||e.value===!0||e.value===!1||e.checked==="true"||e.checked==="false"||e.value==="true"||e.value==="false")&&(this.value=e.value===!0||e.value==="true"||e.checked===!0||e.checked==="true"||!1,this.data.value=this.data.checked=this.value),i.checked=this.value,this.value===!1||this.value==="false"?this.elem.classList.remove("form-elem--checked"):this.elem.classList.add("form-elem--checked"),e.error&&(this.elem.classList.add("form-elem--error"),e.error.errorMsg&&(this.elem.classList.add("form-elem--error-msg"),this.errorComp.draw({text:e.error.errorMsg}))),e.disabled&&i.setAttribute("disabled","")}error(e){e?(this.errorComp.discard(),this.elem.classList.add("form-elem--error"),e.errorMsg&&!this.data.hideMsg&&(this.elem.classList.add("form-elem--error-msg"),this.errorComp.draw({text:e.errorMsg}))):(this.errorComp.discard(),this.elem.classList.remove("form-elem--error"),this.elem.classList.remove("form-elem--error-msg"))}}class Ir extends v{constructor(t){if(super(t),!t.options||!t.options.length)throw this.logger.error(`Dropdown Component (${t.id}) could not find options array or the array was empty.`),new Error("Call stack");t.name||(t.name=t.id),t.label||(t.label=t.id),this.selectId=this.id+"-select",this.options=[],t.value===void 0?this.value=t.selected!==void 0?t.selected:"":this.value=t.value,this.template=`
            <div class="form-elem form-elem--dropdown">
                <label for="${this.selectId}">
                    <span class="form-elem__label">${t.label}</span>
                    <select
                        id="${this.selectId}"
                        class="form-elem__select"
                        type="checkbox"
                        name="${t.name}"
                        ${t.disabled?"disabled":""}
                    >${this._createOptionsTemplate(t.options,this.value,t.emptyIsAnOption)}</select>
                </label>
            </div>
        `,this.errorComp=this.addChild({id:this.id+"-error-msg",class:"form-elem__error-msg"}),t.error&&(t.class="form-elem--error")}addListeners(t){this.addListener({id:this.selectId+"-click",target:document.getElementById(this.selectId),type:"click",fn:e=>{e.target.value!==this.value&&(this.value=e.target.value,this.data.value=this.data.selected=this.value,t.changeFn&&t.changeFn(e))}})}paint(t){const e=document.getElementById(this.selectId);e.checked=t.checked,(t.value||t.selected)&&(this.value=t.value||t.selected,this.data.value=this.data.selected=this.value),t.error&&(this.elem.classList.add("form-elem--error"),t.error.errorMsg&&(this.elem.classList.add("form-elem--error-msg"),this.errorComp.draw({text:t.error.errorMsg}))),t.disabled&&e.setAttribute("disabled","")}error(t){t?(this.errorComp.discard(),this.elem.classList.add("form-elem--error"),t.errorMsg&&!this.data.hideMsg&&(this.elem.classList.add("form-elem--error-msg"),this.errorComp.draw({text:t.errorMsg}))):(this.errorComp.discard(),this.elem.classList.remove("form-elem--error"),this.elem.classList.remove("form-elem--error-msg"))}_createOptionsTemplate(t,e,i){let s="";const a=e==null;(a||i)&&(s+=`<option value=""${i&&a||a?" selected":""}>[${h("select")}]</option>`);for(let n=0;n<t.length;n++)s+='<option value="'+t[n].value+'"',t[n].disabled&&(s+=" disabled"),e&&String(t[n].value)===String(e)&&(s+=" selected"),s+=">"+t[n].label+"</option>";return s}setValue(t,e){const i=document.getElementById(this.selectId),s=i.children,a=String(t);let n=!1;for(let o=0;o<s.length;o++)if(s[o].value===a){n=!0,this.value=a,this.data.value=this.data.selected=this.value;break}if(n){for(let o=0;o<s.length;o++)s[o].value===a?s[o].selected=!0:s[o].selected=!1;if(e)return;this.data.changeFn&&this.data.changeFn({target:i})}else this.logger.warn("Could not locate dropdown value in Dropdown -> setValue",t)}}class Dr extends v{constructor(e){super(e);c(this,"paint",e=>{e.disabled&&this.elem.setAttribute("disabled","")});this.template='<button type="submit" class="form-elem form-elem--submit"></button>'}}class ni extends v{constructor(e){super(e);c(this,"erase",()=>{this.errorComp.discard(!0)});c(this,"addListeners",e=>{const i=this.elem.querySelector("#"+this.inputId);this.addListener({id:this.inputId+"-keyup",target:i,type:"keyup",fn:s=>{this.value=s.target.value,this.data.value=this.value,e.changeFn&&e.changeFn(s)}})});c(this,"focus",e=>{const i=this.elem.querySelector("#"+this.inputId);i.focus(),e&&i.setSelectionRange(e,e)});c(this,"blur",()=>{this.elem.querySelector("#"+this.inputId).blur()});e.name||(e.name=e.id),!e.label&&e.label!==""&&(e.label=e.id),this.inputId=this.id+"-input",this.template=`
            <div class="form-elem form-elem--text-input">
                <label for="${this.inputId}">
                    <span class="form-elem__label">${e.label}</span>
                    <input
                        id="${this.inputId}"
                        class="form-elem__input"
                        type="${e.password?"password":"text"}"
                        name="${e.name}"
                        placeholder="${e.placeholder||""}"
                        value="${e.value||""}"
                        ${e.maxlength?'maxlength="'+e.maxlength+'"':""}
                        ${e.disabled?"disabled":""}
                    />
                </label>
            </div>
        `,this.value=e.value||"",this.errorComp=new v({id:this.id+"-error-msg",class:"form-elem__error-msg"}),e.error&&(e.class="form-elem--error")}paint(e){const i=document.getElementById(this.inputId);e.value!==void 0&&(this.value=e.value,this.data.value=e.value),i.value=this.value,e.error&&(this.elem.classList.add("form-elem--error"),e.error.errorMsg&&(this.elem.classList.add("form-elem--error-msg"),this.addChild(this.errorComp).draw({text:e.error.errorMsg}))),e.disabled&&i.setAttribute("disabled","")}error(e){e?(this.errorComp.discard(),this.elem.classList.add("form-elem--error"),e.errorMsg&&!this.data.hideMsg&&(this.elem.classList.add("form-elem--error-msg"),this.addChild(this.errorComp).draw({text:e.errorMsg}))):(this.errorComp.discard(),this.elem.classList.remove("form-elem--error"),this.elem.classList.remove("form-elem--error-msg"))}setValue(e,i){this.value=String(e);const s=document.getElementById(this.inputId);s.value=this.value,this.data.value=this.value,!i&&this.data.changeFn&&this.data.changeFn({target:s})}}class Rr extends v{constructor(t){super(t),t.name||(t.name=t.id),t.label||(t.label=t.id),this.textareaId=this.id+"-textarea",this.template=`
            <div class="form-elem form-elem--text-textarea">
                <label for="${this.textareaId}">
                    <span class="form-elem__label">${t.label}</span>
                    <textarea
                        id="${this.textareaId}"
                        class="form-elem__textarea"
                        name="${t.name}"
                        placeholder="${t.placeholder||""}"
                        ${t.maxlength?'maxlength="'+t.maxlength+'"':""}
                        ${t.disabled?"disabled":""}
                    >${t.value||""}</textarea>
                </label>
            </div>
        `,this.value=t.value||"",this.errorComp=this.addChild({id:this.id+"-error-msg",class:"form-elem__error-msg"}),t.error&&(t.class="form-elem--error")}addListeners(t){this.addListener({id:this.textareaId+"-keyup",target:document.getElementById(this.textareaId),type:"keyup",fn:e=>{this.value=e.target.value,this.data.value=this.value,t.changeFn&&t.changeFn(e)}})}paint(t){const e=document.getElementById(this.textareaId);t.value!==void 0&&(this.value=t.value,this.data.value=t.value),e.value=this.value,t.error&&(this.elem.classList.add("form-elem--error"),t.error.errorMsg&&(this.elem.classList.add("form-elem--error-msg"),this.errorComp.draw({text:t.error.errorMsg}))),t.disabled&&e.setAttribute("disabled","")}error(t){t?(this.errorComp.discard(),this.elem.classList.add("form-elem--error"),t.errorMsg&&!this.data.hideMsg&&(this.elem.classList.add("form-elem--error-msg"),this.errorComp.draw({text:t.errorMsg}))):(this.errorComp.discard(),this.elem.classList.remove("form-elem--error"),this.elem.classList.remove("form-elem--error-msg"))}setValue(t,e){this.value=String(t);const i=document.getElementById(this.textareaId);i.value=this.value,this.data.value=this.value,!e&&this.data.changeFn&&this.data.changeFn({target:i})}}const j=()=>{const r={VITE_API_BASE_PATH:"/api",VITE_API_BASE_URL:"http://localhost",VITE_API_PORT:"3011",VITE_API_PORT_TEST:"3021",VITE_CLIENT_PATH:"/beacon",VITE_CLIENT_PORT:"8080",VITE_CLIENT_URL:"http://localhost",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0};return`${r.VITE_API_BASE_URL}:${r.VITE_API_PORT}${r.VITE_API_BASE_PATH}`};class q extends v{constructor(e){super(e);c(this,"addListeners",()=>{this.addListener({type:"submit",fn:this.handleSubmit})});c(this,"init",e=>{e.local||this._loadFormData(e.id)});c(this,"paint",e=>{if(this.formSubmitted){this.components[this.id+"-title"]&&this.components[this.id+"-title"].draw();const i=this.components[this.id+"-msg-top"];i&&i.draw({text:this._getTextData(e.afterSubmitMsg,e.afterSubmitMsgId)})}else{this.mainSpinner&&(this.mainSpinner.draw(),this.mainSpinner.showSpinner(!0));for(let i=0;i<this.componentsOrder.length;i++){const s=this.componentsOrder[i];this.components[s].draw()}}});c(this,"_fieldTextAreaErrorCheck",e=>{let{val:i,id:s,field:a,fieldsetId:n}=e;if(i=i.trim(),a.required&&!i.length)this.fieldErrors.set(s,{errorMsg:h("required"),fieldsetId:n,id:s});else if(i.length&&i.length<a.minLength)this.fieldErrors.set(s,{errorMsg:h("minimum_x_characters",[a.minLength]),fieldsetId:n,id:s});else if(i.length&&a.regex)if(new RegExp(a.regex).test(i.trim()))this.fieldErrors.set(s,!1);else{const l=this._getTextData(a.regexErrorMsg,a.regexErrorMsgId)||"";this.fieldErrors.set(s,{errorMsg:l,fieldsetId:n,id:s})}else this.fieldErrors.set(s,!1);if(a.validationFn){if(!le[a.validationFn])throw this.logger.error(`Could not find validationFn (id: ${a.validationFn}).`),new Error("Call stack");le[a.validationFn]({val:i,id:s,fieldsetId:n,fieldErrors:this.fieldErrors,field:a,components:this.components})}this.fieldsetErrorCheck(n)});c(this,"_fieldDropdownErrorCheck",e=>{let{val:i,id:s,field:a,fieldsetId:n}=e;a.required&&i===""?this.fieldErrors.set(s,{errorMsg:h("required"),fieldsetId:n,id:s}):this.fieldErrors.set(s,!1),a.validationFn&&le[a.validationFn]({val:i,id:s,fieldsetId:n,fieldErrors:this.fieldErrors,field:a,components:this.components}),this.fieldsetErrorCheck(n)});c(this,"_fieldCheckboxErrorCheck",e=>{let{val:i,id:s,field:a,fieldsetId:n}=e;a.required&&i===!1?this.fieldErrors.set(s,{errorMsg:h("required"),fieldsetId:n,id:s}):this.fieldErrors.set(s,!1),a.validationFn&&le[a.validationFn]({val:i,id:s,fieldsetId:n,fieldErrors:this.fieldErrors,field:a,components:this.components}),this.fieldsetErrorCheck(n)});c(this,"_fieldTextInputErrorCheck",e=>{let{val:i,id:s,field:a,fieldsetId:n}=e;if(i=i.trim(),a.required&&!i.length)this.fieldErrors.set(s,{errorMsg:h("required"),fieldsetId:n,id:s});else if(i.length&&i.length<a.minLength)this.fieldErrors.set(s,{errorMsg:h("minimum_x_characters",[a.minLength]),fieldsetId:n,id:s});else if(a.email&&i.length&&!Se.parsers.validateEmail(i))this.fieldErrors.set(s,{errorMsg:h("email_not_valid"),fieldsetId:n,id:s});else if(i.length&&a.regex)if(new RegExp(a.regex).test(i.trim()))this.fieldErrors.set(s,!1);else{const l=this._getTextData(a.regexErrorMsg,a.regexErrorMsgId)||"";this.fieldErrors.set(s,{errorMsg:l,fieldsetId:n,id:s})}else this.fieldErrors.set(s,!1);if(a.validationFn){if(!le[a.validationFn])throw this.logger.error(`Could not find validationFn (id: ${a.validationFn}).`),new Error("Call stack");le[a.validationFn]({val:i,id:s,fieldsetId:n,fieldErrors:this.fieldErrors,field:a,components:this.components})}this.fieldsetErrorCheck(n)});c(this,"fieldsetErrorCheck",e=>{const i=this.cssClasses.formError,s=this.cssClasses.fieldsetError,a=this.fieldErrors.getKeys(),n=this.data.fieldsets;for(let l=0;l<n.length;l++){const u=document.getElementById(n[l].id);u&&u.classList.remove(s)}this.elem.classList.remove(i),this._setFormMsg("");let o=!1;for(let l=0;l<a.length;l++)if(this.fieldErrors.get(a[l]).fieldsetId===e){const d=document.getElementById(e);d&&d.classList.add(s),o=!0}if(o){this.elem.classList.add(i);const l=this._getTextData(this.data.onErrorsMsg,this.data.onErrorsMsgId);l&&this._setFormMsg(l)}});c(this,"handleSubmit",e=>{if(e.preventDefault(),this.formSentOnce||(this.formSentOnce=!0,this.elem.classList.add(this.cssClasses.formSent)),!this.formHasChanges&&this.data.editDataId)return;if(!this._checkAllFieldErrors()){if(this.data.beforeFormSendingFn&&this.data.beforeFormSendingFn()===!1)return;const s=this.data.submitFields,a={};for(let n=0;n<s.length;n++)this.components[s[n]]&&this.components[s[n]].value!==void 0&&(a[s[n]]=this.components[s[n]].value);this._sendForm(a)}});c(this,"_sendForm",async e=>{this.formState.set("sending",!0);try{e.id=this.id;let i=j()+(this.data.api||"/forms/filled"),s;if(this.data.addToMessage){const o=Object.keys(this.data.addToMessage);for(let l=0;l<o.length;l++)e[o[l]]||(e[o[l]]=this.data.addToMessage[o[l]])}const a={from:"getCSRF",browserId:this.appState.get("browserId")},n=j()+"/login/access";if(s=await P.post(n,a,{withCredentials:!0}),!s.data||!s.data.csrfToken)throw this.logger.error("Could not retrieve CSRF token.",s),new Error("Call stack");if(e._csrf=s.data.csrfToken,this.formSubmitted=!0,this.data.method&&this.data.method==="PUT")s=await P.put(i,e,{withCredentials:!0});else if(this.data.method&&this.data.method==="POST")s=await P.post(i,e,{withCredentials:!0});else throw this.formState.set("sending",!1),this._setFormMsg(h("form_submit_error")),this.logger.error("Form sending failed (Form Creator). Method was unknown: "+this.data.method),new Error("Call stack");if(this.formState.set("sending",!1),s.data&&s.data.errors)s.data.deletionResponse?this._serverSideDeletionErrors(s):this._serverSideFieldErrors(s);else{if(this._resetForm(),this.data.afterSubmitShowOnlyMsg)this.formSubmitted=!0,this.reDrawSelf({class:this.cssClasses.formSuccess});else{const l=this._getTextData(this.data.afterSubmitMsg,this.data.afterSubmitMsgId);this._setFormMsg(l)}this.afterFormSentFn&&this.afterFormSentFn(s,this)}}catch(i){this.exceptionError=!0,this.formState.set("sending",!1),i.response&&i.response.status===401?this.data.formErrors&&this.data.formErrors.error401Id?(i.response.data&&i.response.data.errors&&this._serverSideFieldErrors(i.response),this._setFormMsg(h(this.data.formErrors.error401Id))):this.data.formErrors&&this.data.formErrors.error401NoShow?i.response.data&&i.response.data.errors&&this._serverSideFieldErrors(i.response):(this._resetForm(),this._setFormMsg(h("unauthorised"))):i.response&&i.response.status===403?this.data.formErrors&&this.data.formErrors.error403Id?(i.response.data&&i.response.data.errors&&this._serverSideFieldErrors(i.response),this._setFormMsg(h(this.data.formErrors.error403Id))):this.data.formErrors&&this.data.formErrors.error403NoShow?i.response.data&&i.response.data.errors&&this._serverSideFieldErrors(i.response):(this._resetForm(),this._setFormMsg(h("forbidden"))):(this._resetForm(),this._setFormMsg(h("form_submit_error")),this.logger.error("Form sending failed (Form Creator).",i)),this.elem.classList.add(this.cssClasses.formSent),this.elem.classList.add(this.cssClasses.formError),this.data.onErrorsFn&&this.data.onErrorsFn(i,i.response,this._setFormMsg)}});c(this,"_loadFormData",async e=>{this.formState.set("getting",!0),this.formState.set("sending",!1);try{let i="";this.data.editDataId&&(i="+"+this.data.editDataId);const s=j()+"/forms/"+e+i,a=await P.get(s,{withCredentials:!0});this.data=Object.assign({},this.data,a.data),this.formState.set("getting",!1)}catch(i){let s,a=!1;i.response&&i.response.status===401?(s=h("unauthorised"),i.response.data&&i.response.data.loggedIn===!1&&(a=!0)):s=h("could_not_get_form_data"),this.formState.removeListener("getting"),this.formState.set("getting",!1),this.formSubmitted=!0,i.response&&i.response.data&&i.response.data.customErrorTextId&&(s=h(i.response.data.customErrorTextId)),this.template=`<div class="error-msg">${s}</div>`,this.logger.error("Form data retrieving failed (Form Creator).",i,this),this.data.onErrorsFn&&this.data.onErrorsFn(i,i.response),a?setTimeout(()=>{this.Router.changeRoute("/logout?r="+this.Router.getRoute(!0))},500):this.reDrawSelf()}});c(this,"_serverSideFieldErrors",e=>{const i=Object.keys(e.data.errors);for(let s=0;s<i.length;s++){let a;for(let n=0;n<this.data.fieldsets.length;n++){const o=this.data.fieldsets[n];for(let l=0;l<o.fields.length;l++)if(o.fields[l].id===i[s]){a=o.id;break}if(a)break}e.data.errors[i[s]]===!0?this.fieldErrors.set(i[s],{errorMsg:"",fieldsetId:a}):this.fieldErrors.set(i[s],{errorMsgId:e.data.errors[i[s]],fieldsetId:a}),this._displayFieldError(i[s]),this.fieldsetErrorCheck(a)}this.Dialog&&this.Dialog.unlock()});c(this,"_serverSideDeletionErrors",e=>{const i=e.data.errors;let s="";for(let a=0;a<i.length;a++)if(i[a].fatal){s=h("form_submit_error");break}else i[a].userNotFoundError?s+=h("user_not_found_error",[i[a].userId])+`
`:i[a].notAllowedToDeleteUserError&&(s+=h("not_allowed_to_delete_user_error",[i[a].userId])+`
`);this.formSubmitted=!0,this._resetForm(),this.reDrawSelf({class:[this.cssClasses.formError,this.cssClasses.formSent]}),this._setFormMsg(s),this.data.onErrorsFn&&this.data.onErrorsFn(new Error("Server side deletion error"),e),this.Dialog&&this.Dialog.unlock()});c(this,"_checkAllFieldErrors",()=>{let e=!1;for(let i=0;i<this.componentsOrder.length;i++){const s=this.components[this.componentsOrder[i]];s.errorChecker&&(this.fieldErrors.get(s.id)||s.errorChecker({val:s.value,id:s.id,field:s.data.field,fieldsetId:s.fieldsetId}),this._displayFieldError(s.id),this.fieldErrors.get(s.id)&&(e=!0))}return e});c(this,"_displayFieldError",e=>{const i=this.fieldErrors.get(e);if(!this.formSentOnce||!i){this.components[e].error(!1);return}if(typeof i=="string"||i instanceof String)this.components[e].error({errorMsg:i});else{const s=this._getTextData(i.errorMsg,i.errorMsgId);this.components[e].error({errorMsg:s})}});c(this,"_setFormMsg",(e,i)=>{const s=this.data.showTopMsg,a=this.data.showBottomMsg;let n;(i||s!==!1)&&(n=document.getElementById(this.id+"-msg-top"),n&&(n.innerText=e)),a!==!1&&(n=document.getElementById(this.id+"-msg-bottom"),n&&(n.innerText=i?"":e))});c(this,"_resetForm",()=>{this.formSentOnce=!1;let e=this.data.fieldsets;e||(e=[]);for(let i=0;i<e.length;i++){const s=e[i];for(let a=0;a<s.fields.length;a++){const n=s.fields[a];let o=!1;n.type==="textinput"?(this.components[n.id].setValue(n.maxLength&&n.initValue?n.initValue.substring(0,parseInt(n.maxLength))||"":n.initValue||""),o=!0):n.type==="checkbox"?(this.components[n.id].setValue(!!n.initValue),o=!0):n.type==="dropdown"&&(this.components[n.id].setValue(n.initValue),o=!0),o&&(this.fieldErrors.set(n.id,!1),this.components[n.id].data.disabled=n.disabled,this.components[n.id].rePaint())}this.fieldsetErrorCheck(s.id)}this.elem.classList.remove(this.cssClasses.formSent),this.elem.classList.remove(this.cssClasses.formError),this.elem.classList.remove(this.cssClasses.formSuccess)});this.appState=e.appState,this.logger=new H("Form Creator *****"),this.afterFormSentFn=e.afterFormSentFn,this.template='<form class="form-creator"></form>',this.Dialog=e.dialog,this.components={},this.componentsOrder=[],this.curLang=ii(),this.formHasChanges=!1,this.formSentOnce=!1,this.formSubmitted=!1,this.fieldErrors=new Ke,this.formState=new Ke({getting:!1,sending:!1}),this.formErrorClassSetterTimer,this.submitButtonId,this.fieldsetIds=[],this.exceptionError=!1,this.cssClasses={formSent:"form--sent",formError:"form--errors",fieldsetError:"fieldset--errors",formSuccess:"form--success"},e.local?this._createFormComponents(e):(this.mainSpinner=this.addChild(new Je({id:this.id+"-main-spinner",fadeTime:400,class:"form-loader-spinner"})),this.formState.addListener("getting",s=>{s===!1&&(this._createFormComponents(this.data),this.rePaint(),this.mainSpinner.showSpinner(!1),this.data.formLoadedFn&&this.data.formLoadedFn(),setTimeout(()=>{this.mainSpinner.discard(!0),this.mainSpinner=null},400+200))}))}_createFormComponents(e){let i,s;e.class&&(typeof e.class=="string"||e.class instanceof String?this.elem.classList.add(e.class):this.elem.classList.add(...e.class)),i=this.id+"-msg-top",this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,class:["form-msg","form-msg-top"]}),s=this._getTextData(e.formTitle,e.formTitleId),s&&(i=this.id+"-title",this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,tag:"h3",text:s,class:"form-main-title"})),s=this._getTextData(e.formDesc,e.formDescId),s&&(i=this.id+"-description",this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,tag:"p",text:s,class:"form-main-description"}));let a=e.fieldsets;a||(a=[]);for(let o=0;o<a.length;o++){const l=e.fieldsets[o],u=l.id;this.fieldsetIds.push(u),l.tag="fieldset",l.disabled&&(l.attributes={disabled:""}),this.componentsOrder.push(u),this.components[u]=this.addChild(l),s=this._getTextData(l.fieldsetTitle,l.fieldsetTitleId),s&&(i=this.id+"-fieldset-"+o+"-title",this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,tag:"h3",text:s,class:"fieldset-title",attach:u})),s=this._getTextData(l.fieldsetDesc,l.fieldsetDescId),s&&(i=this.id+"-fieldset-"+o+"-description",this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,tag:"p",text:s,class:"fieldset-description",attach:u}));for(let d=0;d<l.fields.length;d++){const f=l.fields[d],m=this.id+"-"+o+"-"+d;f.type==="divider"?(i=m+"-divider",this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,class:"form-divider",attach:u})):f.type==="subheading"?(i=m+"-subheading",s=this._getTextData(f.content,f.contentId),this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,tag:"h4",class:"form-subheading",attach:u,text:s})):f.type==="textinput"?this._fieldTextInput(f,u,m):f.type==="checkbox"?this._fieldCheckbox(f,u,m):f.type==="dropdown"?this._fieldDropdown(f,u,m):f.type==="textarea"&&this._fieldTextArea(f,u,m)}}if(i=this.id+"-spinner-icon",this.componentsOrder.push(i),this.components[i]=this.addChild(new Je({id:i})),e.extraButton){const o=e.extraButton;i=this.id+"-extra-button",s=this._getTextData(o.label,o.labelId);let l=["form-elem","form-elem--button","extra-button"];o.class&&(typeof o.class=="string"||o.class instanceof String?l.push(o.class):l=[...o.class,...l]),this.componentsOrder.push(i);const u={id:i,text:s,class:l,click:d=>{o.clickFn(d)}};this.components[i]=this.addChild(new L(u))}const n=e.submitButton;i=n.id||this.id+"-submit-button",this.submitButtonId=i,s=this._getTextData(n.label,n.labelId),this.componentsOrder.push(i),this.components[i]=this.addChild(new Dr({id:i,text:s,class:n.class})),i=this.id+"-msg-bottom",this.componentsOrder.push(i),this.components[i]=this.addChild({id:i,class:["form-msg","form-msg-bottom"]}),this.formState.addListener("sending",o=>{if(this.components[this.id+"-spinner-icon"].showSpinner(o),o){document.getElementById(this.submitButtonId).setAttribute("disabled","");for(let l=0;l<this.fieldsetIds.length;l++)document.getElementById(this.fieldsetIds[l]).setAttribute("disabled","")}else{document.getElementById(this.submitButtonId).removeAttribute("disabled");for(let l=0;l<this.fieldsetIds.length;l++)for(let u=0;u<a.length;u++)if(a[u].id===this.fieldsetIds[l]&&!a[u].disabled){document.getElementById(this.fieldsetIds[l]).removeAttribute("disabled");break}}})}_fieldTextArea(e,i,s){let a=e.id;a||(a=s+"-textarea");const n=(e.required?"* ":"")+this._getTextData(e.label,e.labelId),o=this._getTextData(e.placeholder,e.placeholderId);this.fieldErrors.set(a,!1),this.data.data!==void 0&&this.data.data[a]!==void 0&&(e.initValue=this.data.data[a]),this.data.fieldInitValues!==void 0&&this.data.fieldInitValues[a]!==void 0&&(e.initValue=this.data.fieldInitValues[a]),this.componentsOrder.push(a),this.components[a]=this.addChild(new Rr({id:a,name:e.name,class:e.class,label:n,placeholder:o,attach:i,hideMsg:e.hideMsg,disabled:e.disabled,maxlength:e.maxLength,value:e.maxLength&&e.initValue?e.initValue.substring(0,parseInt(e.maxLength))||"":e.initValue||"",field:e,changeFn:l=>{const u=l.target.value;this._fieldTextAreaErrorCheck({val:u,id:a,field:e,fieldsetId:i}),e.onChangeFn&&e.onChangeFn({val:u,id:a,fieldsetId:i,fieldErrors:this.fieldErrors,field:this.components[a],components:this.components}),this._displayFieldError(a),this.formHasChanges=!0,this.data.onFormChanges&&this.data.onFormChanges()}})),this.components[a].fieldsetId=i,this.components[a].errorChecker=this._fieldTextAreaErrorCheck,this.components[a].displayFieldError=()=>{this._displayFieldError(a)}}_fieldDropdown(e,i,s){let a=e.id;a||(a=s+"-dropdown");const n=(e.required?"* ":"")+this._getTextData(e.label,e.labelId);this.fieldErrors.set(a,!1),this.data.data!==void 0&&this.data.data[a]!==void 0&&(e.initValue=this.data.data[a]),this.data.fieldInitValues!==void 0&&this.data.fieldInitValues[a]!==void 0&&(e.initValue=this.data.fieldInitValues[a]);let o=[];if(e.options)for(let l=0;l<e.options.length;l++)o.push(e.options[l]),o[l].label=this._getTextData(e.options[l].label,e.options[l].labelId);else{if(!e.getOptionsFn)throw this.logger.error("The drop down field has to have either the options or the getOptionsFn property."),new Error("Call stack");o=ri[e.getOptionsFn]({readerLevel:this.appState.get("user.userLevel")});for(let l=0;l<o.length;l++)o[l].label=this._getTextData(o[l].label,o[l].labelId)}this.componentsOrder.push(a),this.components[a]=this.addChild(new Ir({id:a,name:e.name,class:e.class,label:n,attach:i,hideMsg:e.hideMsg,disabled:e.disabled,value:e.initValue,options:o,emptyIsAnOption:e.emptyIsAnOption,field:e,changeFn:l=>{const u=l.target.value;this._fieldDropdownErrorCheck({val:u,id:a,field:e,fieldsetId:i}),e.onChangeFn&&e.onChangeFn({val:u,id:a,fieldsetId:i,fieldErrors:this.fieldErrors,field:this.components[a],components:this.components}),this._displayFieldError(a),this.formHasChanges=!0,this.data.onFormChanges&&this.data.onFormChanges()}})),this.components[a].fieldsetId=i,this.components[a].errorChecker=this._fieldDropdownErrorCheck,this.components[a].displayFieldError=()=>{this._displayFieldError(a)}}_fieldCheckbox(e,i,s){let a=e.id;a||(a=s+"-checkbox");const n=(e.required?"* ":"")+this._getTextData(e.label,e.labelId);this.fieldErrors.set(a,!1),this.data.data!==void 0&&this.data.data[a]!==void 0&&(e.initValue=this.data.data[a]===!0||this.data.data[a]==="true"),this.data.fieldInitValues!==void 0&&this.data.fieldInitValues[a]!==void 0&&(e.initValue=this.data.fieldInitValues[a]),this.componentsOrder.push(a),this.components[a]=this.addChild(new ai({id:a,name:e.name,class:e.class,label:n,attach:i,hideMsg:e.hideMsg,disabled:e.disabled,checked:!!e.initValue,field:e,changeFn:o=>{const l=o.target.checked;this._fieldCheckboxErrorCheck({val:l,id:a,field:e,fieldsetId:i}),e.onChangeFn&&e.onChangeFn({val:l,id:a,fieldsetId:i,fieldErrors:this.fieldErrors,field:this.components[a],components:this.components}),this._displayFieldError(a),this.formHasChanges=!0,this.data.onFormChanges&&this.data.onFormChanges()}})),this.components[a].fieldsetId=i,this.components[a].errorChecker=this._fieldCheckboxErrorCheck,this.components[a].displayFieldError=()=>{this._displayFieldError(a)}}_fieldTextInput(e,i,s){let a=e.id;a||(a=s+"-textinput");const n=(e.required?"* ":"")+this._getTextData(e.label,e.labelId),o=this._getTextData(e.placeholder,e.placeholderId);this.data.data!==void 0&&this.data.data[a]!==void 0&&(e.initValue=this.data.data[a]),this.data.fieldInitValues!==void 0&&this.data.fieldInitValues[a]!==void 0&&(e.initValue=this.data.fieldInitValues[a]),this.fieldErrors.set(a,!1),this.componentsOrder.push(a),this.components[a]=this.addChild(new ni({id:a,name:e.name,class:e.class,label:n,placeholder:o,attach:i,hideMsg:e.hideMsg,disabled:e.disabled,maxlength:e.maxLength,value:e.maxLength&&e.initValue?e.initValue.substring(0,parseInt(e.maxLength))||"":e.initValue||"",password:e.password,field:e,changeFn:l=>{const u=l.target.value;this._fieldTextInputErrorCheck({val:u,id:a,field:e,fieldsetId:i}),e.onChangeFn&&e.onChangeFn({val:u,id:a,fieldsetId:i,fieldErrors:this.fieldErrors,field:this.components[a],components:this.components}),this._displayFieldError(a),this.formHasChanges=!0,this.data.onFormChanges&&this.data.onFormChanges()}})),this.components[a].fieldsetId=i,this.components[a].errorChecker=this._fieldTextInputErrorCheck,this.components[a].displayFieldError=()=>{this._displayFieldError(a)}}_getTextData(e,i){if(e||i){let s;return e?typeof e=="string"||e instanceof String?s=e:s=e[this.curLang]:s=h(i),s}return null}}class ge extends v{constructor(e){super(e);c(this,"createDeleteDialog",e=>{const{id:i,title:s,addToMessage:a,formDesc:n,afterFormSentFn:o,onErrorFn:l,onCloseFn:u}=e;this.Dialog||(this.Dialog=this.appState.get("Dialog")),this.Dialog.appear({component:q,componentData:{id:i,appState:this.appState,dialog:this.Dialog,beforeFormSendingFn:()=>{this.Dialog.lock()},formDesc:n,afterFormSentFn:d=>{this.Dialog.disappear(),o&&o(d)},addToMessage:a,onErrorsFn:(d,f)=>{this.Dialog.unlock(),l&&l(d,f),f&&f.status===401&&f.data.loggedIn!==!1&&this.Router.changeRoute("/")},onCloseFn:()=>{u&&u()},onFormChanges:()=>{this.Dialog.changeHappened()},formLoadedFn:()=>{this.Dialog.onResize()},extraButton:{label:h("cancel"),clickFn:d=>{d.preventDefault(),this.Dialog.disappear()}}},title:s})});c(this,"createEmptyFormDialog",e=>{const{id:i,title:s,afterFormSentFn:a,onErrorFn:n,cancelButton:o,onCloseFn:l}=e;this.Dialog||(this.Dialog=this.appState.get("Dialog")),this.Dialog.appear({component:q,componentData:{id:i,appState:this.appState,dialog:this.Dialog,beforeFormSendingFn:()=>{this.Dialog.lock()},afterFormSentFn:u=>{this.Dialog.disappear(),a&&a(u)},onErrorsFn:(u,d)=>{this.Dialog.unlock(),n&&n(u,d),d&&d.status===401&&d.data.loggedIn!==!1&&this.Router.changeRoute("/")},onCloseFn:()=>{l&&l()},onFormChanges:()=>{this.Dialog.changeHappened()},formLoadedFn:()=>{this.Dialog.onResize()},extraButton:o?{label:h("cancel"),clickFn:u=>{u.preventDefault(),this.Dialog.disappear()}}:null},title:s})});c(this,"createEditDialog",e=>{const{id:i,title:s,addToMessage:a,editDataId:n,afterFormSentFn:o,onErrorFn:l,onCloseFn:u}=e;this.Dialog||(this.Dialog=this.appState.get("Dialog")),this.Dialog.appear({component:q,componentData:{id:i,appState:this.appState,editDataId:n,dialog:this.Dialog,beforeFormSendingFn:()=>{this.Dialog.lock()},afterFormSentFn:d=>{this.Dialog.disappear(),o&&o(d)},addToMessage:a,onErrorsFn:(d,f)=>{this.Dialog.unlock(),l&&l(d,f),f&&f.status===401&&f.data&&f.data.loggedIn&&!f.data.noRedirect&&this.Router.changeRoute("/")},onCloseFn:()=>{u&&u()},onFormChanges:()=>{this.Dialog.changeHappened()},formLoadedFn:()=>{this.Dialog.onResize()},extraButton:{label:h("cancel"),clickFn:d=>{d.preventDefault(),this.Dialog.disappear()}}},title:s})});this.appState=this.Router.commonData.appState,this.Dialog=this.appState.get("Dialog")}}class Lr extends v{constructor(e){super(e);c(this,"addListeners",()=>{this.addListener({id:this.id+"-item-click",type:"click",fn:this._gotoRoute})});c(this,"paint",()=>{this.title.draw()});c(this,"_gotoRoute",e=>{e.preventDefault(),this.Router.changeRoute("/uni/"+this.item.universeId)});e.class="list-item",this.template="<button></button>",this.item=e.item,this.index=e.index,this.title=this.addChild({id:this.id+"-title",tag:"h3",text:e.item.title})}}class Er extends v{constructor(e){super(e);c(this,"paint",()=>{for(let e=0;e<this.listComponents.length;e++)this.listComponents[e].draw()});c(this,"updateList",()=>{this._loadData()});c(this,"_loadData",async()=>{this.loading=!0;const e=j()+this.api,i=await P.get(e,{withCredentials:!0});this.list=i.data,this.buildList(),this.rePaint()});c(this,"buildList",()=>{this.clearList();for(let e=0;e<this.list.length;e++)this.listComponents.push(this.addChild(new this.component({id:this.id+"-item-"+e,index:e,item:this.list[e]})))});c(this,"erase",()=>{this.clearList()});c(this,"clearList",()=>{for(let e=0;e<this.listComponents.length;e++)this.listComponents[e].discard(!0);this.listComponents=[]});e.class="item-list",this.api=e.api,this.component=e.component,this.loading=!1,this.list=[],this.listComponents=[],this.updateList()}}class Fr extends v{constructor(e){super(e);c(this,"init",()=>{this.appState.get("updateMainMenu")({tools:[{id:"edit-user-tool",type:"button",text:"New",click:()=>{this._showNewUniDialog()}}]})});c(this,"initMainScreen",()=>{this.viewTitle.draw(),!this.mainScreenInitiated&&(this.mainScreenCompos.push(this.addChild({id:"universe-wrapper",class:"list-wrapper"})),this.mainScreenCompos.push(this.addChild(new L({id:"add-uni-button",attach:"universe-wrapper",attributes:{title:h("create_new_universe")},text:"+",class:["list-add-button","list-item"],click:()=>{this._showNewUniDialog()}}))),this.universesList=this.addChild(new Er({id:"universes-list",api:"/universes",attach:"universe-wrapper",component:Lr})),this.mainScreenCompos.push(this.universesList))});c(this,"paint",()=>{this.initMainScreen();for(let e=0;e<this.mainScreenCompos.length;e++)this.mainScreenCompos[e].draw()});c(this,"_showNewUniDialog",()=>{this.dialogForms.createEmptyFormDialog({id:"new-universe-form",title:h("create_new_universe"),afterFormSentFn:()=>{this.universesList.updateList()},onErrorsFn:()=>{this.universesList.updateList()}})});this.appState=e.appState,this.mainScreenInitiated=!1,this.mainScreenCompos=[],this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title})),this.dialogForms=new ge({id:"landing-dialog-forms"})}}var Ct={"login-extra-links":"_login-extra-links_1261q_1","login-extra-link":"_login-extra-link_1261q_1"};class Mr extends v{constructor(e){super(e);c(this,"init",()=>{this.Dialog=this.appState.get("Dialog"),this.appState.get("serviceSettings").canCreateUser&&this.appState.get("updateMainMenu")({tools:[{id:"register-new-user-button",type:"button",text:h("new_user"),click:()=>{this.Router.changeRoute("/newuser")}}]})});c(this,"paint",()=>{this.viewTitle.draw(),this.appState.get("user.loggedIn")?this.Router.changeRoute("/",{replaceState:!0}):(this.loginFormWrapper.draw(),this.loginForm.draw({formLoadedFn:()=>{console.log("TADAAAAA!"),this._drawForgotPasswordLink()}}))});c(this,"_drawForgotPasswordLink",()=>{this.addChildDraw({id:"extra-links-wrapper",class:Ct["login-extra-links"]}),this.appState.get("serviceSettings.forgotPass")&&this.addChildDraw(new L({id:"forgot-password-button",text:h("forgot_password")+"?",attach:"extra-links-wrapper",class:[Ct["login-extra-link"],"link"],click:()=>{this.Dialog.appear({component:q,componentData:{id:"new-pass-request-form",appState:this.appState,beforeFormSendingFn:()=>{this.Dialog.lock()},afterFormSentFn:()=>{this.Dialog.unlock()},onErrorsFn:()=>{this.Dialog.unlock(),this.appState.get("Toaster").addToast({type:"error",content:`${h("error")}: could not request new password`,delay:0})},formLoadedFn:()=>{this.Dialog.onResize()}},title:h("forgot_password")})}}))});c(this,"_afterLogin",e=>{var i,s;if((i=e==null?void 0:e.data)!=null&&i.proceedToTwoFa){this.appState.set("user.username",e.data.username),this.appState.set("user.loggedIn",!1),this._rememberMe(e);const n=new URLSearchParams(window.location.search).get("r");this.Router.changeRoute("/login/two"+(n?`?r=${n}`:""))}else if((s=e==null?void 0:e.data)!=null&&s.loggedIn){this.appState.set("user.username",e.data.username),this.appState.set("user.loggedIn",!0),this.appState.set("user.userLevel",e.data.userLevel),this.appState.set("user.verified",e.data.accountVerified),this.appState.set("serviceSettings",e.data.serviceSettings),this._rememberMe(e);let a="/";const o=new URLSearchParams(window.location.search).get("r");o&&o.length&&(a=o),this.Toaster.addToast({content:h("you_are_now_logged_in")}),this.Router.changeRoute(a)}});c(this,"_rememberMe",e=>{e.data.rememberMe?(this.ls.setItem("u",e.data.username),this.ls.setItem("ut",new Date().getTime())):(this.ls.removeItem("u"),this.ls.removeItem("ut"))});this.appState=this.Router.commonData.appState,this.ls=new at("bjs_"),this.Toaster=this.appState.get("Toaster"),this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title}));const i={},s=this.ls.getItem("u");s&&(i.username=s,i["remember-me"]=!0),this.loginFormWrapper=this.addChild({id:"login-form-wrapper"}),this.loginForm=this.addChild(new q({id:"beacon-main-login",appState:this.appState,attach:"login-form-wrapper",fieldInitValues:i,afterFormSentFn:this._afterLogin,onErrorsFn:(a,n,o)=>{const l=n.data.cooldownTime;l&&o(h("cooldown_login_message",[l]))},addToMessage:{browserId:this.appState.get("browserId")}}))}}class Ar extends v{constructor(e){super(e);c(this,"paint",()=>{if(this.viewTitle.draw(),this.appState.get("user.loggedIn")){this.Router.changeRoute("/",{replaceState:!0});return}this.login2FAForm.draw()});c(this,"_afterLogin",e=>{var i;if((i=e==null?void 0:e.data)!=null&&i.loggedIn){this.appState.set("user.username",e.data.username),this.appState.set("user.loggedIn",!0),this.appState.set("user.userLevel",e.data.userLevel),this.appState.set("user.verified",e.data.accountVerified),this.appState.set("serviceSettings",e.data.serviceSettings);let s="/";const n=new URLSearchParams(window.location.search).get("r");n&&n.length&&(s=n),this.Toaster.addToast({content:h("you_are_now_logged_in")}),this.Router.changeRoute(s)}});this.appState=this.Router.commonData.appState;const i=this.appState.get("user.username");(!i||this.appState.get("user.loggedIn"))&&this.Router.changeRoute("/",{replaceState:!0}),this.Toaster=this.appState.get("Toaster"),this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title})),this.login2FAForm=this.addChild(new q({id:"beacon-twofa-login",appState:this.appState,afterFormSentFn:this._afterLogin,onErrorsFn:(s,a,n)=>{var l;const o=(l=a==null?void 0:a.data)==null?void 0:l.cooldownTime;o?n(h("cooldown_login_message",[o])):this.Toaster.addToast({type:"error",content:`${h("error")}: could not login`,delay:0})},addToMessage:{username:i,browserId:this.appState.get("browserId")}}))}}class Pr extends v{constructor(e){super(e);c(this,"init",e=>{this.logOut(e.appState)});c(this,"logOut",async e=>{e.set("user.loggedIn",!1),e.set("user.username",null);let i=j()+"/login/access",s={from:"logout"};await P.post(i,s,{withCredentials:!0});const a=this.appState.get("browserId");i=j()+"/login/access",s={from:"checklogin",browserId:a};const n=await P.post(i,s,{withCredentials:!0});e.set("serviceSettings",n.data.serviceSettings);let o="/login";const u=new URLSearchParams(window.location.search).get("r");u&&u.length&&(o+="?r="+u),this.Toaster.addToast({content:h("you_are_now_logged_out")}),this.Router.changeRoute(o)});this.appState=e.appState,this.Toaster=this.appState.get("Toaster")}}class $r extends v{constructor(e){super(e);c(this,"init",()=>{this.appState.get("updateMainMenu")({tools:[{id:"to-login-button",type:"button",text:h("login"),click:()=>{this.Router.changeRoute("/login")}}]})});c(this,"paint",()=>{this.viewTitle.draw(),this.form.draw()});this.appState=e.appState,this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title})),this.form=this.addChild(new q({id:"new-user-form",appState:this.appState}))}}class Br extends v{constructor(e){super(e);c(this,"init",()=>{this.appState.get("updateMainMenu")({tools:[{id:"to-login-button",type:"button",text:h("login"),click:()=>{this.Router.changeRoute("/login")}}]})});c(this,"paint",()=>{if(this.appState.get("user.loggedIn")||!this.appState.get("serviceSettings.forgotPass")){this.Router.changeRoute("/",{replaceState:!0});return}this.viewTitle.draw(),this.form.draw()});this.appState=e.appState,this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title})),this.form=this.addChild(new q({id:"new-pass-request-form",appState:this.appState}))}}class jr extends v{constructor(e){super(e);c(this,"init",()=>{this.viewTitle.showSpinner(!0);const e=this.Router.getRouteParams().token;this.form=this.addChild(new q({id:"reset-password-w-token-form",appState:this.appState,editDataId:e,addToMessage:{token:e}})),this.appState.get("updateMainMenu")({tools:[{id:"to-login-button",type:"button",text:h("login"),click:()=>{this.Router.changeRoute("/login")}}]})});c(this,"paint",()=>{if(this.appState.get("user.loggedIn")){this.Router.changeRoute("/",{replaceState:!0});return}this.viewTitle.draw(),this.form.draw()});this.appState=e.appState,this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title,spinner:!0})),this.form}}class ee{constructor(t){c(this,"getData",async()=>{try{const t=await P.get(this.url,{withCredentials:!0});if(t.data)return this.afterGet&&this.afterGet(t.data),t.data}catch(t){this.onError&&this.onError(t);let e=!1;return t.response&&t.response.data&&t.response.data.loggedIn===!1&&(e=!0),{error:!0,exception:t,redirectToLogin:e}}});if(!t||!t.url){H.error("ReadApi is missing params. At least url is needed.");return}this.url=j()+t.url,this.onError=t.onError,this.afterGet=t.afterGet}}class Or extends v{constructor(e){super(e);c(this,"init",()=>{this.viewTitle.draw();const e=this.Router.getRouteParams().token;if(e.length!==64){this.addChildDraw({id:"not-valid-token",text:h("token_not_valid_or_outdated")}),this.viewTitle.showSpinner(!1);return}this.readApi=new ee({url:"/users/verify/"+e}),this._tryToVerify()});c(this,"_tryToVerify",async()=>{this.viewTitle.showSpinner(!0);const e=await this.readApi.getData();if(this.viewTitle.showSpinner(!1),e&&!e.verified){this.addChildDraw({id:"token-error-msg",text:h("invalid_or_expired_token"),class:"error-text"});return}const i=e.username;this.addChildDraw({id:"email-verified-heading",tag:"h3",text:h("thank_you_username",[i])}),this.addChildDraw({id:"email-verified-msg",text:h("email_and_account_verified")})});this.appState=e.appState,this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title,spinner:!0})),this.readApi}}class Ur extends v{constructor(e){super(e);c(this,"addListeners",()=>{this.addListener({id:"new-email-veri-link-id",type:"click",target:document.getElementById("newVerificationLink"),fn:()=>{this.dialogForms.createEmptyFormDialog({id:"new-email-verification",title:h("send_new_email_verification_link"),onErrorFn:()=>{},cancelButton:!0})}})});c(this,"init",()=>{this.viewTitle.draw(),this.addChildDraw({id:"verification-needed-body",text:h("verification_needed_body"),tag:"p"}),this.addChildDraw({id:"newVerificationLink",template:`<a class="link">
                ${h("new_verification_link")}
            </a>`})});this.appState=e.appState,this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title})),this.dialogForms=new ge({id:"dialog-forms-verification-needed"})}}const we=async r=>{if(!r||!r.route)throw new H("checkRouteAccess: *****").error("Could not check route access, routeData or routeData.route missing."),new Error("Call stack");const t=r.route.id,i=r.commonData.appState.get("serviceSettings._routeAccess");if(i){if(i[t]===!1)return"/login"}else{const s=j()+"/login/access",a={ids:[{from:"form",id:t}]};try{const n=await P.post(s,a,{withCredentials:!0});if(!n.data[t]){if(!n.data.loggedIn){const l="?r="+r.curRoute.replace(r.basePath,"");return"/logout"+l}return"/login"}}catch(n){throw new H("checkRouteAccess: *****").error("Could not check route access",n),new Error("Call stack")}}},qr=async()=>{const r=j()+"/login/access",t={from:"admin"};try{return(await P.post(r,t,{withCredentials:!0})).data}catch(e){throw new H("getAdminRights: *****").error("Could not get admin rights",e),new Error("Call stack")}},Nr="_tabSystem_a5ubp_1";var Vr={tabSystem:Nr};class Hr extends v{constructor(e){super(e);c(this,"paint",()=>{for(let e=0;e<this.buttons.length;e++)this.tabs[e].show!==!1&&(this.buttons[e].draw(),this.buttons[e].data.setLabelInTitle&&this.buttons[e].isCurrent&&(document.title=this.buttons[e].data.text+" | "+document.title))});c(this,"getCurrent",()=>{for(let e=0;e<this.buttons.length;e++)if(this.buttons[e].isCurrent)return this.data.tabs[e]});this.tabs=e.tabs,this.template=`<div class="${Vr.tabSystem}"></div>`,this.buttons=[];for(let i=0;i<e.tabs.length;i++){let s,a=e.tabs[i].id;e.tabs[i].disabled&&(s={disabled:""}),this.buttons.push(this.addChild(new se({id:a,class:e.tabs[i].class,text:e.tabs[i].label,link:e.tabs[i].routeLink,setLabelInTitle:e.tabs[i].setLabelInTitle,attributes:s})))}}}const zr="_settingsGroup_11nyd_1",Gr="_groupTitle_11nyd_10",Wr="_settingsField_11nyd_23",Kr="_settingsField__label_11nyd_28",Jr="_settingsField__value_11nyd_35",Yr="_settingsField__description_11nyd_39",Xr="_editSettingButton_11nyd_42";var ie={settingsGroup:zr,groupTitle:Gr,settingsField:Wr,settingsField__label:Kr,settingsField__value:Jr,settingsField__description:Yr,editSettingButton:Xr};class oi extends v{constructor(e){e.class=ie.settingsGroup;super(e);c(this,"addListeners",()=>{this.addListener({id:this.settingsData.fsId+"-edit-button-listener",type:"click",fn:e=>{const i=parseInt(e.target.getAttribute("i"));if(isNaN(i))return;let s=this.settingsData.fields[i].mongoId;s||(s=this.settingsData.fields[i].id),this.dialogForms.createEditDialog({id:this.data.formId,title:h("edit_setting"),editDataId:s,addToMessage:{mongoId:s},afterFormSentFn:a=>{this.appState.set("serviceSettings",a.data),this.Toaster.addToast({content:h("setting_updated"),type:"success"}),this.updateSettings()},onErrorFn:()=>{this.Toaster.addToast({type:"error",content:`${h("error")}: could not update setting`}),this.updateSettings()}})}})});c(this,"init",()=>{this._createComponents()});c(this,"paint",()=>{this.drawChildren()});c(this,"_createComponents",()=>{this.addChildDraw({id:this.id+"-wrapper",template:`<div class="settings-group__inner">
          <h3 class="${ie.groupTitle}">${h(this.settingsData.fsTitleId)}</h3>
          ${this.settingsData.fsDescriptionId?`<p>${h(this.settingsData.fsDescriptionId)}</p>`:""}
          <div id="${this.fsInnerWrapperId}"></div>
        <div>`}),this.fields=[];for(let e=0;e<this.settingsData.fields.length;e++){const i=this.settingsData.fields[e];this.addChildDraw({id:i.id+"-field-listing",attach:this.fsInnerWrapperId,template:`<div class="${ie.settingsField}">
            <div class="${ie.settingsField__label}">${h(i.labelId)}:</div>
            <div class="${ie.settingsField__value}">${this._displayValue(i)}</div>
            ${i.descriptionId?`<div class="${ie.settingsField__description}">
                  ${h(i.descriptionId)}
                </div>`:""}
            <button
              class="${ie.editSettingButton}"
              id="${this.settingsData.fsId}-edit-button"
              i="${e}"
            >
              ${h("edit")}
            </button>
          </div>`})}});c(this,"_displayValue",e=>{if(e.type==="checkbox")return e.value===!0||e.value==="true"?h("on").toUpperCase():h("off").toUpperCase();if(e.type==="dropdown"){let i=e.options;if(i){for(let s=0;s<i.length;s++)if(String(e.value)===String(i[s].value))return h(i[s].labelId)}}else if(e.password&&e.value.length)return"&#8226;&#8226;&#8226;&#8226;&#8226;&#8226;&#8226;&#8226;";return e.value});this.settingsData=e.settingsData,this.fsInnerWrapperId=this.id+"-fs-inner-wrapper",this.fieldset,this.fields=[],this.appState=this.Router.commonData.appState,this.Dialog=this.appState.get("Dialog"),this.Toaster=this.appState.get("Toaster"),this.dialogForms=new ge({id:this.id+"-dialog-forms-sg"}),this.updateSettings=e.updateSettings}}class Zr extends v{constructor(e){super(e);c(this,"init",()=>{this.viewTitle.draw(),this._loadAdminSettings()});c(this,"_loadAdminSettings",async()=>{const e=await this.formDataApi.getData(),i=await this.settingsDataApi.getData();if(e.redirectToLogin||i.redirectToLogin){this.viewTitle.showSpinner(!1),this.Router.changeRoute("/logout?r="+this.Router.getRoute(!0));return}(e.error||i.error)&&(this.viewTitle.showSpinner(!1),this.addChildDraw({id:"error-getting-admin-settings",template:`<div class="error-text">${h("could_not_get_data")}</div>`})),this._createsettingsComponents(e,i)});c(this,"_createsettingsComponents",(e,i)=>{const s=e.fieldsets;for(let a=0;a<s.length;a++){const n=s[a],o={fsId:n.id,fsTitleId:n.fieldsetTitleId,fsDescriptionId:n.descriptionId,fields:[]};for(let l=0;l<n.fields.length;l++){const u=n.fields[l].id;let d,f;for(let _=0;_<i.length;_++)if(i[_].settingId===u){d=i[_].value,f=i[_].id;break}d||(d=n.fields[l].defaultValue);let m=n.fields[l].options;n.fields[l].getOptionsFn&&(m=ri[n.fields[l].getOptionsFn]({readerLevel:this.appState.get("user.userLevel")})),o.fields.push({id:u,mongoId:f,type:n.fields[l].type,value:d,labelId:n.fields[l].labelId,descriptionId:n.fields[l].descriptionId,defaultValue:n.fields[l].defaultValue,options:m,password:n.fields[l].password})}this.addChildDraw(new oi({id:"admin-settings-g-"+n.id,settingsData:o,formId:"admin-settings-form",updateSettings:this._loadAdminSettings}))}this.viewTitle.showSpinner(!1)});this.template='<div class="settings-tab-view"></div>',this.users=[],this.appState=this.Router.commonData.appState,this.Dialog=this.appState.get("Dialog"),this.settingsComponents=[],this.settingsData=[],this.viewTitle=this.addChild(new D({id:this.id+"-sub-view-title",heading:h("admin_settings"),tag:"h3",spinner:!0})),this.formDataApi=new ee({url:"/forms/admin-settings-form"}),this.settingsDataApi=new ee({url:"/settings/admin"})}}const Qr={defaultFormat:{date:"DD.MM.YYYY",time:"HH.MM",full:"DD.MM.YYYY, 0H:MI"}},Tt=["sun","mon","tue","wed","thu","fri","sat"],It=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],ea=(r,t)=>{let e=Qr.defaultFormat.full;if(t&&(e=t),e=e.replace("DD",r.getDate()),r.getDate()<10?e=e.replace("0D","0"+r.getDate()):e=e.replace("0D",r.getDate()),e.includes("DTH")){const i=r.getDate();let s=h("order_number_suffix_th");i===1?s=h("order_number_suffix_st"):i===2?s=h("order_number_suffix_nd"):i===3&&(s=h("order_number_suffix_rd")),e=e.replace("DTH",i+s)}return e.includes("WD")&&(e=e.replace("WDS",h("weekday_"+Tt[r.getDay()]+"_short")),e=e.replace("WD",h("weekday_"+Tt[r.getDay()]+"_long"))),e=e.replace("MM",r.getMonth()+1),r.getMonth()+1<10?e=e.replace("0M","0"+r.getMonth()+1):e=e.replace("0M",r.getMonth()+1),e.includes("MN")&&(e=e.replace("MNS",h("month_"+It[r.getMonth()]+"_short")),e=e.replace("MN",h("month_"+It[r.getMonth()]+"_long"))),e=e.replace("YYYY",r.getFullYear()),e=e.replace("YY",r.getFullYear().toString().slice(-2)),e=e.replace("HH",r.getHours()),r.getHours()<10?e=e.replace("0H","0"+r.getHours()):e=e.replace("0H",r.getHours()),r.getMinutes()<10?e=e.replace("MI","0"+r.getMinutes()):e=e.replace("MI",r.getMinutes()),r.getSeconds()<10?e=e.replace("SS","0"+r.getSeconds()):e=e.replace("SS",r.getSeconds()),e=e.replace("MS",r.getMilliseconds()),e},me=(r,t)=>{if(!r)return"";const e=new Date(r);return ea(e,t)};class ta extends v{constructor(e){super(e);c(this,"paint",e=>{this._createList(),this._addClickListeners(e)});c(this,"_createList",()=>{let e=`<div class="form-elem__list-wrapper" id="${this.id}-list-wrapper">`;for(let i=0;i<this.selectors.length;i++)this.selectors[i].index=i,this.selectors[i].selected&&(this.maxSelections?this.selectedCount<this.maxSelections?this.selectedCount++:this.selectors[i].selected=!1:this.selectedCount++),e+=`<label
            class="checkboxlist-item${this.selectors[i].selected?" checkboxlist-item--selected":""}"
            for="${this.selectors[i].key}-_-${this.id}-checkboxlist-item">
                <span class="checkboxlist-item__label">${this.selectors[i].label}</span>
                <input
                    type="checkbox"
                    id="${this.selectors[i].key}-_-${this.id}-checkboxlist-item"
                    name="${this.selectors[i].key}-_-${this.id}-checkboxlist-item"
                    class="checkboxlist-item__input"
                    ${this.selectors[i].selected?"checked":""}
                />
            </label>`;e+="</div>",this.addChild(new v({id:this.id+"-checkboxes-list",template:e})).draw()});this.label=e.label,this.selectors=e.selectors,this.minSelections=e.minSelections,this.maxSelections=e.maxSelections,this.selectedCount=0,this.template=`
            <div class="form-elem form-elem--checkboxlist">
                <label class="form-elem__label">${this.label}</label>
                <div class="form-elem__error-msg" id="${this.id}-error-msg"></div>
            </div>`}_addClickListeners(e){for(let i=0;i<this.selectors.length;i++){const s=document.getElementById(this.selectors[i].key+"-_-"+this.id+"-checkboxlist-item");this.addListener({id:`${this.selectors[i].key}-click`,target:s,type:"click",fn:a=>{if(a.target.checked===!1){if(this.minSelections&&this.minSelections>=this.selectedCount){a.target.checked=!0,this.elem.querySelector("#"+this.id+"-error-msg").innerText=h("minimum_x",[this.minSelections]);return}a.target.parentElement.classList.remove("checkboxlist-item--selected"),this.selectedCount--}else{if(this.maxSelections&&this.maxSelections<=this.selectedCount){a.target.checked=!1,this.elem.querySelector("#"+this.id+"-error-msg").innerText=h("maximum_x",[this.maxSelections]);return}a.target.parentElement.classList.add("checkboxlist-item--selected"),this.selectedCount++}this.selectors[i].selected=a.target.checked,this.elem.querySelector("#"+this.id+"-error-msg").innerText="",e.changeFn&&e.changeFn(a,this.selectors)}})}}}const ia="_tableWrapper_18qrd_1",sa="_tableFilterWrapper_18qrd_12",ra="_formElem_18qrd_16",aa="_tableHasStats_18qrd_21",na="_tableFilterClear_18qrd_27",oa="_tableFilterInfo_18qrd_58",la="_tableFilterSettingsButton_18qrd_66",da="_filterSettingsOpen_18qrd_94",ua="_tableFilterSettings_18qrd_66",ha="_filterCaseCheckbox_18qrd_119",ca="_tableStats_18qrd_129",fa="_tableCompo_18qrd_136",ma="_sortColumn_18qrd_147",pa="_sortAvailable_18qrd_156",ga="_sortAsc_18qrd_165",va="_sortDesc_18qrd_169",_a="_unsortable_18qrd_179",wa="_rowSelection_18qrd_183",ba="_tableAccessibilitySort_18qrd_187",ya="_tableRowClickable_18qrd_214",Sa="_rowSelectionSelected_18qrd_217",ka="_rowActionFn_18qrd_223",xa="_tableHoverRowNumber_18qrd_229",Ca="_tableCompEmptyState_18qrd_232",Ta="_tableRowActionButton_18qrd_242",Ia="_tableSmallRowNumber_18qrd_261",Da="_tableShowMoreRow_18qrd_264",Ra="_tableShowMore_18qrd_264",La="_tableShowAll_18qrd_274",Ea="_selectionBox_18qrd_295",Fa="_selectionBoxAll_18qrd_335",Ma="_selectionBoxSome_18qrd_350",Aa="_toolsWrapper_18qrd_358",Pa="_tableToolsButton_18qrd_362";var p={tableWrapper:ia,tableFilterWrapper:sa,formElem:ra,tableHasStats:aa,tableFilterClear:na,tableFilterInfo:oa,tableFilterSettingsButton:la,filterSettingsOpen:da,tableFilterSettings:ua,filterCaseCheckbox:ha,tableStats:ca,tableCompo:fa,sortColumn:ma,sortAvailable:pa,sortAsc:ga,sortDesc:va,unsortable:_a,rowSelection:wa,tableAccessibilitySort:ba,tableRowClickable:ya,rowSelectionSelected:Sa,rowActionFn:ka,tableHoverRowNumber:xa,tableCompEmptyState:Ca,tableRowActionButton:Ta,tableSmallRowNumber:Ia,tableShowMoreRow:Da,tableShowMore:Ra,tableShowAll:La,selectionBox:Ea,selectionBoxAll:Fa,selectionBoxSome:Ma,toolsWrapper:Aa,tableToolsButton:Pa};class Ye extends v{constructor(e){super(e);c(this,"erase",()=>{window.removeEventListener("keyup",this.keyUp)});c(this,"init",e=>{this.tableData=e.tableData,this.allData=[...e.tableData];for(let i=0;i<this.tableData.length;i++)this.tableData[i]._tableIndex=i,this.allData[i]._tableIndex=i});c(this,"paint",()=>{this._filterData(!0),this._drawFilter(),this._drawStats(),this._drawTools();const e=this._createTable();this.tableComp=this.addChild({id:this.id+"-elem",template:e}),this.tableComp.draw(),this._addTableListeners()});c(this,"_showStatsText",()=>{let e="";return this.groupMax&&this.groupMax<this.tableData.length?this.tableData.length!==this.allData.length?e=`${h("showing")} ${Math.min(this.groupMax,this.tableData.length)} / ${this.tableData.length} (${h("total").toLowerCase()} ${this.allData.length})`:e=h("showing")+" "+Math.min(this.groupMax,this.tableData.length)+" / "+this.allData.length:e=this.tableData.length===this.allData.length?h("total")+" "+this.allData.length:h("showing")+" "+this.tableData.length+" / "+this.allData.length,this.selected.length&&(e+="\xA0\xA0\xA0\xA0",e+=`(${h("selected").toLowerCase()} ${this.selected.length})`),e});c(this,"_addTableListeners",()=>{for(let e=0;e<this.tableStructure.length;e++){if(!this.tableStructure[e].unsortable){const i=document.getElementById(this.tableStructure[e].key+"-accessibility-sort-button-"+this.id);i&&this.tableComp.addListener({id:this.tableStructure[e].key+"-sort-listener-acc-"+this.id,target:i,type:"click",fn:this._changeSortFN});const s=document.getElementById(this.tableStructure[e].key+"-sort-header-"+this.id);s&&this.tableComp.addListener({id:this.tableStructure[e].key+"-sort-listener-"+this.id,target:s,type:"click",fn:this._changeSortFN})}this.tableStructure[e].actionFn&&this.tableComp.addListener({id:this.id+"-action-click-"+this.tableStructure[e].key,type:"click",fn:i=>{const s=i.target.id,a=this.id+"-actionFn-"+this.tableStructure[e].key;if(s!==a)return;let n=i.target,o=0,l,u=!0;for(;u;){if(n.localName.toLowerCase()==="tr"){l=n.id;break}if(n=n.parentElement,!n||o>100)break;o++}return l&&l.split("-")[0]==="rowindex"&&this.tableStructure[e].actionFn(i,this.tableData[l.split("-")[1]]),!0}})}this.data.rowClickFn&&this.tableComp.addListener({id:this.id+"-row-click",type:"click",fn:e=>{var o;if(e.target.id.includes(this.id+"-actionFn-")||e.target.id.includes("-inputSelectorBox-")||e.target.classList.contains(p.selectionBox))return;let i=e.target,s=0,a,n=!0;for(;n;){if(i.localName.toLowerCase()==="tr"){a=i.id;break}if(i=i.parentElement,!i||s>100)break;s++}a&&a.split("-")[0]==="rowindex"&&!((o=e.srcElement)!=null&&o.classList.contains(p.rowSelection))&&this.data.rowClickFn(e,this.tableData[a.split("-")[1]])}}),(this.data.selectable===!0||this.data.tools&&this.data.tools.length)&&this.tableComp.addListener({id:this.id+"-row-selection-click",type:"click",fn:e=>{if(!e.target.id.includes("-inputSelectorBox-"))return;if(e.target.id.includes("-header-inputSelectorBox-")){if(e.target.checked)if(this.selected=[],this.groupMax){const l=Math.min(this.groupMax,this.tableData.length);for(let u=0;u<l;u++)this.selected.push(this.tableData[u]._tableIndex)}else for(let l=0;l<this.tableData.length;l++)this.selected.push(this.tableData[l]._tableIndex);else this.selected=[];this._refreshView();return}let i=e.target,s=0,a,n=!0;for(;n;){if(i.localName.toLowerCase()==="tr"){a=i.id;break}if(i=i.parentElement,!i||s>100)break;s++}if(a&&a.split("-")[0]==="rowindex"){const l=this.tableData[a.split("-")[1]]._tableIndex;this.selected.includes(l)?(i.classList.remove(p.rowSelectionSelected),this.selected=this.selected.filter(d=>d!==l)):(i.classList.add(p.rowSelectionSelected),this.selected.push(l));const u=this.elem.querySelector(`th.${p.rowSelection} .${p.selectionBox}`);this.selected.length===0?(u.classList.remove(p.selectionBoxAll),u.classList.remove(p.selectionBoxSome),u.querySelector("input").checked=!1):this.groupMax?this.selected.length===this.groupMax||this.selected.length===this.tableData.length?(u.classList.add(p.selectionBoxAll),u.classList.remove(p.selectionBoxSome),u.querySelector("input").checked=!0):(u.classList.remove(p.selectionBoxAll),u.classList.add(p.selectionBoxSome),u.querySelector("input").checked=!1):this.selected.length===this.tableData.length?(u.classList.add(p.selectionBoxAll),u.classList.remove(p.selectionBoxSome),u.querySelector("input").checked=!0):(u.classList.remove(p.selectionBoxAll),u.classList.add(p.selectionBoxSome),u.querySelector("input").checked=!1)}const o=this.elem.querySelector("#"+this.id+"-stats");o.innerText=this._showStatsText()}}),this.groupMax&&this.groupMax<this.tableData.length&&(this.tableComp.addListener({id:this.id+"-show-more-click",target:this.elem.querySelector("#"+this.id+"-show-more-button"),type:"click",fn:()=>{this.groupMax+=this.data.showGroupSize,this.groupMax>this.allData.length&&(this.groupMax=this.allData.length),this._refreshView()}}),this.tableComp.addListener({id:this.id+"-show-all-click",target:this.elem.querySelector("#"+this.id+"-show-all-button"),type:"click",fn:()=>{this.groupMax=this.allData.length,this._refreshView()}}))});c(this,"_changeSortFN",e=>{const s=e.target.id.split("-")[0];let a="desc",n=!1;for(let o=0;o<this.tableStructure.length;o++)if(this.tableStructure[o].sort&&s!==this.tableStructure[o].key){a=this.tableStructure[o].sort,this.tableStructure[o].sort=null;break}else if(this.tableStructure[o].sort&&s===this.tableStructure[o].key){this.tableStructure[o].sort==="desc"?this.tableStructure[o].sort="asc":this.tableStructure[o].sort="desc",n=!0;break}if(!n){for(let o=0;o<this.tableStructure.length;o++)if(s===this.tableStructure[o].key){this.tableStructure[o].sort=a;break}}this.filterCaretPos=null,this._refreshView()});c(this,"_refreshView",e=>{const i=window.pageXOffset,s=window.pageYOffset;this.data.showStats&&this.statsComp.discard(!0),this.data.filter&&this.filterComp.discard(!0),this.tableComp.discard(!0),this.toolsComp&&this.toolsComp.discard(!0),e?(this.discard(!0),this.reDrawSelf()):this.rePaint(),window.scrollTo(i,s),this.afterChange()});c(this,"_createTable",()=>`<table class="${p.tableCompo}"`+(this.data.fullWidth?' style="width:100%;"':"")+">"+this._createTableHeader()+this._createDataRows()+this._createShowMore()+"</table>");c(this,"_createShowMore",()=>{if(!this.groupMax||this.groupMax>=this.tableData.length)return"";const e=Math.min(this.data.showGroupSize,this.tableData.length-this.groupMax);return`<tr class="${p.tableShowMoreRow}">
            <td colspan="${this.tableStructure.length}">
                <button id="${this.id}-show-more-button" class="${p.tableShowMore}">Show more (${e})</button>
                <button id="${this.id}-show-all-button" class="${p.tableShowAll}">Show all (${this.tableData.length})</button>
            </td>
        </tr>`});c(this,"_createDataRows",()=>{if(!this.tableData.length)return this._emptyState();let e="",i="",s=!1;for(let n=0;n<this.tableStructure.length;n++)if(this.tableStructure[n].sort){i=this.tableStructure[n].key,this.tableStructure[n].sort==="asc"&&(s=!0);break}if(!i)throw this.logger.error("Sorting key missing in table structure.",this.id),new Error("Call stack");this.tableData.sort(this._sortCompare(i,s));let a=0;for(let n=0;n<this.tableData.length&&!(this.groupMax&&n+1>this.groupMax);n++){e+=`<tr${this._createDataRowClass(this.tableData[n]._tableIndex)} id="rowindex-${n}-${this.id}">`;for(let o=0;o<this.tableStructure.length;o++)e+="<td"+this._createCellClasses(this.tableStructure[o])+this._createCellStyle(this.tableStructure[o])+">",e+=this._rowNumberOnHover(n,o),e+=this._formatCellData(this._getCellData(n,o),o),e+="</td>";e+="</tr>",this.selected.includes(this.tableData[n]._tableIndex)&&a++,this.groupMax&&n+2>this.groupMax&&a!==this.selected.length&&this.groupMax++}return`<tbody>${e}</tbody>`});c(this,"_createDataRowClass",e=>{const i=[];return this.data.rowClickFn&&i.push(p.tableRowClickable),this.selected.includes(e)&&i.push(p.rowSelectionSelected),i.length?` class="${i.join(" ")}"`:""});c(this,"_getCellData",(e,i)=>{const s=this.tableData[e],a=this.tableStructure[i].key;if(a==="_rowNumber")return e+1;if(a==="_rowSelection")return this._selectRowCheckbox(this.tableData[e]._tableIndex);if(a.includes(".")){const n=a.split(".");let o=s;for(let l=0;l<n.length;l++)if(o=o[n[l]],!o)return"";return o}else return s[a]});c(this,"_createTableHeader",()=>{if(this.data.hideTableHeader)return"";let e="<thead><tr>";for(let i=0;i<this.tableStructure.length;i++)e+="<th",this.tableStructure[i].unsortable||(e+=` id="${this.tableStructure[i].key}-sort-header-${this.id}"`),e+=this._createCellClasses(this.tableStructure[i],!0)+this._createCellStyle(this.tableStructure[i])+">",e+=this.tableStructure[i].heading?this.tableStructure[i].heading:this.tableStructure[i].key,this.tableStructure[i].unsortable?this.tableStructure[i].key==="_rowSelection"&&(e+=this._selectRowCheckbox(0,!0)):(e+=`<button id="${this.tableStructure[i].key}-accessibility-sort-button-${this.id}" class="${p.tableAccessibilitySort}">`,e+=`${h("sort_by")} ${this.tableStructure[i].heading}`,e+="</button>"),e+="</th>";return e+="</tr></thead>",e});c(this,"_createCellClasses",(e,i)=>{let s=e.classes,a="";if(typeof s=="string"||s instanceof String)e.sort&&(s+=` ${p.sortColumn}`),a=s;else{s=[],e.sort&&s.push(p.sortColumn);let n="";for(let o=0;o<s.length;o++)n.length?n+=" "+s[o]:n=s[o];a=n}return i&&(e.unsortable?a+=` ${p.unsortable}`:a+=` ${p.sortAvailable}`,e.sort&&(this.tableParams.sortColumn=e.key,e.sort==="asc"?(a+=` ${p.sortAsc}`,this.tableParams.sortOrder="asc"):(a+=` ${p.sortDesc}`,this.tableParams.sortOrder="desc"))),e.key==="_row-number"&&(a+=a.length?" ":"",a+=p.rowNumberColumn),e.actionFn&&(a+=a.length?" ":"",a+=p.rowActionFn),e.key==="_rowSelection"&&(a+=a.length?" ":"",a+=p.rowSelection),' class="'+a+'"'});c(this,"_createCellStyle",e=>{let i="";return e.width&&(i+="width:"+e.width+";"),e.minWidth&&(i+="min-width:"+e.minWidth+";"),e.maxWidth&&(i+="max-width:"+e.maxWidth+";"),i.length?' style="'+i+'"':""});c(this,"_formatCellData",(e,i)=>{const s=this.tableStructure[i].type;if(s){if(s==="Date")return!e||!e.length?"":me(e);if(s==="Action"){const a=this.tableStructure[i];return`<button
          id="${this.id}-actionFn-${a.key}"
          class="${p.tableRowActionButton}"
        >
          ${a.actionText?a.actionText:a.heading}
        </button>`}}return e});c(this,"_emptyState",()=>{let e=`<tr class="${p.tableCompEmptyState}">`;return e+=`<td colspan="${this.tableStructure.length}">`,e+=this.data.emptyStateMsg?this.data.emptyStateMsg:h("table_no_rows_empty_state_text"),e+="</td></tr>",`<tbody>${e}</tbody>`});c(this,"_rowNumberOnHover",(e,i)=>this.data.showRowNumbers!=="hover"&&this.data.showRowNumbers!=="small"||i!==0?"":`<span class="${this.data.showRowNumbers==="hover"?p.tableHoverRowNumber:p.tableShowRowNumber}"># ${e+1}</span>`);c(this,"_drawTools",()=>{if(!(!this.data.tools||!this.data.tools.length)){this.toolsComp=this.addChild({id:this.id+"-tools-wrapper",class:p.toolsWrapper});for(let e=0;e<this.data.tools.length;e++)this.data.tools[e].id||this.logger.warn("Table tools should have an id defined",this.data.tools[e]),this.toolsComp.addChild(new L({id:this.id+"-"+this.data.tools[e].id,class:p.tableToolsButton,text:this.data.tools[e].text,attributes:this.data.tools[e].disabled?{disabled:""}:{},click:i=>{const s=this.allData.filter(a=>this.selected.includes(a._tableIndex));this.data.tools[e].clickFn(i,s)}}));this.toolsComp.draw(),this.toolsComp.drawChildren()}});c(this,"_drawStats",()=>{!this.data.showStats||(this.statsComp=this.addChild({id:this.id+"-stats",class:p.tableStats,text:this._showStatsText()}),this.statsComp.draw(),this.elem.classList.add(p.tableHasStats))});c(this,"_drawFilter",()=>{if(!this.data.filter)return;this.filterComp=this.addChild({id:this.id+"-filter-wrapper",class:p.tableFilterWrapper}),(this.filterString.length||this.groupMax&&this.groupMax>this.data.showGroupSize)&&this.filterComp.addChild(new L({id:this.id+"-filter-clear",class:p.tableFilterClear,click:()=>{this.filterString="",this.filterCaretPos=null,this._closeFilterSettings(),this.groupMax=this.data.showGroupSize||0,this._filterData()}}));const e=new ni({id:this.id+"-filter-input",label:"",hideMsg:!0,placeholder:h("filter")+(this.data.filterHotkey?` [${this.data.filterHotkey.toUpperCase()}]`:""),value:this.filterString,changeFn:i=>{const s=i.target.value;this.filterString!==s&&(this.filterString=s,this.filterCaretPos=i.target.selectionStart,this.allData.length<this.largeAmountLimit&&this._filterData())}});this.filterComp.addChild(e),this.allData.length>this.largeAmountLimit&&this.filterComp.addChild({id:this.id+"-filter-info",class:p.tableFilterInfo,text:h("press_enter_to_filter")}),this.filterComp.addChild(new L({id:this.id+"-filter-settings-button",class:p.tableFilterSettingsButton,text:this.filterSelectors.length===this.filterKeys.length?h("filtering_all_columns"):h("filtering_some_columns"),click:()=>{this.filterSettingsOpen=!this.filterSettingsOpen,this.filterSettingsOpen?(this.elem.classList.add(p.filterSettingsOpen),window.addEventListener("click",this._closeFilterSettings)):(this.elem.classList.remove(p.filterSettingsOpen),window.removeEventListener("click",this._closeFilterSettings))}})),this.filterSettingsComp=new v({id:this.id+"-filter-settings",class:p.tableFilterSettings}),this.filterSettingsComp.addChild(new ai({id:this.id+"-filter-settings-case",class:p.filterCaseCheckbox,label:h("match_case"),hideMsg:!0,value:this.filterMatchCase,changeFn:i=>{this.filterMatchCase=i.target.checked,this.filterCaretPos=null,this._filterData()}})),this.filterSettingsComp.addChild(new ta({id:this.id+"-filter-settings-col-selector",label:h("columns_to_filter"),selectors:this.filterSelectors,minSelections:1,changeFn:(i,s)=>{this.filterSelectors=s,this.filterKeys=[];for(let a=0;a<s.length;a++)s[a].selected&&this.filterKeys.push(s[a].key);this.filterCaretPos=null,this._filterData()}})),this.filterComp.addChild(this.filterSettingsComp),this.filterComp.draw(),this.filterComp.drawChildren(!0),this.filterSettingsOpen&&this.elem.classList.add(p.filterSettingsOpen),this.filterCaretPos!==null&&e.focus(this.filterCaretPos),this.elem.style.minHeight=(this.elem.querySelector("#"+this.id+"-filter-settings").offsetHeight+62)/10+"rem",this.elem.classList.add(p.tableHasFilter)});c(this,"_closeFilterSettings",e=>{if(!e){this.filterSettingsOpen=!1,this.elem&&this.elem.classList.remove(p.filterSettingsOpen),window.removeEventListener("click",this._closeFilterSettings);return}const i=e.target.id;let s=e.target,a=0,n=!0;for(;n;){if(s||(s=document.getElementById(i)),!s)return;const o=s.id;if(o===this.id+"-filter-settings"||o===this.id+"-filter-settings-button")return;if(s.localName.toLowerCase()==="html"){this.filterSettingsOpen=!1,this.elem&&this.elem.classList.remove(p.filterSettingsOpen),window.removeEventListener("click",this._closeFilterSettings);return}if(s=s.parentElement,a++,a>100){window.removeEventListener("click",this._closeFilterSettings);return}}});c(this,"_filterData",e=>{if(this.filterString===""){this.tableData=[...this.allData],e||this._refreshView();return}const i=[];let s;for(let o=0;o<this.allData.length;o++){const l=this.allData[o];for(let u=0;u<this.filterKeys.length;u++){const d=this.filterKeys[u];if(d.includes(".")){const f=d.split(".");let m=l;for(let _=0;_<f.length&&m;_++)m=m[f[_]],m||(s="");s=m}else s=l[d];if(!!s){for(let f=0;f<this.tableStructure.length;f++)if(d===this.tableStructure[f].key){s=this._formatCellData(s,f);break}if(this.filterMatchCase){if(s&&s.toString().includes(this.filterString)){i.push(this.allData[o]);break}}else if(s&&s.toString().toLowerCase().includes(this.filterString.toLowerCase())){i.push(this.allData[o]);break}}}}const a=[],n=this.selected.map(o=>{for(let l=0;l<this.allData.length;l++)if(this.allData[l]._tableIndex===o)return this.allData[l]});for(let o=0;o<n.length;o++){let l=!1;for(let u=0;u<i.length;u++)if(i[u]._tableIndex===n[o]._tableIndex){l=!0;break}l||a.push(n[o])}this.groupMax=this.data.showGroupSize||0,this.tableData=i.concat(a),e||this._refreshView()});c(this,"keyUp",e=>{const i=e.target.id,s=this.id+"-filter-input-input";if(i===s&&e.key==="Enter")this._filterData(),this.allData.length<this.largeAmountLimit&&this.elem.querySelector("#"+s).blur();else if(e.key==="Escape"){if(this._closeFilterSettings(),this.filterString===""&&this.filterCaretPos===null&&e.target.id!==s)return;this.allData.length<this.largeAmountLimit&&(this.filterString="",this.filterCaretPos=null,this._filterData()),this.elem.querySelector("#"+s).blur()}else this.data.filter&&this.data.filterHotkey&&e.target.localName.toLowerCase()==="body"&&e.key===this.data.filterHotkey&&this.elem.querySelector("#"+s).focus()});c(this,"_selectRowCheckbox",(e,i)=>{let s,a="";return i?(e="header",this.groupMax?(s=this.groupMax===this.selected.length||this.selected.length===this.tableData.length?"checked":"",a=this.groupMax===this.selected.length||this.selected.length===this.tableData.length?` ${p.selectionBoxAll}`:this.selected.length?` ${p.selectionBoxSome}`:""):(s=this.tableData.length===this.selected.length?"checked":"",a=this.tableData.length===this.selected.length?` ${p.selectionBoxAll}`:this.selected.length?` ${p.selectionBoxSome}`:"")):s=this.selected.includes(e)?"checked":"",`<label for="selection-${e}-inputSelectorBox-${this.id}" class="${p.selectionBox}${a}">
            <input
                type="checkbox"
                name="selection-box-input-${e}-${this.id}"
                id="selection-${e}-inputSelectorBox-${this.id}"
                ${s}
            />
        </label>`});c(this,"getSelected",()=>this.allData.filter(e=>this.selected.includes(e._tableIndex)));c(this,"removeSelectedByTableIndex",e=>{let i=null;for(let s=0;s<this.selected.length;s++)if(e===this.selected._tableIndex){i=s;break}this.selected.splice(i,1)});c(this,"updateTable",e=>{this.data.tableData=e,this.tableData=e,this.allData=[...e];for(let i=0;i<e.length;i++)this.data.tableData[i]._tableIndex=i,this.allData[i]._tableIndex=i;this._refreshView(!0)});c(this,"afterChange",()=>{this.data.afterChange&&(this.tableParams.filterString=this.filterString,this.tableParams.filterMatchCase=this.filterMatchCase,this.tableParams.filterSelectors=this.filterSelectors.map(e=>e.selected),this.tableParams.showRowsAmount=this.groupMax,this.data.afterChange(this.tableParams,this.data.id))});if(this.tableStructure=e.tableStructure,!this.tableStructure)throw this.logger.error("Table component needs to have a tableStructure attribute: Array of Objects ({key:String})."),new Error("Call stack");(e.selectable===!0||e.tools&&e.tools.length)&&(this.tableStructure=[{key:"_rowSelection",heading:" ",unsortable:!0,doNotFilter:!0},...this.tableStructure]),e.showRowNumbers===!0&&(this.tableStructure=[{key:"_rowNumber",heading:"#",unsortable:!0,doNotFilter:!0},...this.tableStructure]),this.groupMax=0,e.showGroupSize&&(this.groupMax=e.tableParams&&e.tableParams.showRowsAmount?e.tableParams.showRowsAmount:e.showGroupSize);for(let i=0;i<this.tableStructure.length;i++)this.tableStructure[i].actionFn?(this.tableStructure[i].unsortable=!0,this.tableStructure[i].doNotFilter=!0):e.tableParams&&e.tableParams.sortColumn&&e.tableParams.sortOrder&&(this.tableStructure[i].key===e.tableParams.sortColumn?this.tableStructure[i].sort=e.tableParams.sortOrder:delete this.tableStructure[i].sort),e.unsortable&&(this.tableStructure[i].unsortable=!0);this.tableData=e.tableData,this.allData=[...e.tableData];for(let i=0;i<this.tableData.length;i++)this.tableData[i]._tableIndex=i,this.allData[i]._tableIndex=i;this.template='<div class="tableWrapper"></div>',this.selected=[],this.toolsComp,this.tableComp,this.tableParams={sortOrder:null,sortColumn:null,filterString:"",filterMatchCase:!1,filterSelectors:[],showRowsAmount:this.groupMax},this.statsComp,this.filterComp,this.filterString=e.tableParams&&e.tableParams.filterString?e.tableParams.filterString:"",this.filterCaretPos=null,this.filterKeys=[],this.filterSettingsOpen=!1,this.filterSettingsComp,this.filterMatchCase=e.tableParams&&e.tableParams.filterMatchCase?e.tableParams.filterMatchCase:!1,this.filterSelectors=this.tableStructure.filter(i=>!i.doNotFilter).map((i,s)=>(i.label=i.heading,i.selected=e.tableParams&&e.tableParams.filterSelectors&&e.tableParams.filterSelectors.length>=s+1?e.tableParams.filterSelectors[s]:!0,i.selected&&this.filterKeys.push(i.key),i)),this.largeAmountLimit=500,window.addEventListener("keyup",this.keyUp)}_sortCompare(e,i){let s=-1;return i&&(s=1),(a,n)=>{const o=e.split(".");let l=a[o[0]],u=n[o[0]];for(let d=1;d<o.length;d++)l&&(l=l[o[d]]),u&&(u=u[o[d]]);if((typeof l=="string"||l instanceof String)&&(typeof u=="string"||u instanceof String)){if(l.toLowerCase()<u.toLowerCase())return s;if(l.toLowerCase()>u.toLowerCase())return-1*s}else{if(l<u)return s;if(l>u)return-1*s}return 0}}}class li extends v{constructor(e){super(e);c(this,"paint",()=>{this.drawChildren()});c(this,"_getEditedTableStructure",()=>[{key:"date",heading:h("date"),sort:"asc",type:"Date"},{key:"by.username",heading:h("edited_by")}]);c(this,"_getLoginsTableStructure",()=>[{key:"date",sort:"asc",type:"Date"}]);this.template=`<div><div class="created-wrapper" id="created-log"><h3>${h("created")}</h3></div><div class="edited-wrapper" id="edited-logs"><h3>${h("edited")}</h3></div><div class="edited-wrapper" id="last-logins-logs"><h3>${h("last_logins")}</h3></div></div>`,this.addChild({id:"created-elem",attach:"created-log",template:this.data.userData.created?`<div><span>${me(this.data.userData.created.date)}</span>`+(this.data.userData.created.publicForm?` (${h("public_form")})`:" by&nbsp;")+"</div>":""}),this.data.userData.created&&!this.data.userData.created.publicForm&&this.addChild(new se({id:"created-by-user-link",link:"/user/"+this.data.userData.created.by.username,class:"link",text:this.data.userData.created.by.username,attach:"created-elem",tag:"a"})),this.data.userData.edited&&this.addChild(new Ye({id:"edited-logs-table",attach:"edited-logs",fullWidth:!0,unsortable:!0,tableData:this.data.userData.edited,tableStructure:this._getEditedTableStructure(),rowClickFn:(i,s)=>{!s.by||!s.by.username||this.Router.changeRoute("/user/"+s.by.username,{forceUpdate:!0})}})),this.data.userData.security&&this.data.userData.security.lastLogins&&this.addChild(new Ye({id:"lastlogins-logs-table",attach:"last-logins-logs",fullWidth:!0,unsortable:!0,hideTableHeader:!0,tableData:this.data.userData.security.lastLogins,tableStructure:this._getLoginsTableStructure()}))}}const $a="_dialogToolsWrapper_11eok_1";var Ba={dialogToolsWrapper:$a};const ja="_userDataItem_zv7nj_1",Oa="_userDataItem__label_zv7nj_4",Ua="_userDataItem__labelSmaller_zv7nj_8",qa="_userDataItem__value_zv7nj_16";var J={userDataItem:ja,userDataItem__label:Oa,userDataItem__labelSmaller:Ua,userDataItem__value:qa};class Na extends v{constructor(e){super(e);c(this,"init",()=>{this.viewTitle.draw(),this._loadMyData()});c(this,"_loadMyData",async()=>{if(this.viewTitle.showSpinner(!0),this.data=await this.readApi.getData(),this.viewTitle.showSpinner(!1),this.data.redirectToLogin){this.Router.changeRoute("/logout?r="+this.Router.getRoute(!0));return}if(this.data.error){this.addChildDraw({id:"error-getting-my-profile",template:`<div class="error-text">${h("could_not_get_data")}</div>`});return}this._createDialogButtons(),this._createElements()});c(this,"_createElements",()=>{const e=[{id:"username",tag:"h1",label:h("username")},{id:"name",label:h("name")},{id:"email",label:h("email")},{id:"id",label:"ID"},{id:"created",label:h("created")},{id:"edited",label:h("last_edited")}];let i=!1;const s=this.appState.get("serviceSettings.useEmailVerification");for(let a=0;a<e.length;a++){const n=e[a];let o=null,l=n.id,u="",d=null,f=this.data.security&&this.data.security.verifyEmail&&this.data.security.verifyEmail.oldEmail,m=this.data.security&&this.data.security.verifyEmail&&this.data.security.verifyEmail.verified;if(n.id==="created")o=me(this.data[n.id].date),l="created_date";else if(n.id==="edited"&&this.data[n.id][0]){const _=this.data[n.id].length-1;o=me(this.data[n.id][_].date)}else n.id==="email"&&s?(u=m?`&nbsp;&nbsp;&nbsp;&nbsp;(${h("verified")})`:`&nbsp;&nbsp;&nbsp;&nbsp;(${h("unverified")}:
                        <a id="newVerificationLink" class="link">
                            ${h("new_verification_link").toLowerCase()}
                        </a>)`,o=this.data.email,d=f?`(${h("current_email_in_use_until_new_verified")}: ${this.data.security.verifyEmail.oldEmail})`:null,m||(i=!0)):o=this.data[n.id];this.addChildDraw({id:"user-data-"+n.id,template:`<div class="${J.userDataItem}">
                    <span class="${J.userDataItem__label}">
                        ${n.label}
                        <span class="${J.userDataItem__labelSmaller}">
                            ${this._showExposure(l)}${u}
                        </span>
                    </span>
                    <div class="${J.userDataItem__value}">${o||"&nbsp;"}</div>
                    ${d?`<span class="${J.userDataItem__labelSmaller}">${d}</span>`:""}
                </div>`})}s&&i&&this.addListener({id:"new-email-veri-link-id",type:"click",target:document.getElementById("newVerificationLink"),fn:()=>{this.dialogForms.createEmptyFormDialog({id:"new-email-verification",title:h("send_new_email_verification_link"),onErrorFn:()=>{},cancelButton:!0})}})});c(this,"_showExposure",e=>{if(this.data.exposure[e]===void 0||this.data.exposure[e]===2)return`(${h("view_right_2")})`;if(this.data.exposure[e]===1)return`(${h("view_right_1")})`;if(this.data.exposure[e]===0)return`(${h("view_right_0")})`});c(this,"_createDialogButtons",()=>{this.addChildDraw({id:"dialog-tools-wrapper",class:Ba.dialogToolsWrapper}),this.addChildDraw(new L({id:"my-profile-edit-button",text:h("edit"),class:"my-profile-button",attach:"dialog-tools-wrapper",click:()=>{this.dialogForms.createEditDialog({id:"edit-profile-form",title:h("edit"),editDataId:"own",afterFormSentFn:()=>{this.Toaster.addToast({content:h("profile_saved"),type:"success"}),this._loadMyData()},onErrorFn:()=>{this._loadMyData()}})}})),this.addChildDraw(new L({id:"my-profile-changepass-button",text:h("change_password"),class:"my-profile-button",attach:"dialog-tools-wrapper",click:()=>{this.Dialog.appear({component:q,componentData:{id:"change-password-form",appState:this.appState,beforeFormSendingFn:()=>{this.Dialog.lock()},afterFormSentFn:()=>{this.Dialog.disappear(),this.Toaster.addToast({content:h("profile_password_changed"),type:"success"}),this._loadMyData()},onErrorsFn:()=>{this.Dialog.unlock()},formLoadedFn:()=>{this.Dialog.onResize()},extraButton:{label:h("cancel"),clickFn:e=>{e.preventDefault(),this.Dialog.disappear()}}},title:h("change_password")})}})),this.appState.get("serviceSettings.canSetExposure")&&this.addChildDraw(new L({id:"my-profile-exposure-button",text:h("profile_exposure"),class:"my-profile-button",attach:"dialog-tools-wrapper",click:()=>{this.dialogForms.createEditDialog({id:"edit-expose-profile-form",title:h("profile_exposure"),editDataId:"own",afterFormSentFn:()=>{this.Toaster.addToast({content:h("profile_exposure_changed"),type:"success"}),this._loadMyData()},onErrorFn:()=>{this._loadMyData()}})}})),this.addChildDraw(new L({id:"my-profile-logs-button",text:h("logs"),class:"my-profile-button",attach:"dialog-tools-wrapper",click:()=>{this.Dialog.appear({component:li,componentData:{id:"user-logs-dialog",userData:this.data},title:h("logs")})}})),this.addChildDraw(new L({id:"my-profile-delete-button",text:h("delete"),class:"my-profile-button",attach:"dialog-tools-wrapper",click:()=>{this.Dialog.appear({component:q,componentData:{id:"delete-profile-form",appState:this.appState,beforeFormSendingFn:()=>{const e=window.confirm(h("delete_profile_warning_text"));return e&&this.Dialog.lock(),e},afterFormSentFn:()=>{this.Dialog.disappear(),this.Toaster.addToast({content:h("profile_deleted"),type:"info",delay:0}),this.Router.changeRoute("/logout")},onErrorsFn:()=>{this.Dialog.unlock()},formLoadedFn:()=>{this.Dialog.onResize()},extraButton:{label:h("cancel"),clickFn:e=>{e.preventDefault(),this.Dialog.disappear()}}},title:h("delete")})}}))});this.template='<div class="settingsTabView"></div>',this.appState=this.Router.commonData.appState,this.Dialog=this.appState.get("Dialog"),this.Toaster=this.appState.get("Toaster"),this.viewTitle=this.addChild(new D({id:this.id+"-sub-view-title",heading:h("my_profile"),tag:"h3",spinner:!0})),this.data,this.readApi=new ee({url:"/users/own/profile"}),this.dialogForms=new ge({id:"dialog-forms-my-profile"}),this.dataComps=[]}}class Va extends v{constructor(e){super(e);c(this,"init",()=>{this.viewTitle.draw(),this._loadMySettings()});c(this,"_loadMySettings",async()=>{const e=await this.formDataApi.getData(),i=await this.settingsDataApi.getData();if(e.redirectToLogin||i.redirectToLogin){this.viewTitle.showSpinner(!1),this.Router.changeRoute("/logout?r="+this.Router.getRoute(!0));return}(e.error||i.error)&&(this.viewTitle.showSpinner(!1),this.addChildDraw({id:"error-getting-my-settings",template:`<div class="error-text">${h("could_not_get_data")}</div>`})),this._createsettingsComponents(e,i)});c(this,"_createsettingsComponents",(e,i)=>{const s=e.fieldsets;for(let a=0;a<s.length;a++){const n=s[a],o={fsId:n.id,fsTitleId:n.fieldsetTitleId,fsDescriptionId:n.descriptionId,fields:[]};for(let l=0;l<n.fields.length;l++){const u=n.fields[l].id;let d,f;for(let m=0;m<i.length;m++)if(i[m].settingId===u){d=i[m].value,f=i[m].id;break}d||(d=n.fields[l].defaultValue),o.fields.push({id:u,mongoId:f,type:n.fields[l].type,value:d,labelId:n.fields[l].labelId,descriptionId:n.fields[l].descriptionId,defaultValue:n.fields[l].defaultValue,options:n.fields[l].options})}this.addChildDraw(new oi({id:"user-settings-g-"+n.id,settingsData:o,formId:"user-settings-form",updateSettings:this._loadMySettings}))}this.viewTitle.showSpinner(!1)});this.template='<div class="settings-tab-view"></div>',this.users=[],this.appState=this.Router.commonData.appState,this.Dialog=this.appState.get("Dialog"),this.settingsComponents=[],this.settingsData=[],this.viewTitle=this.addChild(new D({id:this.id+"-sub-view-title",heading:h("my_settings"),tag:"h3",spinner:!0})),this.formDataApi=new ee({url:"/forms/user-settings-form"}),this.settingsDataApi=new ee({url:"/settings"})}}const Ha=r=>{let t=0;for(let e=0;e<r.length;e++){const i=r.charCodeAt(e);t=(t<<5)-t+i,t=t&t}return t<0?Math.abs(t):t},Dt=r=>{if(r.commonData.appState.get("user.verified")===!1)return"/u/verificationneeded"};class za extends v{constructor(e){super(e);c(this,"init",()=>{this.viewTitle.draw(),this.appState.get("serviceSettings").canCreateUser&&this.appState.get("updateMainMenu")({tools:[{id:"register-new-user-tool-button",type:"button",text:h("new_user"),click:()=>{this.dialogForms.createEmptyFormDialog({id:"new-user-form",title:h("new_user"),afterFormSentFn:async()=>{this.Toaster.addToast({type:"success",content:h("new_user_registered")}),await this._loadUsers()},onErrorsFn:async()=>{this.Toaster.addToast({type:"error",content:`${h("error")}: could not register new user`}),await this._loadUsers()}})}}]})});c(this,"paint",()=>{this.usersTable.draw({tableData:this.users.length?this.users:[]})});c(this,"_loadUsers",async()=>{if(this.viewTitle.showSpinner(!0),this.users=await this.usersDataApi.getData(),this.users.redirectToLogin){this.viewTitle.showSpinner(!1),this.Router.changeRoute("/logout?r="+this.Router.getRoute(!0));return}this.users.error&&(this.viewTitle.showSpinner(!1),this.addChildDraw({id:"error-getting-my-settings",template:`<div class="error-text">${h("could_not_get_data")}</div>`})),this.usersTable.updateTable(this.users),this.viewTitle.showSpinner(!1)});c(this,"_deleteUsers",async e=>{if(!e||!e.length)return;const i=j()+"/users";try{return await P.delete(i,{withCredentials:!0,users:e})}catch(s){throw new H("Delete users: *****").error("Could not delete users",s,e),new Error("Call stack")}});c(this,"_getTableStructure",()=>[{key:"username",heading:h("username"),sort:"desc"},{key:"name",heading:h("name")},{key:"email",heading:h("email")},{key:"userLevel",heading:h("user_level")},{key:"created.date",heading:h("created"),type:"Date"},{key:"editUser",heading:h("edit"),type:"Action",actionFn:(i,s)=>{this.dialogForms.createEditDialog({id:"edit-user-form",title:h("edit_user")+": "+s.username,editDataId:s.id,addToMessage:{userId:s.id},afterFormSentFn:async()=>{this.Toaster.addToast({type:"success",content:h("user_updated")}),await this._loadUsers()},onErrorsFn:async()=>{this.Toaster.addToast({type:"error",content:`${h("error")}: could not edit user`}),await this._loadUsers()}})}},{key:"deleteUser",heading:h("delete"),type:"Action",actionText:h("del"),actionFn:(i,s)=>{this.dialogForms.createDeleteDialog({id:"delete-users",title:h("delete_user")+": "+s.username,formDesc:h("delete_single_user_confirmation",[s.username]),addToMessage:{users:[s.id]},afterFormSentFn:async()=>{this.Toaster.addToast({type:"success",content:h("user_deleted")}),await this._loadUsers()},onErrorsFn:async()=>{this.Toaster.addToast({type:"error",content:`${h("error")}: could not delete user`}),await this._loadUsers()}})}}]);c(this,"_listUsernames",e=>{let i="";for(let s=0;s<e.length;s++)s!==0&&(i+=", "),i+=e[s].username;return i});this.template='<div class="settings-tab-view"></div>',this.users=[],this.appState=this.Router.commonData.appState,this.Dialog=this.appState.get("Dialog"),this.Toaster=this.appState.get("Toaster");const i=this.appState.get("serviceSettings").tableSorting;let s;i==="session"?s=new Qt("bjs_"):i==="browser"&&(s=new at("bjs_"));let a,n,o;s&&(a=this.appState.get("user.username"),n=Ha(a+e.id),o=JSON.parse(s.getItem(n))),this.viewTitle=this.addChild(new D({id:this.id+"-sub-view-title",heading:h("users"),tag:"h3",spinner:!0})),this.usersDataApi=new ee({url:"/users"}),this.dialogForms=new ge({id:"settings-users-dialog-forms"}),this.usersTable=this.addChild(new Ye({id:"users-table",fullWidth:!0,tableData:this.users,showStats:!0,selectable:!0,showRowNumbers:!0,showGroupSize:25,tableParams:o,afterChange:l=>{if(!a||!s)return;const u=JSON.stringify(l);s.setItem(n,u)},filterHotkey:"f",filter:!0,tableStructure:this._getTableStructure(),rowClickFn:(l,u)=>{this.Router.changeRoute("/user/"+u.username)},tools:[{id:"multi-delete-tool",text:h("delete"),clickFn:(l,u)=>{if(!u.length){this.Toaster.addToast({type:"warning",content:h("select_one_or_more_users")});return}this.dialogForms.createDeleteDialog({id:"delete-users",title:h("delete_users")+": ",formDesc:h("delete_many_users_confirmation")+`
`+this._listUsernames(u),addToMessage:{users:u.map(d=>d.id)},afterFormSentFn:async()=>{this.Toaster.addToast({type:"success",content:h("users_deleted")}),await this._loadUsers()},onErrorsFn:async()=>{this.Toaster.addToast({type:"error",content:`${h("error")}: could not delete multiple users`}),await this._loadUsers()}})}}]})),this._loadUsers()}}class Ga extends v{constructor(e){super(e);c(this,"init",async()=>{const e=this.Router.curRouteData.params;if(e&&e.tab==="default"){this.Router.changeRoute("/settings/"+this.curTab,{forceUpdate:!0,replaceState:!0});return}if(this.adminRights=await qr(),this.adminRights.loggedIn===!1){this.Router.changeRoute("/logout?r="+this.Router.getRoute(!0));return}this._defineTabs(),this.tabSystem=this.addChild(new Hr({id:"settings-tabs",tabs:this.tabs})),this.rePaint()});c(this,"paint",()=>{if(this.viewTitle.draw(),this.tabSystem){this.tabSystem.draw();const e=this.tabSystem.getCurrent();e?this.addChild(new e.component({id:"view-"+e.id})).draw():this.addChild(new ot({id:"four-o-one-tab",title:"401"})).draw()}});c(this,"_defineTabs",()=>{const e=this.appState.get("user.verified")!==!1,i=[{id:"my-profile",label:h("my_profile"),component:Na},{id:"my-settings",label:h("my_settings"),show:e,component:Va},{id:"users",label:h("users"),adminUseRights:"read-users",show:e&&this.adminRights.useRights.includes("read-users"),component:za},{id:"admin-settings",label:h("admin_settings"),adminUseRights:"read-users",show:e&&this.adminRights.useRights.includes("read-users"),component:Zr}];for(let s=0;s<i.length;s++)this.tabs.push(xe(ae({},i[s]),{routeLink:"/settings/"+i[s].id,setLabelInTitle:!0}))});const i="my-profile";this.curTab=i,this.template="<div></div>",this.adminRights={},this.tabSystem,this.tabs=[],this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:e.title})),this.appState=this.Router.commonData.appState}}class Wa extends v{constructor(e){super(e);c(this,"init",()=>{this.userId=this.Router.getRouteParams().user,this.readApi=new ee({url:"/users/"+this.userId}),this.viewTitle.draw(),this._loadUserData()});c(this,"_loadUserData",async()=>{if(this.userData=null,this.viewTitle.showSpinner(!0),this.userData=await this.readApi.getData(),this.viewTitle.showSpinner(!1),this.userData.redirectToLogin){this.Router.changeRoute("/logout?r="+this.Router.getRoute(!0));return}if(this.userData.error&&this.addChildDraw({id:"error-getting-one-user",template:`<div class="error-text">${h("could_not_get_data")}</div>`}),this.userData.username===this.appState.get("user.username")){this.Router.changeRoute("/settings/my-profile",{replaceState:!0});return}if(this.userData.error&&this.userData.exception){const e=this.userData.exception,i=e.response.status;if(this.appState.get("updateMainMenu")({tools:[]}),i===401)this.addChildDraw(new ot({id:"one-user-401"}));else if(i===404)this.addChildDraw(new si({id:"one-user-404",bodyText:h("user_not_found")}));else throw this.addChildDraw({id:"one-user-bigerror",template:`<div><h2>${h("error")}</h2></div>`}),new H("Get one user: *****").error("Could not get users data",e.response),new Error("Call stack");return}this._createTools(),this._createElements()});c(this,"_createElements",()=>{const e=[{id:"username",tag:"h1",label:h("username")},{id:"name",label:h("name")},{id:"email",label:h("email")},{id:"id",label:"ID"},{id:"userLevel",label:h("user_level")},{id:"created",label:h("created")},{id:"edited",label:h("last_edited")}];for(let i=0;i<e.length;i++){const s=e[i],a=s.id;let n,o="",l="div";if(s.tag&&(l=s.tag),this.userData[a]!==void 0){if(a==="created")n=me(this.userData[a].date);else if(a==="edited"&&this.userData[a][0]){const u=this.userData[a].length-1;n=me(this.userData[a][u].date)}else a==="userLevel"?a==="userLevel"&&(n=h("user_level_"+this.userData[a])):a==="email"&&this.appState.get("serviceSettings.useEmailVerification")?(n=this.userData[a],o=this.userData.security&&this.userData.security.verifyEmail&&this.userData.security.verifyEmail.verified?`&nbsp;&nbsp;&nbsp;&nbsp;(${h("verified")})`:`&nbsp;&nbsp;&nbsp;&nbsp;(${h("unverified")})`):n=this.userData[a];n.length||(n="&nbsp;"),this.addChildDraw({id:"user-data-"+a,template:`<div class="${J.userDataItem}">
            <span class="${J.userDataItem__label}">
                ${s.label}
                <span class="${J.userDataItem__labelSmaller}">${o}</span>
              </span>
            <${l} class="${J.userDataItem__value}">${n}</${l}>
          </div>`})}}});c(this,"_createTools",()=>{let e=null;const i=this.appState.get("user").loggedIn,s=this.appState.get("updateMainMenu");if(i&&this.userData.id){const a=this.Router.commonData.appState.get("Dialog");e=[{id:"edit-user-tool",type:"button",text:h("edit"),click:()=>{!this.userData||this.dialogForms.createEditDialog({id:"edit-user-form",title:h("edit_user")+": "+this.userData.username,editDataId:this.userData.id,addToMessage:{userId:this.userData.id},afterFormSentFn:()=>{this.appState.get("Toaster").addToast({type:"success",content:h("user_updated")}),this._loadUserData()},onErrorFn:()=>{this.appState.get("Toaster").addToast({type:"error",content:`${h("error")}: could not edit user`,delay:0}),this._loadUserData()}})}},{id:"user-exposure-tool",type:"button",text:h("exposure"),click:()=>{!this.userData||this.dialogForms.createEditDialog({id:"edit-expose-profile-form",title:h("profile_exposure")+": "+this.userData.username,editDataId:this.userData.id,addToMessage:{userId:this.userData.id},afterFormSentFn:()=>{this.appState.get("Toaster").addToast({type:"success",content:h("user_updated")}),this._loadUserData()},onErrorFn:()=>{this.appState.get("Toaster").addToast({type:"error",content:`${h("error")}: could not edit user exposure`,delay:0}),this._loadUserData()}})}},{id:"user-logs-tool",type:"button",text:h("logs"),click:()=>{!this.userData||a.appear({component:li,componentData:{id:"user-logs-dialog",userData:this.userData}})}}]}s({backButton:!0,tools:e})});this.template='<div class="oneUser"><div id="back-button-holder"></div></div>',this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:h("user"),spinner:!0})),this.userId,this.userData,this.appState=this.Router.commonData.appState,this.readApi,this.dialogForms=new ge({id:"dialog-forms-one-user"}),this.Toaster=this.appState.get("Toaster")}}class Ka extends v{constructor(e){super(e);c(this,"init",()=>{if(this.Router.curRouteData.params&&this.Router.curRouteData.params.universeId&&Se.parsers.validateSimpleId(this.Router.curRouteData.params.universeId))this.universeId=this.Router.curRouteData.params.universeId,this.getData();else{const e="/404/universe/"+(this.Router.curRouteData.params?this.Router.curRouteData.params.universeId:"");this.Router.changeRoute(e);return}});c(this,"paint",()=>{this.viewTitle.draw({spinner:!0})});c(this,"getData",async()=>{this.viewTitle.showSpinner(!0);const e="/universes/"+this.universeId,s=(await P.get(j()+e,{withCredentials:!0})).data;if(!s){this.Router.changeRoute("/404/universe/"+this.universeId);return}this.viewTitle.showSpinner(!1),setTimeout(()=>{this.viewTitle.updateHeading(s.title)},this.viewTitle.spinnerFadeTime+this.viewTitle.spinnerFadeTime/4)});this.appState=e.appState,this.universeId,this.viewTitle=this.addChild(new D({id:this.id+"-view-title",heading:""}))}}const Ja=Se.CONFIG.UI,Ya={langFn:h,routes:[{route:"/",id:"route-landing",source:Fr,titleId:"route_title_landing",beforeDraw:async r=>{const t=await we(r),e=Dt(r);return t||e}},{route:"/login",id:"route-login",source:Mr,titleId:"route_title_login"},{route:"/login/two",id:"route-twofa-login",source:Ar,titleId:"route_title_twofa_login"},{route:"/uni",redirect:"/"},{route:"/uni/:universeId",id:"route-universe",source:Ka,titleId:"route_universe",beforeDraw:async r=>{const t=await we(r),e=Dt(r);return t||e}},{route:"/newuser",id:"route-new-user",source:$r,titleId:"route_title_new_user",beforeDraw:async r=>await we(r)},{route:"/u/newpassrequest",id:"route-new-pass-request",source:Br,titleId:"new_password"},{route:"/u/newpass/:token",id:"route-new-pass",source:jr,titleId:"new_password"},{route:"/u/verify/:token",id:"route-verify",source:Or,titleId:"verify_account"},{route:"/u/verificationneeded",id:"route-verifyneeded",source:Ur,titleId:"verification_needed",beforeDraw:async r=>await we(r)},{route:"/settings",redirect:"/settings/default"},{route:"/user/:user",id:"route-one-user",source:Wa,titleId:"route_title_user"},{route:"/settings/:tab",id:"route-settings",source:Ga,titleId:"route_title_settings",beforeDraw:async r=>await we(r)},{route:"/logout",id:"route-logout",titleId:"route_title_login",source:Pr},{route:"/404/:type/:data",id:"route-four-o-four",source:si,is404:!0,titleId:"route_title_404"},{route:"/401",id:"route-four-o-one",source:ot,titleId:"route_title_401"}]},ce=Object.assign({},Ya,Le,Ja),Xa="_mainMenu_i1ynv_1",Za="_navMenu_i1ynv_29",Qa="_homeButton_i1ynv_33",en="_mainBackButton_i1ynv_37",tn="_showBackButton_i1ynv_56",sn="_toolMenu_i1ynv_83",rn="_showToolMenu_i1ynv_117",an="_stickyMenu_i1ynv_122";var E={mainMenu:Xa,navMenu:Za,homeButton:Qa,mainBackButton:en,showBackButton:tn,toolMenu:sn,showToolMenu:rn,stickyMenu:an};class nn extends v{constructor(e){super(e);c(this,"paint",()=>{this.homeButton.draw(),this._hideTools(),this._drawStickyMenu()});c(this,"_hideTools",()=>{this._drawOldTools();const e=this.elem.querySelector("#tool-menu"),i=this.elem.querySelector("#nav-menu");this.menuState.backButton&&i.classList.add(E.showBackButton),clearTimeout(this.nudgeTimer),clearTimeout(this.drawTimer),this.nudgeTimer=setTimeout(()=>{i.classList.remove(E.showBackButton),e.classList.remove(E.showToolMenu)},20),this.drawTimer=setTimeout(()=>{const s=this.menuState.toolsMenu;for(let n=0;n<s.length;n++)this.discardChild(s[n].id);let a=[];this.menuState.newMenuState&&this.menuState.newMenuState.tools&&(a=[...this.menuState.newMenuState.tools],this.menuState.newMenuState.tools=[]),this._drawTools(a,e),this._checkBackButton(i)},this.switchTime+100)});c(this,"_drawOldTools",()=>{this.backButton.draw();for(let e=0;e<this.menuState.toolsMenu.length;e++){const i=this.menuState.toolsMenu[e].id;this.children[i]&&this.children[i].draw()}});c(this,"_drawTools",(e,i)=>{for(let s=0;s<e.length;s++){const a=e[s];a.attach="tool-menu";const n=this.addChild(new L(a));this.menuState.toolsMenu.push(n),n.draw()}i.classList.add(E.showToolMenu)});c(this,"_drawStickyMenu",()=>{this.appState.get("user.loggedIn")&&(this.settingsButton.draw(),this.logoutButton.draw())});c(this,"_checkBackButton",e=>{const i=this.Router.getCurHistoryState();if(!this.Router.prevRoute&&i.backButton===void 0){const s=document.referrer.split("/");let a="";s.length>2&&(a=s[2].split(":")[0]),a!=location.hostname&&(this.menuState.newMenuState.backButton=!1),this.Router.setCurHistoryState({backButton:this.menuState.newMenuState.backButton})}i.backButton!==void 0&&(this.menuState.newMenuState.backButton=i.backButton),this.menuState.newMenuState.backButton?(e.classList.add(E.showBackButton),this.menuState.newMenuState.backButton=!1,this.menuState.backButton=!0,this.backButtonPressed=!1):(e.classList.remove(E.showBackButton),this.menuState.backButton=!1),this.Router.setCurHistoryState({backButton:this.menuState.backButton})});c(this,"_goBack",()=>{this.backButtonPressed||!this.menuState.backButton||(this.backButtonPressed=!0,window.history.back())});c(this,"updateMainMenu",e=>{this.menuState.newMenuState=e,e.backButton&&(this.backButton.discard(!0),this.backButton=this.addChild(new L({id:"main-back-button",class:E.mainBackButton,html:"&#x2190;",attach:"nav-menu",click:this._goBack})),this.backButton.draw())});this.appState=e.appState,this.switchTime=300,this.nudgeTimer,this.drawTimer,this.backButtonPressed=!1,this.template=`<div class="${E.mainMenu}">
      <div id="nav-menu" class="${E.navMenu}" style="transition-duration:${this.switchTime}ms"></div>
      <div id="tool-menu" class="${E.toolMenu} ${E.showToolMenu}" style="transition-duration:${this.switchTime}ms"></div>
      <div id="sticky-menu" class="${E.stickyMenu}"></div>
    </div>`,this.homeButton=this.addChild(new se({id:"home-button",class:E.homeButton,link:"/",attach:"nav-menu",text:"Home"})),this.settingsButton=this.addChild(new se({id:"settings-button",link:"/settings",attach:"sticky-menu",text:"Settings"})),this.logoutButton=this.addChild(new se({id:"logout-button",link:"/logout",attach:"sticky-menu",text:"Logout"})),this.backButton=this.addChild(new L({id:"main-back-button",class:E.mainBackButton,html:"&#x2190;",attach:"nav-menu",click:this._goBack})),this.menuState={backButton:!1,toolsMenu:[],newMenuState:[]},this.appState.set("updateMainMenu",this.updateMainMenu)}}const on="_bbar_j5xgb_1";var ln={bbar:on};class dn extends v{constructor(e){super(e);c(this,"paint",()=>{this.mainMenu.draw()});c(this,"onResize",()=>{const e=window.innerWidth,i=window.innerHeight;e>i?(this.elem.style.width=ce.bbarSize+"px",this.elem.style.height=i+"px"):(this.elem.style.width=e+"px",this.elem.style.height=ce.bbarSize+"px")});this.template=$s,this._addToCSSClass(ln.bbar),this.appState=e.appState,this.mainMenu=this.addChild(new nn({id:"main-menu",appState:e.appState}))}addListeners(){this.appState.set("resizers.bbar",this.onResize),this.onResize()}}class un extends v{constructor(e){super(e);c(this,"paint",()=>{this.toggle(!0)});this.fadeTime=200,this.template="<div>Loading..</div>",e.style={transitionDuration:this.fadeTime+"ms"}}toggle(e){this.elem=document.getElementById(this.id),e?this.elem.classList.add("show"):this.elem.classList.remove("show")}show(){this.toggle(!0)}hide(e){this.toggle(!1),e&&setTimeout(()=>{e()},this.fadeTime)}}var hn=`<div>\r
  <div id="overlays" class="overlays"></div>\r
  <div id="content-area" class="content-area"></div>\r
</div>\r
`;const cn="_dialog_j784p_1",fn="_dialogBox_j784p_11",mn="_innerScroller_j784p_37",pn="_innerBox_j784p_43",gn="_saveButton_j784p_84",vn="_confirmButtonDelete_j784p_91",_n="_confirmButton_j784p_91",wn="_cancelButton_j784p_102",bn="_confirmationDialog_j784p_106",yn="_hasTitle_j784p_113",Sn="_mainTitle_j784p_116",kn="_closeButton_j784p_125",xn="_appear_j784p_140",Cn="_dialogLocked_j784p_148",Tn="_confirmationForm_j784p_161";var O={dialog:cn,dialogBox:fn,innerScroller:mn,innerBox:pn,saveButton:gn,confirmButtonDelete:vn,confirmButton:_n,cancelButton:wn,confirmationDialog:bn,hasTitle:yn,mainTitle:Sn,closeButton:kn,appear:xn,dialogLocked:Cn,confirmationForm:Tn};class In extends v{constructor(e){super(e);c(this,"addListeners",()=>{this.appState.set("resizers.dialog",this.onResize),this.addListener({id:this.id+"-background-click",type:"click",fn:this._closeDialogClick})});c(this,"paint",e=>{for(let i=0;i<this.dialogCompos.length;i++)this.dialogCompos[i].draw();this.dialogTitle&&(this.dialogTitle.draw(),this.elem.classList.add(O.hasTitle)),this.compoToShow&&this.compoToShow.draw(),e.appear&&setTimeout(()=>{this.elem&&this.elem.classList.add(O.appear)},20),this._setSizes()});c(this,"appear",e=>{var i;this.isShowing&&this.disappear(),!this.isTransitioning&&(this.isTransitioning=!0,this.hasChanges=!1,this.compoToShow=this.addChild(new e.component(e.componentData)),this.compoToShow.data.attach=this.id+"-inner-box",e.title&&(this.dialogTitle=this.addChild({id:this.id+"-main-title",class:O.mainTitle,tag:"h3",text:e.title,attach:this.id+"-box-wrapper"})),(i=e.componentData)!=null&&i.onCloseFn&&(this.onCloseFn=e.componentData.onCloseFn),this.draw({appear:!0}),this.isShowing=!0,setTimeout(()=>{this.isTransitioning=!1},this.transitionTime+50))});c(this,"disappear",()=>{!this.elem||this.isTransitioning||(this.isTransitioning=!0,this.elem.classList.remove(O.appear),this.isShowing=!1,this.hasChanges=!1,this.appState.remove("resizers.dialog"),this.onCloseFn&&this.onCloseFn(),setTimeout(()=>{this.unlock(),this.dialogTitle=null,this.discard(!0,()=>{setTimeout(()=>{this.isTransitioning=!1},300)})},this.transitionTime))});c(this,"lock",()=>{!this.elem||(this.elem.classList.add(O.dialogLocked),this.isLocked=!0)});c(this,"unlock",()=>{!this.elem||(this.elem.classList.remove(O.dialogLocked),this.isLocked=!1)});c(this,"_closeDialogClick",e=>{if(this.isLocked)return;e.stopPropagation();const i=e.target.id;(i===this.id||i===this.id+"-close-button")&&(this.hasChanges?confirm(h("changes_will_be_lost_prompt"))&&this.disappear():this.disappear())});c(this,"_setSizes",()=>{if(!this.elem)return;const e=this.elem.querySelector("#"+this.id+"-main-title"),i=this.elem.querySelector("#"+this.id+"-inner-scroller");i.style.height="auto";let s=0;e&&(s=e.offsetHeight);const a=this.elem.querySelector("#"+this.id+"-box-wrapper");a.style.paddingTop=s/10+"rem",clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{i.style.height=(a.offsetHeight-s)/10+.1+"rem"},100)});c(this,"onResize",()=>{this._setSizes()});c(this,"changeHappened",()=>{this.dialogTitle&&this.hasChanges===!1&&this.dialogTitle.draw({text:this.dialogTitle.data.text+" *"}),this.hasChanges=!0});this.data=e,this.appState=e.appState,this.transitionTime=140,e.style={transitionDuration:this.transitionTime+"ms"},e.class=[O.dialog,"dialog"],this.isShowing=!1,this.isTransitioning=!1,this.isLocked=!1,this.hasChanges=!1,this.onCloseFn=null,this.compoToShow,this.dialogTitle,this.resizeTimer,this.dialogCompos=[],this.dialogCompos.push(this.addChild({id:this.id+"-box-wrapper",class:O.dialogBox,style:{transitionDuration:this.transitionTime+"ms"}})),this.dialogCompos.push(this.addChild(new L({id:this.id+"-close-button",class:O.closeButton,attach:this.id+"-box-wrapper",attributes:{title:h("close_dialog")},click:this._closeDialogClick}))),this.dialogCompos.push(this.addChild({id:this.id+"-inner-scroller",class:O.innerScroller,attach:this.id+"-box-wrapper"})),this.dialogCompos.push(this.addChild({id:this.id+"-inner-box",class:[O.innerBox,"inner-box"],attach:this.id+"-inner-scroller"}))}}const Dn="_toaster_8b0i_1",Rn="_toast_8b0i_1",Ln="_toast__show_8b0i_28",En="_toast__info_8b0i_32",Fn="_toast__close_8b0i_35",Mn="_toast__error_8b0i_38",An="_toast__success_8b0i_44",Pn="_toast__warning_8b0i_50",$n="_toast__beforeHide_8b0i_57",Bn="_toast__hide_8b0i_64";var Q={toaster:Dn,toast:Rn,toast__show:Ln,toast__info:En,toast__close:Fn,toast__error:Mn,toast__success:An,toast__warning:Pn,toast__beforeHide:$n,toast__hide:Bn};class jn extends v{constructor(e){super(e);c(this,"paint",()=>{this.addChildDraw({id:"toaster-list",class:"toaster__list"})});c(this,"addToast",({type:e,delay:i,content:s})=>{e||(e="info"),i===void 0&&(i=4500);const a=performance.now(),n="toast-"+a;return this.addChildDraw(new On({id:n,attach:"toaster-list",prepend:!0,showTransitionTime:this.showTransitionTime,hideTransitionTime:this.hideTransitionTime,animating:!1,toastData:{type:e,content:s,delay:i,startTime:a,onRemoveCallback:()=>this.discardChild(n)},style:{transitionDuration:this.showTransitionTime+"ms"}})),n});e.class=Q.toaster,this.showTransitionTime=350,this.hideTransitionTime=200}}class On extends v{constructor(e){super(e);c(this,"addListeners",()=>{this.addListener({id:this.id+"-close-listener",target:document.getElementById(this.id+"-closeBtn"),type:"click",fn:()=>{this._closeToast()}})});c(this,"paint",()=>{if(this.toastData.initted?this.elem.classList.add(Q.toast__show):(setTimeout(()=>{this.data.animating=!0,this.elem.classList.add(Q.toast__show)},10),this.toastData.initted=!0),this.toastData.delay>0){const e=this.toastData.delay+this.showTransitionTime+10;setTimeout(()=>{this.data.animating=!0,this._closeToast()},e)}});c(this,"_getToastClass",e=>Q["toast__"+e]);c(this,"_closeToast",()=>{!this.elem||(this.elem.style.transitionDuration=this.hideTransitionTime+"ms",this.elem.classList.add(Q.toast__beforeHide),this.elem.style.height=this.elem.offsetHeight+"px",setTimeout(()=>{this.elem.classList.add(Q.toast__hide),setTimeout(()=>{this.toastData.onRemoveCallback()},this.hideTransitionTime+10)},10))});this.toastData=e.toastData,this.showTransitionTime=e.showTransitionTime,this.hideTransitionTime=e.hideTransitionTime,e.class=[Q.toast,this._getToastClass(e.toastData.type)],this.template=`<div>
      <button id="${this.id}-closeBtn" class="${Q.toast__close}"></button>
      <span>${e.toastData.content}</span>
    </div>`}}const Un="_base_17fej_1",qn="_overlays_17fej_6";var Rt={base:Un,overlays:qn,"content-area":"_content-area_17fej_13"};class Nn extends v{constructor(e){super(e);c(this,"init",()=>{this.toaster.draw()});c(this,"paint",()=>{this.dialog.disappear(),this.appState.get("loading.main")?this.mainLoader&&this.mainLoader.draw():(this.mainLoader&&this.mainLoader.discard(!0),this.mainLoader=null,this.bbar.draw(),this.Router.draw())});c(this,"_initAppState",()=>{const e=new Ke({loading:{main:null},resizers:{},orientationLand:!0,curRoute:"/",browserId:this.data.browserId,user:{loggedIn:!1,username:null,userLevel:0},Dialog:null});return e.set("loading.main",!0,this.paint),e});c(this,"loadData",async()=>{const e=this.appState.get("browserId"),i=j()+"/login/access",s={from:"checklogin",browserId:e},a=await P.post(i,s,{withCredentials:!0});a&&a.data&&a.data.loggedIn&&(this.appState.set("user.username",a.data.username),this.appState.set("user.loggedIn",a.data.loggedIn),this.appState.set("user.userLevel",a.data.userLevel||0),this.appState.set("user.verified",a.data.accountVerified)),this.appState.set("serviceSettings",a.data.serviceSettings),this.mainLoader.hide(()=>{this.appState.set("loading.main",!1)})});c(this,"_initResizer",()=>{let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{const i=this.appState.get("resizers"),s=Object.keys(i);for(let a=0;a<s.length;a++)i[s[a]]()},0)})});c(this,"onResize",()=>{const e=window.innerWidth,i=window.innerHeight,s=this.elem;e>i?(s.classList.add("landscape"),s.classList.remove("portrait"),s.style.marginTop=0,s.style.marginLeft=ce.bbarSize+"px",this.appState.set("orientationLand",!0)):(s.classList.remove("landscape"),s.classList.add("portrait"),s.style.marginTop=ce.bbarSize+"px",s.style.marginLeft=0,this.appState.set("orientationLand",!1))});this.template=this._importHtml(hn,[Rt]),this._addToCSSClass(Rt.base),this.appState=this._initAppState(),xr(),this._initResizer(),ce.basePath="/beacon",this.dialog=this.addChild(new In({id:"dialog",attach:"overlays",appState:this.appState})),this.toaster=this.addChild(new jn({id:"toaster",attach:"overlays"})),this.appState.set("Dialog",this.dialog),this.appState.set("Toaster",this.toaster),this.Router=new Ps(ce,this.id,this.paint,{appState:this.appState,attach:"content-area"}),this.bbar=this.addChild(new dn({id:"bbar",appState:this.appState})),this.mainLoader=this.addChild(new un({id:"main-loader",attach:"overlays"})),this.loadData()}addListeners(){this.appState.set("resizers.base",this.onResize),this.onResize()}}var Xe=function(){return Xe=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Xe.apply(this,arguments)};function Y(r,t,e,i){function s(a){return a instanceof e?a:new e(function(n){n(a)})}return new(e||(e=Promise))(function(a,n){function o(d){try{u(i.next(d))}catch(f){n(f)}}function l(d){try{u(i.throw(d))}catch(f){n(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((i=i.apply(r,t||[])).next())})}function z(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,n;return n={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function o(u){return function(d){return l([u,d])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,s=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(d){u=[6,d],s=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function di(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var i=Array(r),s=0,t=0;t<e;t++)for(var a=arguments[t],n=0,o=a.length;n<o;n++,s++)i[s]=a[n];return i}var ui="3.3.3";function pe(r,t){return new Promise(function(e){return setTimeout(e,r,t)})}function Vn(r,t){t===void 0&&(t=1/0);var e=window.requestIdleCallback;return e?new Promise(function(i){return e.call(window,function(){return i()},{timeout:t})}):pe(Math.min(r,t))}function Hn(r){return r&&typeof r.then=="function"}function Lt(r,t){try{var e=r();Hn(e)?e.then(function(i){return t(!0,i)},function(i){return t(!1,i)}):t(!0,e)}catch(i){t(!1,i)}}function Et(r,t,e){return e===void 0&&(e=16),Y(this,void 0,void 0,function(){var i,s,a;return z(this,function(n){switch(n.label){case 0:i=Date.now(),s=0,n.label=1;case 1:return s<r.length?(t(r[s],s),a=Date.now(),a>=i+e?(i=a,[4,pe(0)]):[3,3]):[3,4];case 2:n.sent(),n.label=3;case 3:return++s,[3,1];case 4:return[2]}})})}function Z(r,t){r=[r[0]>>>16,r[0]&65535,r[1]>>>16,r[1]&65535],t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var e=[0,0,0,0];return e[3]+=r[3]+t[3],e[2]+=e[3]>>>16,e[3]&=65535,e[2]+=r[2]+t[2],e[1]+=e[2]>>>16,e[2]&=65535,e[1]+=r[1]+t[1],e[0]+=e[1]>>>16,e[1]&=65535,e[0]+=r[0]+t[0],e[0]&=65535,[e[0]<<16|e[1],e[2]<<16|e[3]]}function B(r,t){r=[r[0]>>>16,r[0]&65535,r[1]>>>16,r[1]&65535],t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var e=[0,0,0,0];return e[3]+=r[3]*t[3],e[2]+=e[3]>>>16,e[3]&=65535,e[2]+=r[2]*t[3],e[1]+=e[2]>>>16,e[2]&=65535,e[2]+=r[3]*t[2],e[1]+=e[2]>>>16,e[2]&=65535,e[1]+=r[1]*t[3],e[0]+=e[1]>>>16,e[1]&=65535,e[1]+=r[2]*t[2],e[0]+=e[1]>>>16,e[1]&=65535,e[1]+=r[3]*t[1],e[0]+=e[1]>>>16,e[1]&=65535,e[0]+=r[0]*t[3]+r[1]*t[2]+r[2]*t[1]+r[3]*t[0],e[0]&=65535,[e[0]<<16|e[1],e[2]<<16|e[3]]}function de(r,t){return t%=64,t===32?[r[1],r[0]]:t<32?[r[0]<<t|r[1]>>>32-t,r[1]<<t|r[0]>>>32-t]:(t-=32,[r[1]<<t|r[0]>>>32-t,r[0]<<t|r[1]>>>32-t])}function A(r,t){return t%=64,t===0?r:t<32?[r[0]<<t|r[1]>>>32-t,r[1]<<t]:[r[1]<<t-32,0]}function C(r,t){return[r[0]^t[0],r[1]^t[1]]}function Ft(r){return r=C(r,[0,r[0]>>>1]),r=B(r,[4283543511,3981806797]),r=C(r,[0,r[0]>>>1]),r=B(r,[3301882366,444984403]),r=C(r,[0,r[0]>>>1]),r}function zn(r,t){r=r||"",t=t||0;var e=r.length%16,i=r.length-e,s=[0,t],a=[0,t],n=[0,0],o=[0,0],l=[2277735313,289559509],u=[1291169091,658871167],d;for(d=0;d<i;d=d+16)n=[r.charCodeAt(d+4)&255|(r.charCodeAt(d+5)&255)<<8|(r.charCodeAt(d+6)&255)<<16|(r.charCodeAt(d+7)&255)<<24,r.charCodeAt(d)&255|(r.charCodeAt(d+1)&255)<<8|(r.charCodeAt(d+2)&255)<<16|(r.charCodeAt(d+3)&255)<<24],o=[r.charCodeAt(d+12)&255|(r.charCodeAt(d+13)&255)<<8|(r.charCodeAt(d+14)&255)<<16|(r.charCodeAt(d+15)&255)<<24,r.charCodeAt(d+8)&255|(r.charCodeAt(d+9)&255)<<8|(r.charCodeAt(d+10)&255)<<16|(r.charCodeAt(d+11)&255)<<24],n=B(n,l),n=de(n,31),n=B(n,u),s=C(s,n),s=de(s,27),s=Z(s,a),s=Z(B(s,[0,5]),[0,1390208809]),o=B(o,u),o=de(o,33),o=B(o,l),a=C(a,o),a=de(a,31),a=Z(a,s),a=Z(B(a,[0,5]),[0,944331445]);switch(n=[0,0],o=[0,0],e){case 15:o=C(o,A([0,r.charCodeAt(d+14)],48));case 14:o=C(o,A([0,r.charCodeAt(d+13)],40));case 13:o=C(o,A([0,r.charCodeAt(d+12)],32));case 12:o=C(o,A([0,r.charCodeAt(d+11)],24));case 11:o=C(o,A([0,r.charCodeAt(d+10)],16));case 10:o=C(o,A([0,r.charCodeAt(d+9)],8));case 9:o=C(o,[0,r.charCodeAt(d+8)]),o=B(o,u),o=de(o,33),o=B(o,l),a=C(a,o);case 8:n=C(n,A([0,r.charCodeAt(d+7)],56));case 7:n=C(n,A([0,r.charCodeAt(d+6)],48));case 6:n=C(n,A([0,r.charCodeAt(d+5)],40));case 5:n=C(n,A([0,r.charCodeAt(d+4)],32));case 4:n=C(n,A([0,r.charCodeAt(d+3)],24));case 3:n=C(n,A([0,r.charCodeAt(d+2)],16));case 2:n=C(n,A([0,r.charCodeAt(d+1)],8));case 1:n=C(n,[0,r.charCodeAt(d)]),n=B(n,l),n=de(n,31),n=B(n,u),s=C(s,n)}return s=C(s,[0,r.length]),a=C(a,[0,r.length]),s=Z(s,a),a=Z(a,s),s=Ft(s),a=Ft(a),s=Z(s,a),a=Z(a,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function Gn(r){var t;return Xe({name:r.name,message:r.message,stack:(t=r.stack)===null||t===void 0?void 0:t.split(`
`)},r)}function Wn(r,t){for(var e=0,i=r.length;e<i;++e)if(r[e]===t)return!0;return!1}function Kn(r,t){return!Wn(r,t)}function lt(r){return parseInt(r)}function U(r){return parseFloat(r)}function K(r,t){return typeof r=="number"&&isNaN(r)?t:r}function N(r){return r.reduce(function(t,e){return t+(e?1:0)},0)}function hi(r,t){if(t===void 0&&(t=1),Math.abs(t)>=1)return Math.round(r/t)*t;var e=1/t;return Math.round(r*e)/e}function Jn(r){for(var t,e,i="Unexpected syntax '"+r+"'",s=/^\s*([a-z-]*)(.*)$/i.exec(r),a=s[1]||void 0,n={},o=/([.:#][\w-]+|\[.+?\])/gi,l=function(m,_){n[m]=n[m]||[],n[m].push(_)};;){var u=o.exec(s[2]);if(!u)break;var d=u[0];switch(d[0]){case".":l("class",d.slice(1));break;case"#":l("id",d.slice(1));break;case"[":{var f=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(d);if(f)l(f[1],(e=(t=f[4])!==null&&t!==void 0?t:f[5])!==null&&e!==void 0?e:"");else throw new Error(i);break}default:throw new Error(i)}}return[a,n]}function Mt(r){return r&&typeof r=="object"&&"message"in r?r:{message:r}}function Yn(r,t){var e=function(s){return typeof s!="function"},i=new Promise(function(s){var a=Date.now();Lt(r.bind(null,t),function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var l=Date.now()-a;if(!n[0])return s(function(){return{error:Mt(n[1]),duration:l}});var u=n[1];if(e(u))return s(function(){return{value:u,duration:l}});s(function(){return new Promise(function(d){var f=Date.now();Lt(u,function(){for(var m=[],_=0;_<arguments.length;_++)m[_]=arguments[_];var y=l+Date.now()-f;if(!m[0])return d({error:Mt(m[1]),duration:y});d({value:m[1],duration:y})})})})})});return function(){return i.then(function(a){return a()})}}function Xn(r,t,e){var i=Object.keys(r).filter(function(a){return Kn(e,a)}),s=Array(i.length);return Et(i,function(a,n){s[n]=Yn(r[a],t)}),function(){return Y(this,void 0,void 0,function(){var n,o,l,u,d,f,m;return z(this,function(_){switch(_.label){case 0:for(n={},o=0,l=i;o<l.length;o++)u=l[o],n[u]=void 0;d=Array(i.length),f=function(){var y;return z(this,function(k){switch(k.label){case 0:return y=!0,[4,Et(i,function(w,b){d[b]||(s[b]?d[b]=s[b]().then(function(T){return n[w]=T}):y=!1)})];case 1:return k.sent(),y?[2,"break"]:[4,pe(1)];case 2:return k.sent(),[2]}})},_.label=1;case 1:return[5,f()];case 2:if(m=_.sent(),m==="break")return[3,4];_.label=3;case 3:return[3,1];case 4:return[4,Promise.all(d)];case 5:return _.sent(),[2,n]}})})}}function ci(){var r=window,t=navigator;return N(["MSCSSMatrix"in r,"msSetImmediate"in r,"msIndexedDB"in r,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Zn(){var r=window,t=navigator;return N(["msWriteProfilerMark"in r,"MSStream"in r,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!ci()}function dt(){var r=window,t=navigator;return N(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,t.vendor.indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in r,"BatteryManager"in r,"webkitMediaStream"in r,"webkitSpeechGrammar"in r])>=5}function ke(){var r=window,t=navigator;return N(["ApplePayError"in r,"CSSPrimitiveValue"in r,"Counter"in r,t.vendor.indexOf("Apple")===0,"getStorageUpdates"in t,"WebKitMediaKeys"in r])>=4}function ut(){var r=window;return N(["safari"in r,!("DeviceMotionEvent"in r),!("ongestureend"in r),!("standalone"in navigator)])>=3}function Qn(){var r,t,e=window;return N(["buildID"in navigator,"MozAppearance"in((t=(r=document.documentElement)===null||r===void 0?void 0:r.style)!==null&&t!==void 0?t:{}),"onmozfullscreenchange"in e,"mozInnerScreenX"in e,"CSSMozDocumentRule"in e,"CanvasCaptureMediaStream"in e])>=4}function eo(){var r=window;return N([!("MediaSettingsRange"in r),"RTCEncodedAudioFrame"in r,""+r.Intl=="[object Intl]",""+r.Reflect=="[object Reflect]"])>=3}function to(){var r=window;return N(["DOMRectList"in r,"RTCPeerConnectionIceEvent"in r,"SVGGeometryElement"in r,"ontransitioncancel"in r])>=3}function io(){if(navigator.platform==="iPad")return!0;var r=screen,t=r.width/r.height;return N(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}function so(){var r=document;return r.fullscreenElement||r.msFullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement||null}function ro(){var r=document;return(r.exitFullscreen||r.msExitFullscreen||r.mozCancelFullScreen||r.webkitExitFullscreen).call(r)}function fi(){var r=dt(),t=Qn();if(!r&&!t)return!1;var e=window;return N(["onorientationchange"in e,"orientation"in e,r&&!("SharedWorker"in e),t&&/android/i.test(navigator.appVersion)])>=2}function ao(){var r=window,t=r.OfflineAudioContext||r.webkitOfflineAudioContext;if(!t)return-2;if(no())return-1;var e=4500,i=5e3,s=new t(1,i,44100),a=s.createOscillator();a.type="triangle",a.frequency.value=1e4;var n=s.createDynamicsCompressor();n.threshold.value=-50,n.knee.value=40,n.ratio.value=12,n.attack.value=0,n.release.value=.25,a.connect(n),n.connect(s.destination),a.start(0);var o=oo(s),l=o[0],u=o[1],d=l.then(function(f){return lo(f.getChannelData(0).subarray(e))},function(f){if(f.name==="timeout"||f.name==="suspended")return-3;throw f});return d.catch(function(){}),function(){return u(),d}}function no(){return ke()&&!ut()&&!to()}function oo(r){var t=3,e=500,i=500,s=5e3,a=function(){},n=new Promise(function(o,l){var u=!1,d=0,f=0;r.oncomplete=function(y){return o(y.renderedBuffer)};var m=function(){setTimeout(function(){return l(At("timeout"))},Math.min(i,f+s-Date.now()))},_=function(){try{switch(r.startRendering(),r.state){case"running":f=Date.now(),u&&m();break;case"suspended":document.hidden||d++,u&&d>=t?l(At("suspended")):setTimeout(_,e);break}}catch(y){l(y)}};_(),a=function(){u||(u=!0,f>0&&m())}});return[n,a]}function lo(r){for(var t=0,e=0;e<r.length;++e)t+=Math.abs(r[e]);return t}function At(r){var t=new Error(r);return t.name=r,t}function mi(r,t,e){var i,s,a;return e===void 0&&(e=50),Y(this,void 0,void 0,function(){var n,o;return z(this,function(l){switch(l.label){case 0:n=document,l.label=1;case 1:return n.body?[3,3]:[4,pe(e)];case 2:return l.sent(),[3,1];case 3:o=n.createElement("iframe"),l.label=4;case 4:return l.trys.push([4,,10,11]),[4,new Promise(function(u,d){var f=!1,m=function(){f=!0,u()},_=function(w){f=!0,d(w)};o.onload=m,o.onerror=_;var y=o.style;y.setProperty("display","block","important"),y.position="absolute",y.top="0",y.left="0",y.visibility="hidden",t&&"srcdoc"in o?o.srcdoc=t:o.src="about:blank",n.body.appendChild(o);var k=function(){var w,b;f||(((b=(w=o.contentWindow)===null||w===void 0?void 0:w.document)===null||b===void 0?void 0:b.readyState)==="complete"?m():setTimeout(k,10))};k()})];case 5:l.sent(),l.label=6;case 6:return!((s=(i=o.contentWindow)===null||i===void 0?void 0:i.document)===null||s===void 0)&&s.body?[3,8]:[4,pe(e)];case 7:return l.sent(),[3,6];case 8:return[4,r(o,o.contentWindow)];case 9:return[2,l.sent()];case 10:return(a=o.parentNode)===null||a===void 0||a.removeChild(o),[7];case 11:return[2]}})})}function uo(r){for(var t=Jn(r),e=t[0],i=t[1],s=document.createElement(e!=null?e:"div"),a=0,n=Object.keys(i);a<n.length;a++){var o=n[a],l=i[o].join(" ");o==="style"?ho(s.style,l):s.setAttribute(o,l)}return s}function ho(r,t){for(var e=0,i=t.split(";");e<i.length;e++){var s=i[e],a=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(s);if(a){var n=a[1],o=a[2],l=a[4];r.setProperty(n,o,l||"")}}}var co="mmMwWLliI0O&1",fo="48px",ue=["monospace","sans-serif","serif"],Pt=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function mo(){return mi(function(r,t){var e=t.document,i=e.body;i.style.fontSize=fo;var s=e.createElement("div"),a={},n={},o=function(k){var w=e.createElement("span"),b=w.style;return b.position="absolute",b.top="0",b.left="0",b.fontFamily=k,w.textContent=co,s.appendChild(w),w},l=function(k,w){return o("'"+k+"',"+w)},u=function(){return ue.map(o)},d=function(){for(var k={},w=function(X){k[X]=ue.map(function(je){return l(X,je)})},b=0,T=Pt;b<T.length;b++){var ve=T[b];w(ve)}return k},f=function(k){return ue.some(function(w,b){return k[b].offsetWidth!==a[w]||k[b].offsetHeight!==n[w]})},m=u(),_=d();i.appendChild(s);for(var y=0;y<ue.length;y++)a[ue[y]]=m[y].offsetWidth,n[ue[y]]=m[y].offsetHeight;return Pt.filter(function(k){return f(_[k])})})}function po(){var r=navigator.plugins;if(!!r){for(var t=[],e=0;e<r.length;++e){var i=r[e];if(!!i){for(var s=[],a=0;a<i.length;++a){var n=i[a];s.push({type:n.type,suffixes:n.suffixes})}t.push({name:i.name,description:i.description,mimeTypes:s})}}return t}}function go(){var r=vo(),t=r[0],e=r[1];return _o(t,e)?{winding:wo(e),geometry:yo(t,e),text:bo(t,e)}:{winding:!1,geometry:"",text:""}}function vo(){var r=document.createElement("canvas");return r.width=1,r.height=1,[r,r.getContext("2d")]}function _o(r,t){return!!(t&&r.toDataURL)}function wo(r){return r.rect(0,0,10,10),r.rect(2,2,6,6),!r.isPointInPath(5,5,"evenodd")}function bo(r,t){r.width=240,r.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var e="Cwm fjordbank gly "+String.fromCharCode(55357,56835);return t.fillText(e,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(e,4,45),pi(r)}function yo(r,t){r.width=122,r.height=110,t.globalCompositeOperation="multiply";for(var e=0,i=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];e<i.length;e++){var s=i[e],a=s[0],n=s[1],o=s[2];t.fillStyle=a,t.beginPath(),t.arc(n,o,40,0,Math.PI*2,!0),t.closePath(),t.fill()}return t.fillStyle="#f9c",t.arc(60,60,60,0,Math.PI*2,!0),t.arc(60,60,20,0,Math.PI*2,!0),t.fill("evenodd"),pi(r)}function pi(r){return r.toDataURL()}function So(){var r=navigator,t=0,e;r.maxTouchPoints!==void 0?t=lt(r.maxTouchPoints):r.msMaxTouchPoints!==void 0&&(t=r.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch{e=!1}var i="ontouchstart"in window;return{maxTouchPoints:t,touchEvent:e,touchStart:i}}function ko(){return navigator.oscpu}function xo(){var r=navigator,t=[],e=r.language||r.userLanguage||r.browserLanguage||r.systemLanguage;if(e!==void 0&&t.push([e]),Array.isArray(r.languages))dt()&&eo()||t.push(r.languages);else if(typeof r.languages=="string"){var i=r.languages;i&&t.push(i.split(","))}return t}function Co(){return window.screen.colorDepth}function To(){return K(U(navigator.deviceMemory),void 0)}function Io(){var r=screen,t=function(i){return K(lt(i),null)},e=[t(r.width),t(r.height)];return e.sort().reverse(),e}var Do=2500,Ro=10,Ee,He;function Lo(){if(He===void 0){var r=function(){var t=Ze();Qe(t)?He=setTimeout(r,Do):(Ee=t,He=void 0)};r()}}function Eo(){var r=this;return Lo(),function(){return Y(r,void 0,void 0,function(){var t;return z(this,function(e){switch(e.label){case 0:return t=Ze(),Qe(t)?Ee?[2,di(Ee)]:so()?[4,ro()]:[3,2]:[3,2];case 1:e.sent(),t=Ze(),e.label=2;case 2:return Qe(t)||(Ee=t),[2,t]}})})}}function Fo(){var r=this,t=Eo();return function(){return Y(r,void 0,void 0,function(){var e,i;return z(this,function(s){switch(s.label){case 0:return[4,t()];case 1:return e=s.sent(),i=function(a){return a===null?null:hi(a,Ro)},[2,[i(e[0]),i(e[1]),i(e[2]),i(e[3])]]}})})}}function Ze(){var r=screen;return[K(U(r.availTop),null),K(U(r.width)-U(r.availWidth)-K(U(r.availLeft),0),null),K(U(r.height)-U(r.availHeight)-K(U(r.availTop),0),null),K(U(r.availLeft),null)]}function Qe(r){for(var t=0;t<4;++t)if(r[t])return!1;return!0}function Mo(){return K(lt(navigator.hardwareConcurrency),void 0)}function Ao(){var r,t=(r=window.Intl)===null||r===void 0?void 0:r.DateTimeFormat;if(t){var e=new t().resolvedOptions().timeZone;if(e)return e}var i=-Po();return"UTC"+(i>=0?"+":"")+Math.abs(i)}function Po(){var r=new Date().getFullYear();return Math.max(U(new Date(r,0,1).getTimezoneOffset()),U(new Date(r,6,1).getTimezoneOffset()))}function $o(){try{return!!window.sessionStorage}catch{return!0}}function Bo(){try{return!!window.localStorage}catch{return!0}}function jo(){if(!(ci()||Zn()))try{return!!window.indexedDB}catch{return!0}}function Oo(){return!!window.openDatabase}function Uo(){return navigator.cpuClass}function qo(){var r=navigator.platform;return r==="MacIntel"&&ke()&&!ut()?io()?"iPad":"iPhone":r}function No(){return navigator.vendor||""}function Vo(){for(var r=[],t=0,e=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<e.length;t++){var i=e[t],s=window[i];s&&typeof s=="object"&&r.push(i)}return r.sort()}function Ho(){var r=document;try{r.cookie="cookietest=1; SameSite=Strict;";var t=r.cookie.indexOf("cookietest=")!==-1;return r.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch{return!1}}var be={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'a[title="7naga poker" i]','[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",".iosAdsiosAds-layout",".quangcao",'[href^="https://r88.vn/"]','[href^="https://zbet.vn/"]'],adBlockFinland:[".mainostila",".sponsorit",".ylamainos",'a[href*="/clickthrgh.asp?"]','a[href^="https://app.readpeak.com/ads"]'],adBlockPersian:["#navbar_notice_50",'a[href^="http://g1.v.fwmrm.net/ad/"]',".kadr",'TABLE[width="140px"]',"#divAgahi"],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect"],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:["#ad-after","#ad-p3",".BetterJsPopOverlay","#ad_300X250","#bannerfloat22"],adGuardChinese:['a[href*=".ttz5.cn"]','a[href*=".yabovip2027.com/"]',".tm3all2h4b",".cc5278_banner_ad"],adGuardFrench:[".zonepub",'[class*="_adLeaderboard"]','[id^="block-xiti_oas-"]','a[href^="http://ptapjmp.com/"]','a[href^="https://go.alvexo.com/"]'],adGuardGerman:[".banneritemwerbung_head_1",".boxstartwerbung",".werbung3",'a[href^="http://www.eis.de/index.phtml?refid="]','a[href^="https://www.tipico.com/?affiliateId="]'],adGuardJapanese:["#kauli_yad_1","#ad-giftext","#adsSPRBlock",'a[href^="http://ad2.trafficgate.net/"]','a[href^="http://www.rssad.jp/"]'],adGuardMobile:["amp-auto-ads","#mgid_iframe",".amp_ad",'amp-embed[type="24smi"]',"#mgid_iframe1"],adGuardRussian:['a[href^="https://ya-distrib.ru/r/"]','a[href^="https://ad.letmeads.com/"]',".reclama",'div[id^="smi2adblock"]','div[id^="AdFox_banner_"]'],adGuardSocial:['a[href^="//www.stumbleupon.com/submit?url="]','a[href^="//telegram.me/share/url?"]',".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",'[href^="http://ads.glispa.com/"]'],adGuardTrackingProtection:['amp-embed[type="taboola"]',"#qoo-counter",'a[href^="http://click.hotlog.ru/"]','a[href^="http://hitcounter.ru/top/stat.php"]','a[href^="http://top.mail.ru/jump"]'],adGuardTurkish:["#backkapat","#reklami",'a[href^="http://adserv.ontek.com.tr/"]','a[href^="http://izlenzi.com/campaign/"]','a[href^="http://www.installads.net/"]'],bulgarian:["td#freenet_table_ads","#adbody","#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:["#AD_banner_bottom","#Ads_google_02","#N-ad-article-rightRail-1","#ad-fullbanner2","#ad-zone-2"],easyListChina:['a[href*=".wensixuetang.com/"]','A[href*="/hth107.com/"]','.appguide-wrap[onclick*="bcebos.com"]',".frontpageAdvM","#taotaole"],easyListCookie:["#adtoniq-msg-bar","#CoockiesPage","#CookieModal_cookiemodal","#DO_CC_PANEL","#ShowCookie"],easyListCzechSlovak:["#onlajny-stickers","#reklamni-box",".reklama-megaboard",".sklik",'[id^="sklikReklama"]'],easyListDutch:["#advertentie","#vipAdmarktBannerBlock",".adstekst",'a[href^="https://xltube.nl/click/"]',"#semilo-lrectangle"],easyListGermany:['a[href^="http://www.hw-area.com/?dp="]','a[href^="https://ads.sunmaker.com/tracking.php?"]',".werbung-skyscraper2",".bannergroup_werbung",".ads_rechts"],easyListItaly:[".box_adv_annunci",".sb-box-pubbliredazionale",'a[href^="http://affiliazioniads.snai.it/"]','a[href^="https://adserver.html.it/"]','a[href^="https://affiliazioniads.snai.it/"]'],easyListLithuania:[".reklamos_tarpas",".reklamos_nuorodos",'img[alt="Reklaminis skydelis"]','img[alt="Dedikuoti.lt serveriai"]','img[alt="Hostingas Serveriai.lt"]'],estonian:['A[href*="http://pay4results24.eu"]'],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:['a[href*="casinopro.se"][target="_blank"]','a[href*="doktor-se.onelink.me"]',"article.category-samarbete","div.holidAds","ul.adsmodern"],greekAdBlock:['A[href*="adman.otenet.gr/click?"]','A[href*="http://axiabanners.exodus.gr/"]','A[href*="http://interactive.forthnet.gr/click?"]',"DIV.agores300","TABLE.advright"],hungarian:['A[href*="ad.eval.hu"]','A[href*="ad.netmedia.hu"]','A[href*="daserver.ultraweb.hu"]',"#cemp_doboz",".optimonk-iframe-container"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:['A[href^="/framework/resources/forms/ads.aspx"]'],latvian:['a[href="http://www.salidzini.lv/"][style="display: block; width: 120px; height: 40px; overflow: hidden; position: relative;"]','a[href="http://www.salidzini.lv/"][style="display: block; width: 88px; height: 31px; overflow: hidden; position: relative;"]'],listKr:['a[href*="//kingtoon.slnk.kr"]','a[href*="//playdsb.com/kr"]',"div.logly-lift-adz",'div[data-widget_id="ml6EJ074"]',"ins.daum_ddn_area"],listeAr:[".geminiLB1Ad",".right-and-left-sponsers",'a[href*=".aflam.info"]','a[href*="booraq.org"]','a[href*="dubizzle.com/ar/?utm_source="]'],listeFr:['a[href^="http://promo.vador.com/"]',"#adcontainer_recherche",'a[href*="weborama.fr/fcgi-bin/"]',".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",'[href^="https://aff.sendhub.pl/"]','a[href^="http://advmanager.techfun.pl/redirect/"]','a[href^="http://www.trizer.pl/?utm_source"]',"div#skapiec_ad"],ro:['a[href^="//afftrk.altex.ro/Counter/Click"]','a[href^="/magazin/"]','a[href^="https://blackfridaysales.ro/trk/shop/"]','a[href^="https://event.2performant.com/events/click"]','a[href^="https://l.profitshare.ro/"]'],ruAd:['a[href*="//febrare.ru/"]','a[href*="//utimg.ru/"]','a[href*="://chikidiki.ru"]',"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]","#ads-google-middle_rectangle-group",".ads300s",".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",".ctpl-fullbanner",".zergnet-recommend",".yt.btn-link.btn-md.btn"]};function zo(r){var t=(r===void 0?{}:r).debug;return Y(this,void 0,void 0,function(){var e,i,s,a,n;return z(this,function(o){switch(o.label){case 0:return Go()?(e=Object.keys(be),i=(n=[]).concat.apply(n,e.map(function(l){return be[l]})),[4,Wo(i)]):[2,void 0];case 1:return s=o.sent(),t&&Ko(s),a=e.filter(function(l){var u=be[l],d=N(u.map(function(f){return s[f]}));return d>u.length*.6}),a.sort(),[2,a]}})})}function Go(){return ke()||fi()}function Wo(r){var t;return Y(this,void 0,void 0,function(){var e,i,s,a,l,n,o,l;return z(this,function(u){switch(u.label){case 0:for(e=document,i=e.createElement("div"),s=new Array(r.length),a={},$t(i),l=0;l<r.length;++l)n=uo(r[l]),o=e.createElement("div"),$t(o),o.appendChild(n),i.appendChild(o),s[l]=n;u.label=1;case 1:return e.body?[3,3]:[4,pe(50)];case 2:return u.sent(),[3,1];case 3:e.body.appendChild(i);try{for(l=0;l<r.length;++l)s[l].offsetParent||(a[r[l]]=!0)}finally{(t=i.parentNode)===null||t===void 0||t.removeChild(i)}return[2,a]}})})}function $t(r){r.style.setProperty("display","block","important")}function Ko(r){for(var t="DOM blockers debug:\n```",e=0,i=Object.keys(be);e<i.length;e++){var s=i[e];t+=`
`+s+":";for(var a=0,n=be[s];a<n.length;a++){var o=n[a];t+=`
  `+o+" "+(r[o]?"\u{1F6AB}":"\u27A1\uFE0F")}}console.log(t+"\n```")}function Jo(){for(var r=0,t=["rec2020","p3","srgb"];r<t.length;r++){var e=t[r];if(matchMedia("(color-gamut: "+e+")").matches)return e}}function Yo(){if(Bt("inverted"))return!0;if(Bt("none"))return!1}function Bt(r){return matchMedia("(inverted-colors: "+r+")").matches}function Xo(){if(jt("active"))return!0;if(jt("none"))return!1}function jt(r){return matchMedia("(forced-colors: "+r+")").matches}var Zo=100;function Qo(){if(!!matchMedia("(min-monochrome: 0)").matches){for(var r=0;r<=Zo;++r)if(matchMedia("(max-monochrome: "+r+")").matches)return r;throw new Error("Too high value")}}function el(){if(he("no-preference"))return 0;if(he("high")||he("more"))return 1;if(he("low")||he("less"))return-1;if(he("forced"))return 10}function he(r){return matchMedia("(prefers-contrast: "+r+")").matches}function tl(){if(Ot("reduce"))return!0;if(Ot("no-preference"))return!1}function Ot(r){return matchMedia("(prefers-reduced-motion: "+r+")").matches}function il(){if(Ut("high"))return!0;if(Ut("standard"))return!1}function Ut(r){return matchMedia("(dynamic-range: "+r+")").matches}var S=Math,R=function(){return 0};function sl(){var r=S.acos||R,t=S.acosh||R,e=S.asin||R,i=S.asinh||R,s=S.atanh||R,a=S.atan||R,n=S.sin||R,o=S.sinh||R,l=S.cos||R,u=S.cosh||R,d=S.tan||R,f=S.tanh||R,m=S.exp||R,_=S.expm1||R,y=S.log1p||R,k=function(x){return S.pow(S.PI,x)},w=function(x){return S.log(x+S.sqrt(x*x-1))},b=function(x){return S.log(x+S.sqrt(x*x+1))},T=function(x){return S.log((1+x)/(1-x))/2},ve=function(x){return S.exp(x)-1/S.exp(x)/2},X=function(x){return(S.exp(x)+1/S.exp(x))/2},je=function(x){return S.exp(x)-1},_i=function(x){return(S.exp(2*x)-1)/(S.exp(2*x)+1)},wi=function(x){return S.log(1+x)};return{acos:r(.12312423423423424),acosh:t(1e308),acoshPf:w(1e154),asin:e(.12312423423423424),asinh:i(1),asinhPf:b(1),atanh:s(.5),atanhPf:T(.5),atan:a(.5),sin:n(-1e300),sinh:o(1),sinhPf:ve(1),cos:l(10.000000000123),cosh:u(1),coshPf:X(1),tan:d(-1e300),tanh:f(1),tanhPf:_i(1),exp:m(1),expm1:_(1),expm1Pf:je(1),log1p:y(10),log1pPf:wi(10),powPI:k(-100)}}var rl="mmMwWLliI0fiflO&1",ze={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function al(){return nl(function(r,t){for(var e={},i={},s=0,a=Object.keys(ze);s<a.length;s++){var n=a[s],o=ze[n],l=o[0],u=l===void 0?{}:l,d=o[1],f=d===void 0?rl:d,m=r.createElement("span");m.textContent=f,m.style.whiteSpace="nowrap";for(var _=0,y=Object.keys(u);_<y.length;_++){var k=y[_],w=u[k];w!==void 0&&(m.style[k]=w)}e[n]=m,t.appendChild(r.createElement("br")),t.appendChild(m)}for(var b=0,T=Object.keys(ze);b<T.length;b++){var n=T[b];i[n]=e[n].getBoundingClientRect().width}return i})}function nl(r,t){return t===void 0&&(t=4e3),mi(function(e,i){var s=i.document,a=s.body,n=a.style;n.width=t+"px",n.webkitTextSizeAdjust=n.textSizeAdjust="none",dt()?a.style.zoom=""+1/i.devicePixelRatio:ke()&&(a.style.zoom="reset");var o=s.createElement("div");return o.textContent=di(Array(t/20<<0)).map(function(){return"word"}).join(" "),a.appendChild(o),r(s,a)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}var ol={fonts:mo,domBlockers:zo,fontPreferences:al,audio:ao,screenFrame:Fo,osCpu:ko,languages:xo,colorDepth:Co,deviceMemory:To,screenResolution:Io,hardwareConcurrency:Mo,timezone:Ao,sessionStorage:$o,localStorage:Bo,indexedDB:jo,openDatabase:Oo,cpuClass:Uo,platform:qo,plugins:po,canvas:go,touchSupport:So,vendor:No,vendorFlavors:Vo,cookiesEnabled:Ho,colorGamut:Jo,invertedColors:Yo,forcedColors:Xo,monochrome:Qo,contrast:el,reducedMotion:tl,hdr:il,math:sl};function ll(r){return Xn(ol,r,[])}var dl="$ if upgrade to Pro: https://fpjs.dev/pro";function ul(r){var t=hl(r),e=cl(t);return{score:t,comment:dl.replace(/\$/g,""+e)}}function hl(r){if(fi())return .4;if(ke())return ut()?.5:.3;var t=r.platform.value||"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}function cl(r){return hi(.99+.01*r,1e-4)}function fl(r){for(var t="",e=0,i=Object.keys(r).sort();e<i.length;e++){var s=i[e],a=r[s],n=a.error?"error":JSON.stringify(a.value);t+=(t?"|":"")+s.replace(/([:|\\])/g,"\\$1")+":"+n}return t}function gi(r){return JSON.stringify(r,function(t,e){return e instanceof Error?Gn(e):e},2)}function vi(r){return zn(fl(r))}function ml(r){var t,e=ul(r);return{get visitorId(){return t===void 0&&(t=vi(this.components)),t},set visitorId(i){t=i},confidence:e,components:r,version:ui}}function pl(r){return r===void 0&&(r=50),Vn(r,r*2)}function gl(r,t){var e=Date.now();return{get:function(i){return Y(this,void 0,void 0,function(){var s,a,n;return z(this,function(o){switch(o.label){case 0:return s=Date.now(),[4,r()];case 1:return a=o.sent(),n=ml(a),(t||(i==null?void 0:i.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: "+n.version+`
userAgent: `+navigator.userAgent+`
timeBetweenLoadAndGet: `+(s-e)+`
visitorId: `+n.visitorId+`
components: `+gi(a)+"\n```"),[2,n]}})})}}}function vl(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var r=new XMLHttpRequest;r.open("get","https://m1.openfpcdn.io/fingerprintjs/v"+ui+"/npm-monitoring",!0),r.send()}catch(t){console.error(t)}}function _l(r){var t=r===void 0?{}:r,e=t.delayFallback,i=t.debug,s=t.monitoring,a=s===void 0?!0:s;return Y(this,void 0,void 0,function(){var n;return z(this,function(o){switch(o.label){case 0:return a&&vl(),[4,pl(e)];case 1:return o.sent(),n=ll({debug:i}),[2,gl(n,i)]}})})}var wl={load:_l,hashComponents:vi,componentsToDebugString:gi},bl=wl;document.addEventListener("DOMContentLoaded",()=>{const r=bl.load();(async()=>{const i=(await(await r).get()).visitorId;new Nn({id:"base-id",parentId:"root",browserId:i}).draw()})()});
